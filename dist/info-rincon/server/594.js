"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=594,exports.ids=[594],exports.modules={72594:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PlacesModule:()=>PlacesModule});var common=__webpack_require__(38583),router=__webpack_require__(8307),paginator=__webpack_require__(53962),sort=__webpack_require__(11494),table=__webpack_require__(32789),map=__webpack_require__(88002),sweetalert2_all=__webpack_require__(88259),sweetalert2_all_default=__webpack_require__.n(sweetalert2_all),core=__webpack_require__(37716),spinner_service=__webpack_require__(74649),places_service=__webpack_require__(60099),section_header_component=__webpack_require__(62305),form_field=__webpack_require__(98295),input=__webpack_require__(49983),icon=__webpack_require__(76627),fesm2015_button=__webpack_require__(51095);function PlacesComponent_th_16_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",28),core._uU(1,"Id."),core.qZA())}function PlacesComponent_td_17_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",29),core._uU(1),core.qZA()),2&rf){const place_r16=ctx.$implicit;core.xp6(1),core.Oqu(place_r16.id)}}function PlacesComponent_th_19_Template(rf,ctx){1&rf&&core._UZ(0,"th",30)}function PlacesComponent_td_20_Template(rf,ctx){if(1&rf){const _r19=core.EpF();core.TgZ(0,"td",31),core.TgZ(1,"img",32),core.NdJ("click",__name(function(){const element_r17=core.CHM(_r19).$implicit;return core.oxw().gotoItem(element_r17)},"PlacesComponent_td_20_Template_img_click_1_listener")),core.qZA(),core.qZA()}if(2&rf){const element_r17=ctx.$implicit;core.xp6(1),core.Q6J("src",element_r17.image,core.LSH)}}function PlacesComponent_th_22_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",33),core._uU(1,"Info del Lugar"),core.qZA())}function PlacesComponent_td_23_Template(rf,ctx){if(1&rf){const _r22=core.EpF();core.TgZ(0,"td",34),core.NdJ("click",__name(function(){const item_r20=core.CHM(_r22).$implicit;return core.oxw().gotoItem(item_r20)},"PlacesComponent_td_23_Template_td_click_0_listener")),core.TgZ(1,"div",35),core._uU(2),core.qZA(),core._uU(3),core.TgZ(4,"div",36),core._uU(5),core.qZA(),core.qZA()}if(2&rf){const item_r20=ctx.$implicit;core.xp6(2),core.hij(" ",item_r20.description," "),core.xp6(1),core.hij(" ",item_r20.name," "),core.xp6(2),core.hij(" ",item_r20.locality," ")}}function PlacesComponent_th_25_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",37),core._uU(1,"Nombre"),core.qZA())}function PlacesComponent_td_26_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",29),core._uU(1),core.qZA()),2&rf){const place_r23=ctx.$implicit;core.xp6(1),core.Oqu(place_r23.name)}}function PlacesComponent_th_28_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",37),core._uU(1,"Tipo"),core.qZA())}function PlacesComponent_td_29_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",29),core._uU(1),core.qZA()),2&rf){const place_r24=ctx.$implicit;core.xp6(1),core.Oqu(place_r24.description)}}function PlacesComponent_th_31_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",37),core._uU(1,"Localidad"),core.qZA())}function PlacesComponent_td_32_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",29),core._uU(1),core.qZA()),2&rf){const place_r25=ctx.$implicit;core.xp6(1),core.Oqu(place_r25.locality)}}function PlacesComponent_th_34_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",38),core._uU(1,"Acciones "),core.qZA())}function PlacesComponent_td_35_Template(rf,ctx){if(1&rf){const _r28=core.EpF();core.TgZ(0,"td",39),core.TgZ(1,"button",40),core.NdJ("click",__name(function(){const place_r26=core.CHM(_r28).$implicit;return core.oxw().gotoItem(place_r26)},"PlacesComponent_td_35_Template_button_click_1_listener")),core.TgZ(2,"mat-icon",41),core._uU(3," remove_red_eye "),core.qZA(),core.qZA(),core.TgZ(4,"button",42),core.NdJ("click",__name(function(){const place_r26=core.CHM(_r28).$implicit;return core.oxw().editItem(place_r26)},"PlacesComponent_td_35_Template_button_click_4_listener")),core.TgZ(5,"mat-icon",43),core._uU(6," build_circle "),core.qZA(),core.qZA(),core.TgZ(7,"button",44),core.NdJ("click",__name(function(){const place_r26=core.CHM(_r28).$implicit;return core.oxw().deleteItem(place_r26)},"PlacesComponent_td_35_Template_button_click_7_listener")),core.TgZ(8,"mat-icon",45),core._uU(9," delete "),core.qZA(),core.qZA(),core.qZA()}}function PlacesComponent_tr_36_Template(rf,ctx){1&rf&&core._UZ(0,"tr",46)}function PlacesComponent_tr_37_Template(rf,ctx){1&rf&&core._UZ(0,"tr",47)}__name(PlacesComponent_th_16_Template,"PlacesComponent_th_16_Template"),__name(PlacesComponent_td_17_Template,"PlacesComponent_td_17_Template"),__name(PlacesComponent_th_19_Template,"PlacesComponent_th_19_Template"),__name(PlacesComponent_td_20_Template,"PlacesComponent_td_20_Template"),__name(PlacesComponent_th_22_Template,"PlacesComponent_th_22_Template"),__name(PlacesComponent_td_23_Template,"PlacesComponent_td_23_Template"),__name(PlacesComponent_th_25_Template,"PlacesComponent_th_25_Template"),__name(PlacesComponent_td_26_Template,"PlacesComponent_td_26_Template"),__name(PlacesComponent_th_28_Template,"PlacesComponent_th_28_Template"),__name(PlacesComponent_td_29_Template,"PlacesComponent_td_29_Template"),__name(PlacesComponent_th_31_Template,"PlacesComponent_th_31_Template"),__name(PlacesComponent_td_32_Template,"PlacesComponent_td_32_Template"),__name(PlacesComponent_th_34_Template,"PlacesComponent_th_34_Template"),__name(PlacesComponent_td_35_Template,"PlacesComponent_td_35_Template"),__name(PlacesComponent_tr_36_Template,"PlacesComponent_tr_36_Template"),__name(PlacesComponent_tr_37_Template,"PlacesComponent_tr_37_Template");const _c0=__name(function(){return[5,10,25,100]},"_c0");class PlacesComponent{constructor(router2,spinnerSvc,placeSrv){this.router=router2,this.spinnerSvc=spinnerSvc,this.placeSrv=placeSrv,this.listOfObservers=[],this.loading=!0,this.dataSource=new table.by,this.displayedColumns=["id","image","collapsed-info","name","types","locality","actions3"],this.spinnerSvc.show()}ngOnInit(){const subs1$=this.placeSrv.getAllPlaces().pipe((0,map.U)(places=>places.map(place2=>{const reducer=__name((acc,value)=>`${acc} ${value.substr(0,value.indexOf(" "))}`,"reducer");return place2.description=place2.types?place2.types.reduce(reducer,""):"",Object.assign({},place2)}))).subscribe(places=>{this.places=places,this.dataSource=new table.by(this.places),this.spinnerSvc.hide(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort});this.listOfObservers.push(subs1$)}applyFilter(filterValue){this.dataSource.filter=filterValue.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}gotoItem(place2){this.router.navigate([`lugares/${place2.id}`])}editItem(place2){this.router.navigate([`lugares/${place2.id}/editar`])}deleteItem(place2){sweetalert2_all_default().fire({title:"\xbfEst\xe1s seguro?",text:"No podr\xe1s deshacer esta acci\xf3n de borrado!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1S\xed, b\xf3rralo!"}).then(result=>{result.isConfirmed&&(this.placeSrv.deletePlace(place2),sweetalert2_all_default().fire("\xa1Borrado!",`${place2.name} ha sido borrado`,"success"))})}addItem(){this.router.navigate(["lugares/0/editar"])}ngOnDestroy(){this.listOfObservers.forEach(sub=>sub.unsubscribe())}}__name(PlacesComponent,"PlacesComponent"),PlacesComponent.\u0275fac=__name(function(t){return new(t||PlacesComponent)(core.Y36(router.F0),core.Y36(spinner_service.V),core.Y36(places_service.k))},"PlacesComponent_Factory"),PlacesComponent.\u0275cmp=core.Xpm({type:PlacesComponent,selectors:[["app-places"]],viewQuery:__name(function(rf,ctx){if(1&rf&&(core.Gf(paginator.NW,5),core.Gf(sort.YE,5)),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.paginator=_t.first),core.iGM(_t=core.CRH())&&(ctx.sort=_t.first)}},"PlacesComponent_Query"),decls:39,vars:7,consts:[[3,"title"],[1,"section-wrapper"],[1,"section-list-options"],["matInput","","placeholder","Filtrar",3,"keyup"],["matSuffix",""],[1,"buttons"],["mat-mini-fab","",1,"btn-1",3,"click"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","class","td-extra-lg",4,"matHeaderCellDef"],["mat-cell","","class","td-extra-lg",4,"matCellDef"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","collapsed-info"],["mat-header-cell","","class","td-collapsed-info","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","td-collapsed-info",3,"click",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","class","td-extra-lg","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","types"],["matColumnDef","locality"],["matColumnDef","actions3"],["mat-header-cell","","class","td-extra-md",4,"matHeaderCellDef"],["mat-cell","","class","td-extra-md",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["mat-header-cell","",1,"td-extra-lg"],["mat-cell","",1,"td-extra-lg"],["mat-header-cell",""],["mat-cell",""],["alt","element.name",1,"img-thumbnail",3,"src","click"],["mat-header-cell","","mat-sort-header","",1,"td-collapsed-info"],["mat-cell","",1,"td-collapsed-info",3,"click"],[1,"full-inside"],[2,"font-size","smaller","color","gray"],["mat-header-cell","","mat-sort-header","",1,"td-extra-lg"],["mat-header-cell","",1,"td-extra-md"],["mat-cell","",1,"td-extra-md"],["mat-icon-button","","matTooltip","Click to View",1,"iconbutton",3,"click"],["aria-label","View",1,"btn-1"],["mat-icon-button","","matTooltip","Click to Edit",1,"iconbutton",3,"click"],["aria-label","Edit",1,"btn-1"],["mat-icon-button","","matTooltip","Click to Delete",1,"iconbutton",3,"click"],["aria-label","Delete",1,"btn-1"],["mat-header-row",""],["mat-row",""]],template:__name(function(rf,ctx){1&rf&&(core._UZ(0,"app-section-header",0),core.TgZ(1,"div",1),core.TgZ(2,"div",2),core.TgZ(3,"mat-form-field"),core.TgZ(4,"mat-label"),core._uU(5,"Filtro"),core.qZA(),core.TgZ(6,"input",3),core.NdJ("keyup",__name(function($event){return ctx.applyFilter($event.target.value)},"PlacesComponent_Template_input_keyup_6_listener")),core.qZA(),core.TgZ(7,"mat-icon",4),core._uU(8,"search"),core.qZA(),core.qZA(),core.TgZ(9,"div",5),core.TgZ(10,"button",6),core.NdJ("click",__name(function(){return ctx.addItem()},"PlacesComponent_Template_button_click_10_listener")),core.TgZ(11,"mat-icon"),core._uU(12,"add"),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.TgZ(13,"div",7),core.TgZ(14,"table",8),core.ynx(15,9),core.YNc(16,PlacesComponent_th_16_Template,2,0,"th",10),core.YNc(17,PlacesComponent_td_17_Template,2,1,"td",11),core.BQk(),core.ynx(18,12),core.YNc(19,PlacesComponent_th_19_Template,1,0,"th",13),core.YNc(20,PlacesComponent_td_20_Template,2,1,"td",14),core.BQk(),core.ynx(21,15),core.YNc(22,PlacesComponent_th_22_Template,2,0,"th",16),core.YNc(23,PlacesComponent_td_23_Template,6,3,"td",17),core.BQk(),core.ynx(24,18),core.YNc(25,PlacesComponent_th_25_Template,2,0,"th",19),core.YNc(26,PlacesComponent_td_26_Template,2,1,"td",11),core.BQk(),core.ynx(27,20),core.YNc(28,PlacesComponent_th_28_Template,2,0,"th",19),core.YNc(29,PlacesComponent_td_29_Template,2,1,"td",11),core.BQk(),core.ynx(30,21),core.YNc(31,PlacesComponent_th_31_Template,2,0,"th",19),core.YNc(32,PlacesComponent_td_32_Template,2,1,"td",11),core.BQk(),core.ynx(33,22),core.YNc(34,PlacesComponent_th_34_Template,2,0,"th",23),core.YNc(35,PlacesComponent_td_35_Template,10,0,"td",24),core.BQk(),core.YNc(36,PlacesComponent_tr_36_Template,1,0,"tr",25),core.YNc(37,PlacesComponent_tr_37_Template,1,0,"tr",26),core.qZA(),core._UZ(38,"mat-paginator",27),core.qZA(),core.qZA()),2&rf&&(core.Q6J("title","Panel de Configuraci\xf3n de Lugares"),core.xp6(14),core.Q6J("dataSource",ctx.dataSource),core.xp6(22),core.Q6J("matHeaderRowDef",ctx.displayedColumns),core.xp6(1),core.Q6J("matRowDefColumns",ctx.displayedColumns),core.xp6(1),core.Q6J("pageSizeOptions",core.DdM(6,_c0))("pageSize",10))},"PlacesComponent_Template"),directives:[section_header_component.I,form_field.KE,form_field.hX,input.Nt,icon.Hw,form_field.R9,fesm2015_button.lW,table.BZ,sort.YE,table.w1,table.fO,table.Dz,table.as,table.nj,paginator.NW,table.ge,table.ev,sort.nU,table.XQ,table.Gk],styles:[""]});var tap=__webpack_require__(68307),place=__webpack_require__(35682),seo_service=__webpack_require__(46228),log_service=__webpack_require__(22189),card=__webpack_require__(93738),tabs=__webpack_require__(65939),chips=__webpack_require__(58341);function PlaceViewComponent_app_section_header_0_Template(rf,ctx){if(1&rf&&core._UZ(0,"app-section-header",4),2&rf){const place_r4=ctx.ngIf;core.Q6J("title",place_r4.name+" | Lugar de Rinc\xf3n de Soto")}}function PlaceViewComponent_mat_card_3_mat_chip_24_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-chip"),core._uU(1),core.qZA()),2&rf){const type_r7=ctx.$implicit;core.xp6(1),core.Oqu(type_r7)}}function PlaceViewComponent_mat_card_3_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.TgZ(0,"mat-card",5),core.TgZ(1,"div",6),core.TgZ(2,"div",7),core._UZ(3,"img",8),core.qZA(),core.TgZ(4,"div",9),core.TgZ(5,"mat-card-content"),core.TgZ(6,"mat-tab-group"),core.TgZ(7,"mat-tab",10),core.TgZ(8,"mat-form-field",11),core._UZ(9,"input",12),core.TgZ(10,"mat-icon",13),core._uU(11,"check_circle_outline"),core.qZA(),core.qZA(),core.TgZ(12,"mat-form-field",11),core._UZ(13,"input",14),core.TgZ(14,"mat-icon",13),core._uU(15,"assignment_ind"),core.qZA(),core.qZA(),core.TgZ(16,"mat-form-field",11),core._UZ(17,"input",15),core.TgZ(18,"mat-icon",13),core._uU(19,"info"),core.qZA(),core.qZA(),core.TgZ(20,"div",16),core.TgZ(21,"span"),core._uU(22,"Tipo de lugar:"),core.qZA(),core.TgZ(23,"mat-chip-list",17),core.YNc(24,PlaceViewComponent_mat_card_3_mat_chip_24_Template,2,1,"mat-chip",18),core.qZA(),core.qZA(),core.qZA(),core.TgZ(25,"mat-tab",19),core.TgZ(26,"mat-form-field",11),core._UZ(27,"input",20),core.TgZ(28,"mat-icon",13),core._uU(29,"place"),core.qZA(),core.qZA(),core.TgZ(30,"mat-form-field",11),core._UZ(31,"input",21),core.TgZ(32,"mat-icon",13),core._uU(33,"manage_accounts"),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.TgZ(34,"mat-card-actions",22),core.TgZ(35,"button",23),core.NdJ("click",__name(function(){return core.CHM(_r9),core.oxw().gotoList()},"PlaceViewComponent_mat_card_3_Template_button_click_35_listener")),core.TgZ(36,"mat-icon"),core._uU(37,"list"),core.qZA(),core.qZA(),core.TgZ(38,"button",24),core.NdJ("click",__name(function(){return core.CHM(_r9),core.oxw().editItem()},"PlaceViewComponent_mat_card_3_Template_button_click_38_listener")),core.TgZ(39,"mat-icon"),core._uU(40,"edit"),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA()}if(2&rf){const place_r5=ctx.ngIf;core.xp6(3),core.Q6J("src",place_r5.image,core.LSH),core.xp6(6),core.Q6J("value",place_r5.active),core.xp6(4),core.Q6J("value",place_r5.name),core.xp6(4),core.Q6J("value",place_r5.description),core.xp6(7),core.Q6J("ngForOf",place_r5.types),core.xp6(3),core.Q6J("value",place_r5.locality),core.xp6(4),core.Q6J("value",place_r5.roleDefault)}}function PlaceViewComponent_ng_template_5_Template(rf,ctx){1&rf&&core._uU(0," No existe tal lugar\n")}__name(PlaceViewComponent_app_section_header_0_Template,"PlaceViewComponent_app_section_header_0_Template"),__name(PlaceViewComponent_mat_card_3_mat_chip_24_Template,"PlaceViewComponent_mat_card_3_mat_chip_24_Template"),__name(PlaceViewComponent_mat_card_3_Template,"PlaceViewComponent_mat_card_3_Template"),__name(PlaceViewComponent_ng_template_5_Template,"PlaceViewComponent_ng_template_5_Template");class PlaceViewComponent{constructor(route,router2,seo,logSrv,placeSrv){this.route=route,this.router=router2,this.seo=seo,this.logSrv=logSrv,this.placeSrv=placeSrv,this.place$=null}ngOnInit(){this.idPlace=this.route.snapshot.paramMap.get("id"),this.idPlace&&(this.logSrv.info(`id asked ${this.idPlace}`),this.getDetails(this.idPlace))}getDetails(idPlace){this.logSrv.info(`id asked ${idPlace}`),this.place$=this.placeSrv.getOnePlace(idPlace).pipe((0,tap.b)(place2=>this.seo.generateTags({title:`${place2.name} | Lugar de Rinc\xf3n de Soto`,description:place2.description,image:place2.image})))}gotoList(){this.router.navigate([`/${place.N.PATH_URL}`])}editItem(){this.router.navigate([`/${place.N.PATH_URL}/${this.idPlace}/editar`])}}__name(PlaceViewComponent,"PlaceViewComponent"),PlaceViewComponent.\u0275fac=__name(function(t){return new(t||PlaceViewComponent)(core.Y36(router.gz),core.Y36(router.F0),core.Y36(seo_service.v),core.Y36(log_service.$V),core.Y36(places_service.k))},"PlaceViewComponent_Factory"),PlaceViewComponent.\u0275cmp=core.Xpm({type:PlaceViewComponent,selectors:[["app-place-view"]],decls:7,vars:7,consts:[[3,"title",4,"ngIf"],[1,"section-wrapper"],["class","item-view",4,"ngIf","ngIfElse"],["noPlaceTemplate",""],[3,"title"],[1,"item-view"],[1,"row"],[1,"col-lg-3","col-md-4","col-12",2,"text-align","center"],[1,"img-thumbnail",3,"src"],[1,"col-lg-9","col-md-8","col-12"],["label","Datos de lugar",1,"tab-card-detail"],[1,"card-detail"],["matInput","","type","text","disabled","true","placeholder","Activo",3,"value"],["matSuffix",""],["matInput","","type","text","disabled","true","placeholder","Nombre",3,"value"],["matInput","","type","text","disabled","true","placeholder","Descripci\xf3n",3,"value"],[1,"card-chip-list"],["aria-label","Tipos"],[4,"ngFor","ngForOf"],["label","M\xe1s info",1,"tab-card-detail"],["matInput","","type","text","disabled","true","placeholder","Localidad",3,"value"],["matInput","","type","text","disabled","true","placeholder","Rol por defecto",3,"value"],[1,"buttons","buttons-center"],["mat-fab","",1,"btn-1",3,"click"],["mat-fab","",1,"btn-extra",3,"click"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,PlaceViewComponent_app_section_header_0_Template,1,1,"app-section-header",0),core.ALo(1,"async"),core.TgZ(2,"div",1),core.YNc(3,PlaceViewComponent_mat_card_3_Template,41,7,"mat-card",2),core.ALo(4,"async"),core.qZA(),core.YNc(5,PlaceViewComponent_ng_template_5_Template,1,0,"ng-template",null,3,core.W1O)),2&rf){const _r2=core.MAs(6);core.Q6J("ngIf",core.lcZ(1,3,ctx.place$)),core.xp6(3),core.Q6J("ngIf",core.lcZ(4,5,ctx.place$))("ngIfElse",_r2)}},"PlaceViewComponent_Template"),directives:[common.O5,section_header_component.I,card.a8,card.dn,tabs.SP,tabs.uX,form_field.KE,input.Nt,icon.Hw,form_field.R9,chips.qn,common.sg,card.hq,fesm2015_button.lW,chips.HS],pipes:[common.Ov],styles:[""]});var PlaceType,PlaceType2,fesm2015_forms=__webpack_require__(3679),finalize=__webpack_require__(68939);(PlaceType2=PlaceType||(PlaceType={})).Alojamiento="\u{1f6cf}\ufe0f ALOJAMIENTO",PlaceType2.Ayuntamiento="\u{1f3db}\ufe0f AYUNTAMIENTO",PlaceType2.Bar="\u{1f37a} BAR",PlaceType2.Biblioteca="\u{1f4da} BIBLIOTECA",PlaceType2.Cafeteria="\u2615 CAFETERIA",PlaceType2.Carretera="\u{1f6e3}\ufe0f CARRETERA",PlaceType2.CentroSalud="\u{1f3e5} CENTRO DE SALUD",PlaceType2.Cine="\u{1f3a6} CINE",PlaceType2.Colegio="\u{1f3eb} COLEGIO",PlaceType2.EspacioDeportivo="\u{1f3df}\ufe0f ESPACIO DEPORTIVO",PlaceType2.EspacioNatural="\u{1f3de}\ufe0f ESPACIO NATURAL",PlaceType2.EstacionTren="\u{1f689} ESTACI\xd3N DE TREN",PlaceType2.Fabrica="\u{1f3ed} FABRICA",PlaceType2.Iglesia="\u26ea IGLESIA",PlaceType2.Localidad="\u{1f3d8}\ufe0f LOCALIDAD",PlaceType2.OtroLugar="\u{1f4cd} LUGAR",PlaceType2.Pasteleria="\u{1f370} PASTELERIA",PlaceType2.ParadaBus="\u{1f68f} PARADA BUS",PlaceType2.Plaza="\u{1f3af} PLAZA",PlaceType2.Puente="\u{1f309} PUENTE",PlaceType2.Restaurante="\u{1f37d}\ufe0f RESTAURANTE",PlaceType2.Tienda="\u{1f6cd}\ufe0f TIENDA",PlaceType2.ViviendaPrivada="\u{1f3e0} VIVIENDA PRIVADA";const PLACE_TYPES=[PlaceType.Alojamiento,PlaceType.Ayuntamiento,PlaceType.Bar,PlaceType.Biblioteca,PlaceType.Cafeteria,PlaceType.CentroSalud,PlaceType.Carretera,PlaceType.Cine,PlaceType.Colegio,PlaceType.EspacioDeportivo,PlaceType.EspacioNatural,PlaceType.EstacionTren,PlaceType.Fabrica,PlaceType.Iglesia,PlaceType.Localidad,PlaceType.OtroLugar,PlaceType.ParadaBus,PlaceType.Plaza,PlaceType.Puente,PlaceType.Pasteleria,PlaceType.Restaurante,PlaceType.Tienda,PlaceType.ViviendaPrivada];var angular_fire_compat_storage=__webpack_require__(27525),slide_toggle=__webpack_require__(45396),fesm2015_select=__webpack_require__(67441),fesm2015_core=__webpack_require__(72458);function PlaceEditComponent_mat_card_2_mat_option_22_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-option",23),core._uU(1),core.qZA()),2&rf){const type_r6=ctx.$implicit;core.Q6J("value",type_r6),core.xp6(1),core.Oqu(type_r6)}}function PlaceEditComponent_mat_card_2_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.TgZ(0,"mat-card",5),core.TgZ(1,"div",6),core.TgZ(2,"div",7),core.TgZ(3,"img",8),core.NdJ("click",__name(function(){return core.CHM(_r8),core.MAs(5).click()},"PlaceEditComponent_mat_card_2_Template_img_click_3_listener")),core.qZA(),core.TgZ(4,"input",9,10),core.NdJ("change",__name(function($event){return core.CHM(_r8),core.oxw().uploadImage($event)},"PlaceEditComponent_mat_card_2_Template_input_change_4_listener")),core.qZA(),core._UZ(6,"hr"),core.TgZ(7,"span",11),core.NdJ("click",__name(function(){return core.CHM(_r8),core.MAs(5).click()},"PlaceEditComponent_mat_card_2_Template_span_click_7_listener")),core._uU(8,"Clica en la imagen para cambiar la foto"),core.qZA(),core.qZA(),core.TgZ(9,"div",12),core.TgZ(10,"form",13),core.NdJ("ngSubmit",__name(function(){return core.CHM(_r8),core.oxw().onSaveForm()},"PlaceEditComponent_mat_card_2_Template_form_ngSubmit_10_listener")),core.TgZ(11,"mat-card-content"),core.TgZ(12,"mat-slide-toggle",14),core._uU(13,"Lugar activo"),core.qZA(),core.TgZ(14,"mat-form-field",15),core.TgZ(15,"mat-label"),core._uU(16,"Nombre del lugar"),core.qZA(),core._UZ(17,"input",16),core.qZA(),core.TgZ(18,"mat-form-field",15),core.TgZ(19,"mat-label"),core._uU(20,"Tipo"),core.qZA(),core.TgZ(21,"mat-select",17),core.YNc(22,PlaceEditComponent_mat_card_2_mat_option_22_Template,2,2,"mat-option",18),core.qZA(),core.qZA(),core.TgZ(23,"mat-form-field",15),core.TgZ(24,"mat-label"),core._uU(25,"Localidad"),core.qZA(),core._UZ(26,"input",19),core.qZA(),core.qZA(),core.TgZ(27,"mat-card-actions",20),core.TgZ(28,"button",21),core.TgZ(29,"mat-icon"),core._uU(30,"check"),core.qZA(),core.qZA(),core.TgZ(31,"button",22),core.NdJ("click",__name(function(){return core.CHM(_r8),core.oxw().gotoList()},"PlaceEditComponent_mat_card_2_Template_button_click_31_listener")),core.TgZ(32,"mat-icon"),core._uU(33,"list"),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA()}if(2&rf){const ctx_r0=core.oxw();core.xp6(3),core.Q6J("src",ctx_r0.placeForm.get("image").value,core.LSH),core.xp6(7),core.Q6J("formGroup",ctx_r0.placeForm),core.xp6(12),core.Q6J("ngForOf",ctx_r0.TYPES),core.xp6(6),core.Q6J("title",ctx_r0.placeForm.valid?"Guardar con los datos introducidos":"Deshabilitado hasta que los datos sean v\xe1lidos")("disabled",!ctx_r0.placeForm.valid)}}function PlaceEditComponent_div_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",24),core._uU(1),core.qZA()),2&rf){const ctx_r1=core.oxw();core.xp6(1),core.hij(" ",ctx_r1.errorMessage," ")}}function PlaceEditComponent_ng_template_4_Template(rf,ctx){1&rf&&core._uU(0," No existe tal lugar\n")}__name(PlaceEditComponent_mat_card_2_mat_option_22_Template,"PlaceEditComponent_mat_card_2_mat_option_22_Template"),__name(PlaceEditComponent_mat_card_2_Template,"PlaceEditComponent_mat_card_2_Template"),__name(PlaceEditComponent_div_3_Template,"PlaceEditComponent_div_3_Template"),__name(PlaceEditComponent_ng_template_4_Template,"PlaceEditComponent_ng_template_4_Template");class PlaceEditComponent{constructor(afStorage,fb,route,router2,logSrv,placeSrv){this.afStorage=afStorage,this.fb=fb,this.route=route,this.router=router2,this.logSrv=logSrv,this.placeSrv=placeSrv,this.pageTitle="Creaci\xf3n de un nuevo lugar",this.errorMessage="",this.listOfObservers=[],this.TYPES=PLACE_TYPES}ngOnInit(){const idPlace=this.route.snapshot.paramMap.get("id");idPlace&&(this.logSrv.info(`id asked ${idPlace}`),this.getDetails(idPlace)),this.placeForm=this.fb.group({id:[{value:"0",disabled:!0}],active:!0,name:["",[fesm2015_forms.kI.required,fesm2015_forms.kI.minLength(3),fesm2015_forms.kI.maxLength(50)]],image:place.N.IMAGE_DEFAULT,types:[],locality:place.N.LOCALITY_DEFAULT})}getDetails(idPlace){if(this.logSrv.info(`id asked ${idPlace}`),"0"===idPlace)this.pageTitle="Creaci\xf3n de un nuevo lugar",this.place=place.N.InitDefault();else{const subs1$=this.placeSrv.getOnePlace(idPlace).subscribe({next:place2=>{this.place=place2,this.displayPlace(),this.logSrv.info(JSON.stringify(this.place))},error:err=>{this.errorMessage=`Error: ${err}`}});this.listOfObservers.push(subs1$)}}displayPlace(){var _a,_b;this.placeForm&&this.placeForm.reset(),"0"===this.place.id?this.pageTitle="Creando un nuevo lugar":this.pageTitle=`Editando el lugar ${this.place.name}`,this.placeForm.patchValue({id:this.place.id,active:this.place.active,name:this.place.name,image:null!==(_a=this.place.image)&&void 0!==_a?_a:place.N.IMAGE_DEFAULT,types:null!==(_b=this.place.types)&&void 0!==_b?_b:[],locality:this.place.locality}),this.placeForm.controls.id.setValue(this.place.id)}onResetForm(){this.placeForm.reset()}onSaveForm(){if(this.placeForm.valid){const placeItem=Object.assign(Object.assign({},this.place),this.placeForm.value);"0"===placeItem.id?this.placeSrv.addPlace(placeItem):this.placeSrv.updatePlace(placeItem),this.router.navigate([place.N.PATH_URL])}else this.errorMessage="Por favor, corrige los mensajes de validaci\xf3n."}onSaveComplete(){this.placeForm.reset(),sweetalert2_all_default().fire({icon:"success",title:"Datos guardados con \xe9xito",text:`Los datos de ${this.place.name} se han guardado correctamente`}),this.router.navigate([`/${place.N.PATH_URL}`])}gotoList(){this.placeForm.reset(),this.router.navigate([`/${place.N.PATH_URL}`])}uploadImage(event){const file=event.target.files[0],filePath=file.name,fileRef=this.afStorage.ref(filePath),task=this.afStorage.upload(filePath,file);this.uploadPercent=task.percentageChanges(),task.snapshotChanges().pipe((0,finalize.x)(()=>{fileRef.getDownloadURL().subscribe(imageUrl=>{this.place.image=imageUrl,this.placeForm.patchValue({image:this.place.image})})})).subscribe()}ngOnDestroy(){this.listOfObservers.forEach(sub=>sub.unsubscribe())}}__name(PlaceEditComponent,"PlaceEditComponent"),PlaceEditComponent.\u0275fac=__name(function(t){return new(t||PlaceEditComponent)(core.Y36(angular_fire_compat_storage.Q1),core.Y36(fesm2015_forms.qu),core.Y36(router.gz),core.Y36(router.F0),core.Y36(log_service.$V),core.Y36(places_service.k))},"PlaceEditComponent_Factory"),PlaceEditComponent.\u0275cmp=core.Xpm({type:PlaceEditComponent,selectors:[["app-place-edit"]],decls:6,vars:4,consts:[[3,"title"],[1,"section-wrapper"],["class","item-edit",4,"ngIf","ngIfElse"],["class","alert-danger",4,"ngIf"],["noPlaceTemplate",""],[1,"item-edit"],[1,"row"],[1,"col-lg-3","col-md-4","col-12",2,"text-align","center"],[1,"img-thumbnail",3,"src","click"],["hidden","","type","file",3,"change"],["inputImageProfile",""],[1,"small",3,"click"],[1,"col-lg-9","col-md-8","col-12"],[3,"formGroup","ngSubmit"],["formControlName","active",1,"mb-3","ml-2"],["appearance","outline"],["matInput","","type","text","formControlName","name","placeholder","Nombre"],["formControlName","types","multiple",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","locality","placeholder","Localidad"],[1,"buttons"],["mat-fab","","type","submit","color","primary",1,"btn-1",3,"title","disabled"],["mat-fab","",1,"btn-1",3,"click"],[3,"value"],[1,"alert-danger"]],template:__name(function(rf,ctx){if(1&rf&&(core._UZ(0,"app-section-header",0),core.TgZ(1,"div",1),core.YNc(2,PlaceEditComponent_mat_card_2_Template,34,5,"mat-card",2),core.YNc(3,PlaceEditComponent_div_3_Template,2,1,"div",3),core.qZA(),core.YNc(4,PlaceEditComponent_ng_template_4_Template,1,0,"ng-template",null,4,core.W1O)),2&rf){const _r2=core.MAs(5);core.Q6J("title",ctx.pageTitle),core.xp6(2),core.Q6J("ngIf",ctx.place)("ngIfElse",_r2),core.xp6(1),core.Q6J("ngIf",ctx.errorMessage)}},"PlaceEditComponent_Template"),directives:[section_header_component.I,common.O5,card.a8,fesm2015_forms._Y,fesm2015_forms.JL,fesm2015_forms.sg,card.dn,slide_toggle.Rr,fesm2015_forms.JJ,fesm2015_forms.u,form_field.KE,form_field.hX,input.Nt,fesm2015_forms.Fj,fesm2015_select.gD,common.sg,card.hq,fesm2015_button.lW,icon.Hw,fesm2015_core.ey],styles:["form[_ngcontent-%COMP%]{background-color:#fff;color:#000}"]});const routes=[{path:"",component:PlacesComponent},{path:":id",component:PlaceViewComponent},{path:":id/editar",component:PlaceEditComponent}];class PlacesRoutingModule{}__name(PlacesRoutingModule,"PlacesRoutingModule"),PlacesRoutingModule.\u0275fac=__name(function(t){return new(t||PlacesRoutingModule)},"PlacesRoutingModule_Factory"),PlacesRoutingModule.\u0275mod=core.oAB({type:PlacesRoutingModule}),PlacesRoutingModule.\u0275inj=core.cJS({imports:[[router.Bz.forChild(routes)],router.Bz]});var shared_module=__webpack_require__(55083);class PlacesModule{}__name(PlacesModule,"PlacesModule"),PlacesModule.\u0275fac=__name(function(t){return new(t||PlacesModule)},"PlacesModule_Factory"),PlacesModule.\u0275mod=core.oAB({type:PlacesModule}),PlacesModule.\u0275inj=core.cJS({imports:[[common.ez,shared_module.m,PlacesRoutingModule]]})}};