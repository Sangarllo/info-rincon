"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=347,exports.ids=[347],exports.modules={10179:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{UsersModule:()=>UsersModule});var shared_module=__webpack_require__(55083),router=__webpack_require__(8307),paginator=__webpack_require__(53962),sort=__webpack_require__(11494),table=__webpack_require__(32789),sweetalert2_all=__webpack_require__(88259),sweetalert2_all_default=__webpack_require__.n(sweetalert2_all),core=__webpack_require__(37716),log_service=__webpack_require__(22189),spinner_service=__webpack_require__(74649),users_service=__webpack_require__(89576),section_header_component=__webpack_require__(62305),form_field=__webpack_require__(98295),input=__webpack_require__(49983),icon=__webpack_require__(76627),fesm2015_button=__webpack_require__(51095),common=__webpack_require__(38583);function UsersComponent_th_16_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",30),core._uU(1,"Rol"),core.qZA())}function UsersComponent_td_17_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",31),core.TgZ(1,"div",32),core._uU(2),core.qZA(),core.qZA()),2&rf){const element_r18=ctx.$implicit;core.Tol(element_r18.role),core.xp6(2),core.Oqu(element_r18.role)}}function UsersComponent_th_19_Template(rf,ctx){1&rf&&core._UZ(0,"th",33)}function UsersComponent_td_20_Template(rf,ctx){if(1&rf){const _r21=core.EpF();core.TgZ(0,"td",34),core.TgZ(1,"img",35),core.NdJ("click",__name(function(){const element_r19=core.CHM(_r21).$implicit;return core.oxw().gotoUser(element_r19)},"UsersComponent_td_20_Template_img_click_1_listener")),core.qZA(),core.qZA()}if(2&rf){const element_r19=ctx.$implicit;core.xp6(1),core.Q6J("src",element_r19.photoURL,core.LSH)}}function UsersComponent_th_22_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",30),core._uU(1,"Uid."),core.qZA())}function UsersComponent_td_23_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",31),core._uU(1),core.qZA()),2&rf){const user_r22=ctx.$implicit;core.xp6(1),core.Oqu(user_r22.uid)}}function UsersComponent_th_25_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",36),core._uU(1,"Info del Usuario"),core.qZA())}function UsersComponent_td_26_Template(rf,ctx){if(1&rf){const _r25=core.EpF();core.TgZ(0,"td",37),core.NdJ("click",__name(function(){const item_r23=core.CHM(_r25).$implicit;return core.oxw().gotoUser(item_r23)},"UsersComponent_td_26_Template_td_click_0_listener")),core._UZ(1,"div",32),core.TgZ(2,"div",38),core._uU(3),core.qZA(),core._uU(4),core.qZA()}if(2&rf){const item_r23=ctx.$implicit;core.Tol(item_r23.role),core.xp6(3),core.hij(" ",item_r23.email," "),core.xp6(1),core.hij(" ",item_r23.displayName," ")}}function UsersComponent_th_28_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",39),core._uU(1,"Nombre"),core.qZA())}function UsersComponent_td_29_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",31),core._uU(1),core.qZA()),2&rf){const user_r26=ctx.$implicit;core.xp6(1),core.Oqu(user_r26.displayName)}}function UsersComponent_th_31_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",39),core._uU(1,"Email"),core.qZA())}function UsersComponent_td_32_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",31),core._uU(1),core.qZA()),2&rf){const user_r27=ctx.$implicit;core.xp6(1),core.Oqu(user_r27.email)}}function UsersComponent_th_34_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",40),core._uU(1,"Entidades Administradas"),core.qZA())}function UsersComponent_td_35_div_1_Template(rf,ctx){1&rf&&(core.TgZ(0,"div"),core.TgZ(1,"mat-icon"),core._uU(2,"grid_on"),core.qZA(),core._UZ(3,"br"),core.TgZ(4,"span"),core._uU(5,"todas"),core.qZA(),core.qZA())}function UsersComponent_td_35_div_2_img_1_Template(rf,ctx){if(1&rf&&core._UZ(0,"img",44),2&rf){const entity_r33=ctx.$implicit;core.Q6J("src",entity_r33.image,core.LSH)}}function UsersComponent_td_35_div_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div"),core.YNc(1,UsersComponent_td_35_div_2_img_1_Template,1,1,"img",43),core.qZA()),2&rf){const user_r28=core.oxw().$implicit;core.xp6(1),core.Q6J("ngForOf",user_r28.entitiesAdmin)}}function UsersComponent_td_35_div_3_Template(rf,ctx){1&rf&&(core.TgZ(0,"div"),core.TgZ(1,"mat-icon"),core._uU(2,"grid_off"),core.qZA(),core._UZ(3,"br"),core.TgZ(4,"span"),core._uU(5,"ninguna"),core.qZA(),core.qZA())}function UsersComponent_td_35_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",41),core.YNc(1,UsersComponent_td_35_div_1_Template,6,0,"div",42),core.YNc(2,UsersComponent_td_35_div_2_Template,2,1,"div",42),core.YNc(3,UsersComponent_td_35_div_3_Template,6,0,"div",42),core.qZA()),2&rf){const user_r28=ctx.$implicit;core.Q6J("ngClass",user_r28.role),core.xp6(1),core.Q6J("ngIf","SUPER"===user_r28.role||"ADMIN"===user_r28.role),core.xp6(1),core.Q6J("ngIf","AUTOR"===user_r28.role),core.xp6(1),core.Q6J("ngIf","LECTOR"===user_r28.role)}}function UsersComponent_th_37_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",30),core._uU(1,"Acciones"),core.qZA())}function UsersComponent_td_38_Template(rf,ctx){if(1&rf){const _r37=core.EpF();core.TgZ(0,"td",31),core.TgZ(1,"button",45),core.NdJ("click",__name(function(){const user_r35=core.CHM(_r37).$implicit;return core.oxw().gotoUser(user_r35)},"UsersComponent_td_38_Template_button_click_1_listener")),core.TgZ(2,"mat-icon",46),core._uU(3," remove_red_eye "),core.qZA(),core.qZA(),core.TgZ(4,"button",47),core.NdJ("click",__name(function(){const user_r35=core.CHM(_r37).$implicit;return core.oxw().gotoItemAdmin(user_r35)},"UsersComponent_td_38_Template_button_click_4_listener")),core.TgZ(5,"mat-icon",48),core._uU(6," build_circle "),core.qZA(),core.qZA(),core.TgZ(7,"button",49),core.NdJ("click",__name(function(){const user_r35=core.CHM(_r37).$implicit;return core.oxw().deleteUser(user_r35)},"UsersComponent_td_38_Template_button_click_7_listener")),core.TgZ(8,"mat-icon",50),core._uU(9," delete "),core.qZA(),core.qZA(),core.qZA()}}function UsersComponent_tr_39_Template(rf,ctx){1&rf&&core._UZ(0,"tr",51)}function UsersComponent_tr_40_Template(rf,ctx){1&rf&&core._UZ(0,"tr",52)}__name(UsersComponent_th_16_Template,"UsersComponent_th_16_Template"),__name(UsersComponent_td_17_Template,"UsersComponent_td_17_Template"),__name(UsersComponent_th_19_Template,"UsersComponent_th_19_Template"),__name(UsersComponent_td_20_Template,"UsersComponent_td_20_Template"),__name(UsersComponent_th_22_Template,"UsersComponent_th_22_Template"),__name(UsersComponent_td_23_Template,"UsersComponent_td_23_Template"),__name(UsersComponent_th_25_Template,"UsersComponent_th_25_Template"),__name(UsersComponent_td_26_Template,"UsersComponent_td_26_Template"),__name(UsersComponent_th_28_Template,"UsersComponent_th_28_Template"),__name(UsersComponent_td_29_Template,"UsersComponent_td_29_Template"),__name(UsersComponent_th_31_Template,"UsersComponent_th_31_Template"),__name(UsersComponent_td_32_Template,"UsersComponent_td_32_Template"),__name(UsersComponent_th_34_Template,"UsersComponent_th_34_Template"),__name(UsersComponent_td_35_div_1_Template,"UsersComponent_td_35_div_1_Template"),__name(UsersComponent_td_35_div_2_img_1_Template,"UsersComponent_td_35_div_2_img_1_Template"),__name(UsersComponent_td_35_div_2_Template,"UsersComponent_td_35_div_2_Template"),__name(UsersComponent_td_35_div_3_Template,"UsersComponent_td_35_div_3_Template"),__name(UsersComponent_td_35_Template,"UsersComponent_td_35_Template"),__name(UsersComponent_th_37_Template,"UsersComponent_th_37_Template"),__name(UsersComponent_td_38_Template,"UsersComponent_td_38_Template"),__name(UsersComponent_tr_39_Template,"UsersComponent_tr_39_Template"),__name(UsersComponent_tr_40_Template,"UsersComponent_tr_40_Template");const _c0=__name(function(){return[5,10,25,100]},"_c0");class UsersComponent{constructor(router2,logSrv,spinnerSvc,userSrv){this.router=router2,this.logSrv=logSrv,this.spinnerSvc=spinnerSvc,this.userSrv=userSrv,this.listOfObservers=[],this.loading=!0,this.dataSource=new table.by,this.displayedColumns=["role","uid","photoURL","collapsed-info","displayName","email","entities","actions3"],this.spinnerSvc.show()}ngOnInit(){const subs1$=this.userSrv.getAllUsers().subscribe(users=>{this.users=users,this.dataSource=new table.by(this.users),this.spinnerSvc.hide(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort});this.listOfObservers.push(subs1$)}applyFilter(filterValue){this.dataSource.filter=filterValue.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}gotoUser(user){this.router.navigate([`usuarios/${user.uid}`])}gotoItemAdmin(user){this.router.navigate([`usuarios/${user.uid}/editar`])}deleteUser(user){this.logSrv.info(`deleting ${user.uid}`),sweetalert2_all_default().fire({title:"\xbfEst\xe1s seguro?",text:"No podr\xe1s deshacer esta acci\xf3n de borrado!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1S\xed, b\xf3rralo!"}).then(result=>{result.isConfirmed&&(this.userSrv.deleteUser(user),sweetalert2_all_default().fire("\xa1Borrado!",`${user.displayName} ha sido borrado`,"success"))})}addItem(){this.router.navigate(["usuarios/0/editar"])}ngOnDestroy(){this.listOfObservers.forEach(sub=>sub.unsubscribe())}}__name(UsersComponent,"UsersComponent"),UsersComponent.\u0275fac=__name(function(t){return new(t||UsersComponent)(core.Y36(router.F0),core.Y36(log_service.$V),core.Y36(spinner_service.V),core.Y36(users_service.K))},"UsersComponent_Factory"),UsersComponent.\u0275cmp=core.Xpm({type:UsersComponent,selectors:[["app-users"]],viewQuery:__name(function(rf,ctx){if(1&rf&&(core.Gf(paginator.NW,5),core.Gf(sort.YE,5)),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.paginator=_t.first),core.iGM(_t=core.CRH())&&(ctx.sort=_t.first)}},"UsersComponent_Query"),decls:42,vars:7,consts:[[3,"title"],[1,"section-wrapper"],[1,"section-list-options"],["matInput","","placeholder","Filtrar",3,"keyup"],["matSuffix",""],[1,"buttons"],["mat-mini-fab","",1,"btn-1",3,"click"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","role"],["mat-header-cell","","class","td-extra-lg",4,"matHeaderCellDef"],["class","td-extra-lg","mat-cell","",3,"class",4,"matCellDef"],["matColumnDef","photoURL"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","uid"],["mat-cell","","class","td-extra-lg",4,"matCellDef"],["matColumnDef","collapsed-info"],["mat-header-cell","","class","td-collapsed-info","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","td-collapsed-info",3,"class","click",4,"matCellDef"],["matColumnDef","displayName"],["mat-header-cell","","class","td-extra-lg","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","email"],["matColumnDef","entities"],["mat-header-cell","","class","td-extra-md","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","td-extra-md",3,"ngClass",4,"matCellDef"],["matColumnDef","actions3"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["mat-header-cell","",1,"td-extra-lg"],["mat-cell","",1,"td-extra-lg"],[1,"inside"],["mat-header-cell",""],["mat-cell",""],["alt","element.displayName",1,"img-thumbnail",3,"src","click"],["mat-header-cell","","mat-sort-header","",1,"td-collapsed-info"],["mat-cell","",1,"td-collapsed-info",3,"click"],[2,"font-size","smaller","color","gray"],["mat-header-cell","","mat-sort-header","",1,"td-extra-lg"],["mat-header-cell","","mat-sort-header","",1,"td-extra-md"],["mat-cell","",1,"td-extra-md",3,"ngClass"],[4,"ngIf"],["class","img-thumbnail","alt","entity.name",3,"src",4,"ngFor","ngForOf"],["alt","entity.name",1,"img-thumbnail",3,"src"],["mat-icon-button","","matTooltip","Click to View",1,"iconbutton",3,"click"],["aria-label","View",1,"btn-1"],["mat-icon-button","","matTooltip","Click to Edit",1,"iconbutton",3,"click"],["aria-label","Edit",1,"btn-1"],["mat-icon-button","","matTooltip","Click to Delete",1,"iconbutton",3,"click"],["aria-label","Delete",1,"btn-1"],["mat-header-row",""],["mat-row",""]],template:__name(function(rf,ctx){1&rf&&(core._UZ(0,"app-section-header",0),core.TgZ(1,"div",1),core.TgZ(2,"div",2),core.TgZ(3,"mat-form-field"),core.TgZ(4,"mat-label"),core._uU(5,"Filtro"),core.qZA(),core.TgZ(6,"input",3),core.NdJ("keyup",__name(function($event){return ctx.applyFilter($event.target.value)},"UsersComponent_Template_input_keyup_6_listener")),core.qZA(),core.TgZ(7,"mat-icon",4),core._uU(8,"search"),core.qZA(),core.qZA(),core.TgZ(9,"div",5),core.TgZ(10,"button",6),core.NdJ("click",__name(function(){return ctx.addItem()},"UsersComponent_Template_button_click_10_listener")),core.TgZ(11,"mat-icon"),core._uU(12,"add"),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.TgZ(13,"div",7),core.TgZ(14,"table",8),core.ynx(15,9),core.YNc(16,UsersComponent_th_16_Template,2,0,"th",10),core.YNc(17,UsersComponent_td_17_Template,3,3,"td",11),core.BQk(),core.ynx(18,12),core.YNc(19,UsersComponent_th_19_Template,1,0,"th",13),core.YNc(20,UsersComponent_td_20_Template,2,1,"td",14),core.BQk(),core.ynx(21,15),core.YNc(22,UsersComponent_th_22_Template,2,0,"th",10),core.YNc(23,UsersComponent_td_23_Template,2,1,"td",16),core.BQk(),core.ynx(24,17),core.YNc(25,UsersComponent_th_25_Template,2,0,"th",18),core.YNc(26,UsersComponent_td_26_Template,5,4,"td",19),core.BQk(),core.ynx(27,20),core.YNc(28,UsersComponent_th_28_Template,2,0,"th",21),core.YNc(29,UsersComponent_td_29_Template,2,1,"td",16),core.BQk(),core.ynx(30,22),core.YNc(31,UsersComponent_th_31_Template,2,0,"th",21),core.YNc(32,UsersComponent_td_32_Template,2,1,"td",16),core.BQk(),core.ynx(33,23),core.YNc(34,UsersComponent_th_34_Template,2,0,"th",24),core.YNc(35,UsersComponent_td_35_Template,4,4,"td",25),core.BQk(),core.ynx(36,26),core.YNc(37,UsersComponent_th_37_Template,2,0,"th",10),core.YNc(38,UsersComponent_td_38_Template,10,0,"td",16),core.BQk(),core.YNc(39,UsersComponent_tr_39_Template,1,0,"tr",27),core.YNc(40,UsersComponent_tr_40_Template,1,0,"tr",28),core.qZA(),core._UZ(41,"mat-paginator",29),core.qZA(),core.qZA()),2&rf&&(core.Q6J("title","Panel de Configuraci\xf3n de Usuarios"),core.xp6(14),core.Q6J("dataSource",ctx.dataSource),core.xp6(25),core.Q6J("matHeaderRowDef",ctx.displayedColumns),core.xp6(1),core.Q6J("matRowDefColumns",ctx.displayedColumns),core.xp6(1),core.Q6J("pageSizeOptions",core.DdM(6,_c0))("pageSize",10))},"UsersComponent_Template"),directives:[section_header_component.I,form_field.KE,form_field.hX,input.Nt,icon.Hw,form_field.R9,fesm2015_button.lW,table.BZ,sort.YE,table.w1,table.fO,table.Dz,table.as,table.nj,paginator.NW,table.ge,table.ev,sort.nU,common.mk,common.O5,common.sg,table.XQ,table.Gk],styles:[""]});var user_role_enum=__webpack_require__(95931);class User{constructor(uid,active,email,emailVerified,displayName,password,photoURL,role,lastLogin,favEvents,entitiesAdmin,entityDefault){this.uid=uid,this.active=active,this.email=email,this.emailVerified=emailVerified,this.displayName=displayName,this.password=password,this.photoURL=photoURL,this.role=role,this.lastLogin=lastLogin,this.favEvents=favEvents,this.entitiesAdmin=entitiesAdmin,this.entityDefault=entityDefault}static InitDefault(){return new User("0",!0,"",!1,"","",User.IMAGE_DEFAULT,user_role_enum.i.Lector,"",[])}}__name(User,"User"),User.IMAGE_DEFAULT="assets/images/users/default.png",User.PATH_URL="usuarios",User.ROLES=user_role_enum.p;var base=__webpack_require__(61160),audit_service=__webpack_require__(18342),card=__webpack_require__(93738),tabs=__webpack_require__(65939),role_directive=__webpack_require__(80283),base_items_table_component=__webpack_require__(25268),progress_spinner=__webpack_require__(4885);function UserViewComponent_app_section_header_0_Template(rf,ctx){if(1&rf&&core._UZ(0,"app-section-header",4),2&rf){const user_r4=ctx.ngIf;core.Q6J("title","Detalles del usuario "+user_r4.displayName)}}function UserViewComponent_mat_card_3_div_32_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",24),core._uU(1," Actualmente, al tener "),core.TgZ(2,"strong"),core._uU(3),core.qZA(),core._uU(4," puede administrar cualquier entidad "),core.qZA()),2&rf){const user_r5=core.oxw().ngIf;core.xp6(3),core.hij("ROL ",user_r5.role,"")}}function UserViewComponent_mat_card_3_div_33_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",25),core._uU(1," Actualmente, al tener "),core.TgZ(2,"strong"),core._uU(3),core.qZA(),core._uU(4," no puede administrar ninguna entidad "),core.qZA()),2&rf){const user_r5=core.oxw().ngIf;core.xp6(3),core.hij("ROL ",user_r5.role,"")}}function UserViewComponent_mat_card_3_div_34_h3_1_Template(rf,ctx){1&rf&&(core.TgZ(0,"h3"),core._uU(1,"De tener ROL AUTOR, podr\xeda administrar:"),core.qZA())}__name(UserViewComponent_app_section_header_0_Template,"UserViewComponent_app_section_header_0_Template"),__name(UserViewComponent_mat_card_3_div_32_Template,"UserViewComponent_mat_card_3_div_32_Template"),__name(UserViewComponent_mat_card_3_div_33_Template,"UserViewComponent_mat_card_3_div_33_Template"),__name(UserViewComponent_mat_card_3_div_34_h3_1_Template,"UserViewComponent_mat_card_3_div_34_h3_1_Template");const user_view_component_c0=__name(function(){return["ADMIN","SUPER"]},"user_view_component_c0");function UserViewComponent_mat_card_3_div_34_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div"),core.YNc(1,UserViewComponent_mat_card_3_div_34_h3_1_Template,2,0,"h3",26),core._UZ(2,"sh-base-items-table",27),core.qZA()),2&rf){const user_r5=core.oxw().ngIf,ctx_r8=core.oxw();core.xp6(1),core.Q6J("appRole",core.DdM(4,user_view_component_c0)),core.xp6(1),core.Q6J("baseItems",user_r5.entitiesAdmin)("baseType",ctx_r8.baseTypeEntity)("modeAdmin",!1)}}function UserViewComponent_mat_card_3_mat_tab_35_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-tab",28),core._UZ(1,"sh-base-items-table",27),core.qZA()),2&rf){const ctx_r9=core.oxw(2);core.xp6(1),core.Q6J("baseItems",ctx_r9.auditItems)("baseType",ctx_r9.baseTypeAudit)("modeAdmin",!1)}}__name(UserViewComponent_mat_card_3_div_34_Template,"UserViewComponent_mat_card_3_div_34_Template"),__name(UserViewComponent_mat_card_3_mat_tab_35_Template,"UserViewComponent_mat_card_3_mat_tab_35_Template");const _c1=__name(function(){return["LECTOR"]},"_c1");function UserViewComponent_mat_card_3_Template(rf,ctx){if(1&rf){const _r15=core.EpF();core.TgZ(0,"mat-card"),core.TgZ(1,"div",5),core.TgZ(2,"div",6),core._UZ(3,"img",7),core.qZA(),core.TgZ(4,"div",8),core.TgZ(5,"mat-card-content"),core.TgZ(6,"mat-tab-group"),core.TgZ(7,"mat-tab",9),core.TgZ(8,"mat-form-field",10),core._UZ(9,"input",11),core.TgZ(10,"mat-icon",12),core._uU(11,"assignment_ind"),core.qZA(),core.qZA(),core.TgZ(12,"mat-form-field",10),core._UZ(13,"input",13),core.TgZ(14,"mat-icon",12),core._uU(15,"email"),core.qZA(),core.qZA(),core.TgZ(16,"mat-form-field",10),core._UZ(17,"input",14),core.TgZ(18,"mat-icon",12),core._uU(19,"check_circle_outline"),core.qZA(),core.qZA(),core.TgZ(20,"mat-form-field",10),core._UZ(21,"input",15),core.TgZ(22,"mat-icon",12),core._uU(23,"admin_panel_settings"),core.qZA(),core.qZA(),core.qZA(),core.TgZ(24,"mat-tab",16),core.TgZ(25,"mat-form-field",10),core._UZ(26,"input",15),core.TgZ(27,"mat-icon",12),core._uU(28,"admin_panel_settings"),core.qZA(),core.qZA(),core._UZ(29,"br"),core.TgZ(30,"h3"),core._uU(31,"TODO: El rol a controlar es del usuario mostrado, no del logueado "),core.qZA(),core.YNc(32,UserViewComponent_mat_card_3_div_32_Template,5,1,"div",17),core.YNc(33,UserViewComponent_mat_card_3_div_33_Template,5,1,"div",18),core.YNc(34,UserViewComponent_mat_card_3_div_34_Template,3,5,"div",19),core.qZA(),core.YNc(35,UserViewComponent_mat_card_3_mat_tab_35_Template,2,3,"mat-tab",20),core.qZA(),core.qZA(),core.TgZ(36,"mat-card-actions",21),core.TgZ(37,"button",22),core.NdJ("click",__name(function(){return core.CHM(_r15),core.oxw().gotoList()},"UserViewComponent_mat_card_3_Template_button_click_37_listener")),core.TgZ(38,"mat-icon"),core._uU(39,"list"),core.qZA(),core.qZA(),core.TgZ(40,"button",23),core.NdJ("click",__name(function(){return core.CHM(_r15),core.oxw().editItem()},"UserViewComponent_mat_card_3_Template_button_click_40_listener")),core.TgZ(41,"mat-icon"),core._uU(42,"edit"),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA()}if(2&rf){const user_r5=ctx.ngIf,ctx_r1=core.oxw();core.xp6(3),core.Q6J("src",user_r5.photoURL,core.LSH),core.xp6(6),core.Q6J("value",user_r5.displayName),core.xp6(4),core.Q6J("value",user_r5.email),core.xp6(4),core.Q6J("value",user_r5.emailVerified?"SI":"NO"),core.xp6(4),core.Q6J("value",user_r5.role),core.xp6(5),core.Q6J("value",user_r5.role),core.xp6(6),core.Q6J("appRole",core.DdM(10,user_view_component_c0)),core.xp6(1),core.Q6J("appRole",core.DdM(11,_c1)),core.xp6(1),core.Q6J("ngIf",user_r5.entitiesAdmin),core.xp6(1),core.Q6J("ngIf",ctx_r1.auditItems.length>0)}}function UserViewComponent_ng_template_5_Template(rf,ctx){1&rf&&core._UZ(0,"mat-spinner")}__name(UserViewComponent_mat_card_3_Template,"UserViewComponent_mat_card_3_Template"),__name(UserViewComponent_ng_template_5_Template,"UserViewComponent_ng_template_5_Template");class UserViewComponent{constructor(route,router2,logSrv,auditSrv,userSrv){this.route=route,this.router=router2,this.logSrv=logSrv,this.auditSrv=auditSrv,this.userSrv=userSrv,this.listOfObservers=[],this.user$=null,this.auditItems=[],this.baseTypeEntity=base.r.ENTITY,this.baseTypeAudit=base.r.AUDIT}ngOnInit(){this.uidUser=this.route.snapshot.paramMap.get("uid"),this.uidUser&&(this.logSrv.info(`uid asked ${this.uidUser}`),this.getDetails(this.uidUser),this.getAudit(this.uidUser))}getDetails(uidUser){this.logSrv.info(`uid asked ${uidUser}`),this.user$=this.userSrv.getOneUser(uidUser)}getAudit(uidUser){const subs1$=this.auditSrv.getAllAuditItemsByUser(uidUser).subscribe(auditItems=>{this.auditItems=auditItems});this.listOfObservers.push(subs1$)}gotoList(){this.router.navigate([`/${User.PATH_URL}`])}editItem(){this.router.navigate([`/${User.PATH_URL}/${this.uidUser}/editar`])}ngOnDestroy(){this.listOfObservers.forEach(sub=>sub.unsubscribe())}}__name(UserViewComponent,"UserViewComponent"),UserViewComponent.\u0275fac=__name(function(t){return new(t||UserViewComponent)(core.Y36(router.gz),core.Y36(router.F0),core.Y36(log_service.$V),core.Y36(audit_service.C),core.Y36(users_service.K))},"UserViewComponent_Factory"),UserViewComponent.\u0275cmp=core.Xpm({type:UserViewComponent,selectors:[["app-user-view"]],decls:7,vars:7,consts:[[3,"title",4,"ngIf"],[1,"section-wrapper"],[4,"ngIf","ngIfElse"],["noUserTemplate",""],[3,"title"],[1,"row"],[1,"col-lg-3","col-md-4","col-12",2,"text-align","center"],[1,"img-thumbnail",3,"src"],[1,"col-lg-9","col-md-8","col-12"],["label","Datos Personales",1,"tab-card-detail"],[1,"card-detail"],["matInput","","type","text","disabled","true","placeholder","Nombre Completo",3,"value"],["matSuffix",""],["matInput","","type","text","disabled","true","placeholder","Email",3,"value"],["matInput","","type","text","disabled","true","placeholder","Email verificado ",3,"value"],["matInput","","type","text","disabled","true","placeholder","Rol",3,"value"],["label","Entidades Asociadas"],["class","alert alert-success","role","alert",4,"appRole"],["class","alert alert-danger","role","alert",4,"appRole"],[4,"ngIf"],["label","Auditor\xeda de accesos",4,"ngIf"],[1,"buttons","buttons-center"],["mat-fab","",1,"btn-1",3,"click"],["mat-fab","",1,"btn-extra",3,"click"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"],[4,"appRole"],[3,"baseItems","baseType","modeAdmin"],["label","Auditor\xeda de accesos"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,UserViewComponent_app_section_header_0_Template,1,1,"app-section-header",0),core.ALo(1,"async"),core.TgZ(2,"div",1),core.YNc(3,UserViewComponent_mat_card_3_Template,43,12,"mat-card",2),core.ALo(4,"async"),core.qZA(),core.YNc(5,UserViewComponent_ng_template_5_Template,1,0,"ng-template",null,3,core.W1O)),2&rf){const _r2=core.MAs(6);core.Q6J("ngIf",core.lcZ(1,3,ctx.user$)),core.xp6(3),core.Q6J("ngIf",core.lcZ(4,5,ctx.user$))("ngIfElse",_r2)}},"UserViewComponent_Template"),directives:[common.O5,section_header_component.I,card.a8,card.dn,tabs.SP,tabs.uX,form_field.KE,input.Nt,icon.Hw,form_field.R9,role_directive.g,card.hq,fesm2015_button.lW,base_items_table_component.V,progress_spinner.$g],pipes:[common.Ov],styles:[""]});var fesm2015_forms=__webpack_require__(3679),finalize=__webpack_require__(68939);const AVATARES=[{path:"assets/images/avatar/000-no-picture.png",name:"No hay foto"},{path:"assets/images/avatar/001-man.png",name:"Hombre 0"},{path:"assets/images/avatar/002-girl.png",name:"Chica 0"},{path:"assets/images/avatar/003-boy.png",name:"Chico 0"},{path:"assets/images/avatar/004-woman.png",name:"Mujer 0"},{path:"assets/images/avatar/005-man-1.png",name:"Hombre 1"},{path:"assets/images/avatar/006-woman-1.png",name:"Mujer 1"},{path:"assets/images/avatar/007-boy-1.png",name:"Chico 1"},{path:"assets/images/avatar/008-clown.png",name:"Payaso"},{path:"assets/images/avatar/009-firefighter.png",name:"Bombero"},{path:"assets/images/avatar/010-girl-1.png",name:"Chica 1"},{path:"assets/images/avatar/011-man-2.png",name:"Hombre 2"},{path:"assets/images/avatar/012-woman-2.png",name:"Mujer 2"},{path:"assets/images/avatar/013-woman-3.png",name:"Mujer 3"},{path:"assets/images/avatar/014-man-3.png",name:"Hombre 3"},{path:"assets/images/avatar/015-woman-4.png",name:"Mujer 4"},{path:"assets/images/avatar/016-boy-2.png",name:"Chico 2"},{path:"assets/images/avatar/017-girl-2.png",name:"Chica 2"},{path:"assets/images/avatar/018-boy-3.png",name:"Chico 3"},{path:"assets/images/avatar/019-woman-5.png",name:"Mujer 5"},{path:"assets/images/avatar/020-man-4.png",name:"Hombre 4"},{path:"assets/images/avatar/021-girl-3.png",name:"Chica 3"},{path:"assets/images/avatar/022-man-5.png",name:"Hombre 5"},{path:"assets/images/avatar/023-man-6.png",name:"Hombre 6"},{path:"assets/images/avatar/024-woman-6.png",name:"Mujer 6"},{path:"assets/images/avatar/025-boy-4.png",name:"chico 4"},{path:"assets/images/avatar/026-girl-4.png",name:"Chica 4"},{path:"assets/images/avatar/027-man-7.png",name:"Hombre 7"},{path:"assets/images/avatar/028-woman-7.png",name:"Mujer 7"},{path:"assets/images/avatar/029-man-8.png",name:"Hombre 8"},{path:"assets/images/avatar/030-policewoman.png",name:"Mujer Polic\xeda"},{path:"assets/images/avatar/031-policeman.png",name:"Mujer Polic\xeda"},{path:"assets/images/avatar/032-girl-5.png",name:"Chica 5"},{path:"assets/images/avatar/033-superhero.png",name:"Super H\xe9roe"},{path:"assets/images/avatar/034-woman-8.png",name:"Mujer Polic\xeda"},{path:"assets/images/avatar/035-woman-9.png",name:"Mujer 9"},{path:"assets/images/avatar/036-man-9.png",name:"Hombre 9"},{path:"assets/images/avatar/037-arab-woman.png",name:"Musulmana"},{path:"assets/images/avatar/038-man-10.png",name:"Hombre 10"},{path:"assets/images/avatar/039-woman-10.png",name:"Mujer 10"},{path:"assets/images/avatar/040-man-11.png",name:"Hombre 11"},{path:"assets/images/avatar/041-woman-11.png",name:"Mujer 11"},{path:"assets/images/avatar/042-vampire.png",name:"Vampiro"},{path:"assets/images/avatar/043-chef.png",name:"Cocinero"},{path:"assets/images/avatar/044-farmer.png",name:"Hombre Chino"},{path:"assets/images/avatar/045-man-12.png",name:"Hombre 12"},{path:"assets/images/avatar/046-woman-12.png",name:"Mujer 12"},{path:"assets/images/avatar/047-man-13.png",name:"Hombre 13"},{path:"assets/images/avatar/048-boy-5.png",name:"Chico 5"},{path:"assets/images/avatar/049-thief.png",name:"Ladr\xf3n"},{path:"assets/images/avatar/050-catwoman.png",name:"CatWoman"},{path:"assets/images/avatar/051-american-football-player.png",name:"Jugador F\xfatbol"},{path:"assets/images/avatar/052-witch.png",name:"Bruja"},{path:"assets/images/avatar/053-concierge.png",name:"Botones"},{path:"assets/images/avatar/054-woman-13.png",name:"Mujer 13"},{path:"assets/images/avatar/055-bodybuilder.png",name:"Musculado"},{path:"assets/images/avatar/056-girl-6.png",name:"Chica 6"},{path:"assets/images/avatar/057-woman-14.png",name:"Mujer 14"},{path:"assets/images/avatar/058-death.png",name:"Zombi"},{path:"assets/images/avatar/059-doctor.png",name:"Doctor 0"},{path:"assets/images/avatar/060-doctor-1.png",name:"Doctor 1"},{path:"assets/images/avatar/061-nun.png",name:"Monja"},{path:"assets/images/avatar/062-builder.png",name:"Constructor"},{path:"assets/images/avatar/063-girl-7.png",name:"Chica 7"},{path:"assets/images/avatar/064-punk.png",name:"Punk"},{path:"assets/images/avatar/065-pinup.png",name:"Pineup"},{path:"assets/images/avatar/066-boy-6.png",name:"Chico 6"},{path:"assets/images/avatar/067-man-14.png",name:"Hombre 14"},{path:"assets/images/avatar/068-girl-8.png",name:"Chica 8"},{path:"assets/images/avatar/069-woman-15.png",name:"Mujer 15"},{path:"assets/images/avatar/070-man-15.png",name:"Hombre 15"}];class Avatar{constructor(path,name){this.path=path,this.name=name}static getDefault(){return{path:"assets/images/avatar/001-man.png",name:"man-01"}}static getAvatares(){return AVATARES}static getRandom(){const index=Math.floor(Math.random()*AVATARES.length);return AVATARES[index]}}__name(Avatar,"Avatar");var angular_fire_compat_storage=__webpack_require__(27525),fesm2015_select=__webpack_require__(67441),fesm2015_core=__webpack_require__(72458),slide_toggle=__webpack_require__(45396);function UserEditComponent_mat_card_2_mat_option_14_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-option",25),core._uU(1),core.qZA()),2&rf){const avatar_r8=ctx.$implicit;core.Q6J("value",avatar_r8.path),core.xp6(1),core.hij(" ",avatar_r8.name," ")}}function UserEditComponent_mat_card_2_mat_slide_toggle_17_Template(rf,ctx){1&rf&&(core.TgZ(0,"mat-slide-toggle",26),core._uU(1,"Usuario activo "),core.qZA())}function UserEditComponent_mat_card_2_mat_option_30_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-option",25),core._uU(1),core.qZA()),2&rf){const rol_r9=ctx.$implicit;core.Q6J("value",rol_r9),core.xp6(1),core.hij(" ",rol_r9," ")}}__name(UserEditComponent_mat_card_2_mat_option_14_Template,"UserEditComponent_mat_card_2_mat_option_14_Template"),__name(UserEditComponent_mat_card_2_mat_slide_toggle_17_Template,"UserEditComponent_mat_card_2_mat_slide_toggle_17_Template"),__name(UserEditComponent_mat_card_2_mat_option_30_Template,"UserEditComponent_mat_card_2_mat_option_30_Template");const user_edit_component_c0=__name(function(){return["ADMIN","SUPER"]},"user_edit_component_c0");function UserEditComponent_mat_card_2_Template(rf,ctx){if(1&rf){const _r11=core.EpF();core.TgZ(0,"mat-card",5),core.TgZ(1,"form",6),core.NdJ("ngSubmit",__name(function(){return core.CHM(_r11),core.oxw().onSaveForm()},"UserEditComponent_mat_card_2_Template_form_ngSubmit_1_listener")),core.TgZ(2,"div",7),core.TgZ(3,"div",8),core.TgZ(4,"img",9),core.NdJ("click",__name(function(){return core.CHM(_r11),core.MAs(6).click()},"UserEditComponent_mat_card_2_Template_img_click_4_listener")),core.qZA(),core.TgZ(5,"input",10,11),core.NdJ("change",__name(function($event){return core.CHM(_r11),core.oxw().uploadImage($event)},"UserEditComponent_mat_card_2_Template_input_change_5_listener")),core.qZA(),core._UZ(7,"hr"),core.TgZ(8,"span",12),core.NdJ("click",__name(function(){return core.CHM(_r11),core.MAs(6).click()},"UserEditComponent_mat_card_2_Template_span_click_8_listener")),core._uU(9,"Clica en la imagen para cambiar la foto"),core.qZA(),core.TgZ(10,"mat-form-field",13),core.TgZ(11,"mat-label"),core._uU(12,"Avatar"),core.qZA(),core.TgZ(13,"mat-select",14),core.YNc(14,UserEditComponent_mat_card_2_mat_option_14_Template,2,2,"mat-option",15),core.qZA(),core.qZA(),core.qZA(),core.TgZ(15,"div",16),core.TgZ(16,"mat-card-content"),core.YNc(17,UserEditComponent_mat_card_2_mat_slide_toggle_17_Template,2,0,"mat-slide-toggle",17),core.TgZ(18,"mat-form-field",18),core.TgZ(19,"mat-label"),core._uU(20,"Nombre del usuario"),core.qZA(),core._UZ(21,"input",19),core.qZA(),core.TgZ(22,"mat-form-field",18),core.TgZ(23,"mat-label"),core._uU(24,"Email del usuario"),core.qZA(),core._UZ(25,"input",20),core.qZA(),core.TgZ(26,"mat-form-field",18),core.TgZ(27,"mat-label"),core._uU(28,"Rol del usuario"),core.qZA(),core.TgZ(29,"mat-select",21),core.YNc(30,UserEditComponent_mat_card_2_mat_option_30_Template,2,2,"mat-option",15),core.qZA(),core.TgZ(31,"mat-hint"),core._uU(32,"Roles posibles LECTOR..."),core.qZA(),core.qZA(),core.qZA(),core.TgZ(33,"mat-card-actions",22),core.TgZ(34,"button",23),core.TgZ(35,"mat-icon"),core._uU(36,"check"),core.qZA(),core.qZA(),core.TgZ(37,"button",24),core.NdJ("click",__name(function(){return core.CHM(_r11),core.oxw().gotoAdminEntities()},"UserEditComponent_mat_card_2_Template_button_click_37_listener")),core.TgZ(38,"mat-icon"),core._uU(39,"people_alt"),core.qZA(),core.qZA(),core.TgZ(40,"button",24),core.NdJ("click",__name(function(){return core.CHM(_r11),core.oxw().gotoList()},"UserEditComponent_mat_card_2_Template_button_click_40_listener")),core.TgZ(41,"mat-icon"),core._uU(42,"list"),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA()}if(2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("formGroup",ctx_r0.userForm),core.xp6(3),core.Q6J("src",ctx_r0.userForm.get("photoURL").value,core.LSH),core.xp6(9),core.Q6J("value",ctx_r0.userForm.get("photoURL").value),core.xp6(1),core.Q6J("ngForOf",ctx_r0.AVATARES),core.xp6(3),core.Q6J("appRole",core.DdM(9,user_edit_component_c0)),core.xp6(12),core.Q6J("value",ctx_r0.userForm.get("role").value),core.xp6(1),core.Q6J("ngForOf",ctx_r0.ROLES),core.xp6(4),core.Q6J("title",ctx_r0.userForm.valid?"Guardar con los datos introducidos":"Deshabilitado hasta que los datos sean v\xe1lidos")("disabled",!ctx_r0.userForm.valid)}}function UserEditComponent_div_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",27),core._uU(1),core.qZA()),2&rf){const ctx_r1=core.oxw();core.xp6(1),core.hij(" ",ctx_r1.errorMessage," ")}}function UserEditComponent_ng_template_4_Template(rf,ctx){1&rf&&core._uU(0," No existe tal usuario\n")}__name(UserEditComponent_mat_card_2_Template,"UserEditComponent_mat_card_2_Template"),__name(UserEditComponent_div_3_Template,"UserEditComponent_div_3_Template"),__name(UserEditComponent_ng_template_4_Template,"UserEditComponent_ng_template_4_Template");class UserEditComponent{constructor(afStorage,fb,route,router2,logSrv,usersSrv){this.afStorage=afStorage,this.fb=fb,this.route=route,this.router=router2,this.logSrv=logSrv,this.usersSrv=usersSrv,this.pageTitle="Creaci\xf3n de un nuevo usuario",this.errorMessage="",this.listOfObservers=[],this.ROLES=User.ROLES,this.AVATARES=Avatar.getAvatares()}ngOnInit(){const uidUser=this.route.snapshot.paramMap.get("uid");uidUser&&(this.logSrv.info(`uid asked ${uidUser}`),this.getDetails(uidUser)),this.userForm=this.fb.group({uid:[{value:"0",disabled:!0}],active:!0,email:["",[fesm2015_forms.kI.required,fesm2015_forms.kI.minLength(3),fesm2015_forms.kI.maxLength(50)]],emailVerified:!1,displayName:["",[fesm2015_forms.kI.required,fesm2015_forms.kI.minLength(3),fesm2015_forms.kI.maxLength(50)]],password:"",photoURL:User.IMAGE_DEFAULT,role:user_role_enum.i.Lector,entitiesAdmin:[]})}onResetForm(){this.userForm.reset()}onSaveForm(){if(this.userForm.valid){const userItem=Object.assign(Object.assign({},this.user),this.userForm.value);"0"===userItem.uid?this.usersSrv.addUser(userItem):this.usersSrv.updateUser(userItem),this.router.navigate([User.PATH_URL])}else this.errorMessage="Por favor, corrige los mensajes de validaci\xf3n."}onSaveComplete(){this.userForm.reset(),sweetalert2_all_default().fire({icon:"success",title:"Datos guardados con \xe9xito",text:`Los datos de ${this.user.displayName} se han guardado correctamente`}),this.router.navigate([`/${User.PATH_URL}`])}gotoList(){this.userForm.reset(),this.router.navigate([`/${User.PATH_URL}`])}gotoAdminEntities(){this.userForm.reset(),this.router.navigate([`/${User.PATH_URL}/${this.user.uid}/entidades`])}uploadImage(event){const file=event.target.files[0],filePath=file.name,fileRef=this.afStorage.ref(filePath),task=this.afStorage.upload(filePath,file);this.uploadPercent=task.percentageChanges(),task.snapshotChanges().pipe((0,finalize.x)(()=>{fileRef.getDownloadURL().subscribe(photoURL=>{this.user.photoURL=photoURL,this.userForm.patchValue({photoURL:this.user.photoURL})})})).subscribe()}getDetails(uidUser){if(this.logSrv.info(`uid asked ${uidUser}`),"0"===uidUser)this.pageTitle="Creaci\xf3n de un nuevo usuario",this.user=User.InitDefault();else{const subs1$=this.usersSrv.getOneUser(uidUser).subscribe({next:user=>{this.user=user,this.displayUser(),this.logSrv.info(JSON.stringify(this.user))},error:err=>{this.errorMessage=`Error: ${err}`}});this.listOfObservers.push(subs1$)}}displayUser(){var _a,_b,_c;this.userForm&&this.userForm.reset(),"0"===this.user.uid?this.pageTitle="Creando un nuevo usuario":this.pageTitle=`Editando al usuario ${this.user.displayName}`,this.userForm.patchValue({uid:this.user.uid,active:this.user.active,email:this.user.email,emailVerified:this.user.emailVerified,displayName:this.user.displayName,password:null!==(_a=this.user.password)&&void 0!==_a?_a:"",photoURL:null!==(_b=this.user.photoURL)&&void 0!==_b?_b:User.IMAGE_DEFAULT,role:this.user.role,entitiesAdmin:null!==(_c=this.user.entitiesAdmin)&&void 0!==_c?_c:[]}),this.userForm.controls.uid.setValue(this.user.uid)}ngOnDestroy(){this.listOfObservers.forEach(sub=>sub.unsubscribe())}}__name(UserEditComponent,"UserEditComponent"),UserEditComponent.\u0275fac=__name(function(t){return new(t||UserEditComponent)(core.Y36(angular_fire_compat_storage.Q1),core.Y36(fesm2015_forms.qu),core.Y36(router.gz),core.Y36(router.F0),core.Y36(log_service.$V),core.Y36(users_service.K))},"UserEditComponent_Factory"),UserEditComponent.\u0275cmp=core.Xpm({type:UserEditComponent,selectors:[["app-user-edit"]],decls:6,vars:4,consts:[[3,"title"],[1,"section-wrapper"],["class","item-edit",4,"ngIf","ngIfElse"],["class","alert-danger",4,"ngIf"],["noUserTemplate",""],[1,"item-edit"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-3","col-md-4","col-12",2,"text-align","center"],[1,"img-thumbnail",3,"src","click"],["hidden","","type","file",3,"change"],["inputImageProfile",""],[1,"small",3,"click"],[1,"card-detail"],["formControlName","photoURL",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-9","col-md-8","col-12"],["class","mb-3 ml-2","formControlName","active",4,"appRole"],["appearance","outline"],["matInput","","type","text","formControlName","displayName","placeholder","Nombre"],["matInput","","type","text","formControlName","email","placeholder","Email"],["formControlName","role",3,"value"],[1,"buttons"],["mat-fab","","type","submit",1,"btn-admin",3,"title","disabled"],["mat-fab","",1,"btn-1",3,"click"],[3,"value"],["formControlName","active",1,"mb-3","ml-2"],[1,"alert-danger"]],template:__name(function(rf,ctx){if(1&rf&&(core._UZ(0,"app-section-header",0),core.TgZ(1,"div",1),core.YNc(2,UserEditComponent_mat_card_2_Template,43,10,"mat-card",2),core.YNc(3,UserEditComponent_div_3_Template,2,1,"div",3),core.qZA(),core.YNc(4,UserEditComponent_ng_template_4_Template,1,0,"ng-template",null,4,core.W1O)),2&rf){const _r2=core.MAs(5);core.Q6J("title",ctx.pageTitle),core.xp6(2),core.Q6J("ngIf",ctx.user)("ngIfElse",_r2),core.xp6(1),core.Q6J("ngIf",ctx.errorMessage)}},"UserEditComponent_Template"),directives:[section_header_component.I,common.O5,card.a8,fesm2015_forms._Y,fesm2015_forms.JL,fesm2015_forms.sg,form_field.KE,form_field.hX,fesm2015_select.gD,fesm2015_forms.JJ,fesm2015_forms.u,common.sg,card.dn,role_directive.g,input.Nt,fesm2015_forms.Fj,form_field.bx,card.hq,fesm2015_button.lW,icon.Hw,fesm2015_core.ey,slide_toggle.Rr],styles:["form[_ngcontent-%COMP%]{background-color:#fff;color:#000}"]});var startWith=__webpack_require__(39761),map=__webpack_require__(88002),entities_service=__webpack_require__(8676),autocomplete=__webpack_require__(21554);function UserAdminEntitiesComponent_mat_card_2_h2_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"h2",16),core._uU(1," Actualmente, al tener "),core.TgZ(2,"strong"),core._uU(3),core.qZA(),core._uU(4," puede administrar cualquier entidad "),core.qZA()),2&rf){const ctx_r7=core.oxw(2);core.xp6(3),core.hij("ROL ",ctx_r7.user.role,"")}}function UserAdminEntitiesComponent_mat_card_2_h2_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"h2",17),core._uU(1," Actualmente, al tener "),core.TgZ(2,"strong"),core._uU(3),core.qZA(),core._uU(4," no puede administrar ninguna entidad "),core.qZA()),2&rf){const ctx_r8=core.oxw(2);core.xp6(3),core.hij("ROL ",ctx_r8.user.role,"")}}function UserAdminEntitiesComponent_mat_card_2_div_5_Template(rf,ctx){if(1&rf){const _r12=core.EpF();core.TgZ(0,"div"),core._UZ(1,"img",18),core._UZ(2,"img",18),core.TgZ(3,"div",19),core.TgZ(4,"button",20),core.NdJ("click",__name(function(){return core.CHM(_r12),core.oxw(2).addUserEntity()},"UserAdminEntitiesComponent_mat_card_2_div_5_Template_button_click_4_listener")),core.TgZ(5,"mat-icon"),core._uU(6,"add"),core.qZA(),core.qZA(),core.TgZ(7,"button",20),core.NdJ("click",__name(function(){return core.CHM(_r12),core.oxw(2).cancel()},"UserAdminEntitiesComponent_mat_card_2_div_5_Template_button_click_7_listener")),core.TgZ(8,"mat-icon"),core._uU(9,"close"),core.qZA(),core.qZA(),core.qZA(),core.qZA()}if(2&rf){const ctx_r9=core.oxw(2);core.xp6(1),core.Q6J("src",ctx_r9.user.photoURL,core.LSH),core.xp6(1),core.Q6J("src",ctx_r9.selectedEntity.image,core.LSH)}}function UserAdminEntitiesComponent_mat_card_2_table_10_th_2_Template(rf,ctx){1&rf&&core._UZ(0,"th",32)}function UserAdminEntitiesComponent_mat_card_2_table_10_td_3_Template(rf,ctx){if(1&rf){const _r26=core.EpF();core.TgZ(0,"td",33),core.TgZ(1,"img",34),core.NdJ("click",__name(function(){const element_r24=core.CHM(_r26).$implicit;return core.oxw(3).gotoEntity(element_r24)},"UserAdminEntitiesComponent_mat_card_2_table_10_td_3_Template_img_click_1_listener")),core.qZA(),core.qZA()}if(2&rf){const element_r24=ctx.$implicit;core.xp6(1),core.Q6J("src",element_r24.image,core.LSH)}}function UserAdminEntitiesComponent_mat_card_2_table_10_th_5_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",35),core._uU(1,"Id."),core.qZA())}function UserAdminEntitiesComponent_mat_card_2_table_10_td_6_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",33),core._uU(1),core.qZA()),2&rf){const entity_r27=ctx.$implicit;core.xp6(1),core.Oqu(entity_r27.id)}}function UserAdminEntitiesComponent_mat_card_2_table_10_th_8_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",35),core._uU(1,"Nombre"),core.qZA())}function UserAdminEntitiesComponent_mat_card_2_table_10_td_9_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",33),core._uU(1),core.qZA()),2&rf){const entity_r28=ctx.$implicit;core.xp6(1),core.Oqu(entity_r28.name)}}function UserAdminEntitiesComponent_mat_card_2_table_10_th_11_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",35),core._uU(1,"Acciones"),core.qZA())}function UserAdminEntitiesComponent_mat_card_2_table_10_mat_cell_12_Template(rf,ctx){if(1&rf){const _r31=core.EpF();core.TgZ(0,"mat-cell"),core.TgZ(1,"button",36),core.NdJ("click",__name(function(){const entity_r29=core.CHM(_r31).$implicit;return core.oxw(3).gotoEntity(entity_r29)},"UserAdminEntitiesComponent_mat_card_2_table_10_mat_cell_12_Template_button_click_1_listener")),core.TgZ(2,"mat-icon",37),core._uU(3,"remove_red_eye"),core.qZA(),core.qZA(),core.TgZ(4,"button",38),core.NdJ("click",__name(function(){const entity_r29=core.CHM(_r31).$implicit;return core.oxw(3).deleteUserEntity(entity_r29)},"UserAdminEntitiesComponent_mat_card_2_table_10_mat_cell_12_Template_button_click_4_listener")),core.TgZ(5,"mat-icon"),core._uU(6,"delete"),core.qZA(),core.qZA(),core.TgZ(7,"button",39),core.NdJ("click",__name(function(){const entity_r29=core.CHM(_r31).$implicit;return core.oxw(3).setAsEntityDefault(entity_r29)},"UserAdminEntitiesComponent_mat_card_2_table_10_mat_cell_12_Template_button_click_7_listener")),core.TgZ(8,"mat-icon"),core._uU(9,"star"),core.qZA(),core.qZA(),core.qZA()}}function UserAdminEntitiesComponent_mat_card_2_table_10_tr_13_Template(rf,ctx){1&rf&&core._UZ(0,"tr",40)}__name(UserAdminEntitiesComponent_mat_card_2_h2_1_Template,"UserAdminEntitiesComponent_mat_card_2_h2_1_Template"),__name(UserAdminEntitiesComponent_mat_card_2_h2_2_Template,"UserAdminEntitiesComponent_mat_card_2_h2_2_Template"),__name(UserAdminEntitiesComponent_mat_card_2_div_5_Template,"UserAdminEntitiesComponent_mat_card_2_div_5_Template"),__name(UserAdminEntitiesComponent_mat_card_2_table_10_th_2_Template,"UserAdminEntitiesComponent_mat_card_2_table_10_th_2_Template"),__name(UserAdminEntitiesComponent_mat_card_2_table_10_td_3_Template,"UserAdminEntitiesComponent_mat_card_2_table_10_td_3_Template"),__name(UserAdminEntitiesComponent_mat_card_2_table_10_th_5_Template,"UserAdminEntitiesComponent_mat_card_2_table_10_th_5_Template"),__name(UserAdminEntitiesComponent_mat_card_2_table_10_td_6_Template,"UserAdminEntitiesComponent_mat_card_2_table_10_td_6_Template"),__name(UserAdminEntitiesComponent_mat_card_2_table_10_th_8_Template,"UserAdminEntitiesComponent_mat_card_2_table_10_th_8_Template"),__name(UserAdminEntitiesComponent_mat_card_2_table_10_td_9_Template,"UserAdminEntitiesComponent_mat_card_2_table_10_td_9_Template"),__name(UserAdminEntitiesComponent_mat_card_2_table_10_th_11_Template,"UserAdminEntitiesComponent_mat_card_2_table_10_th_11_Template"),__name(UserAdminEntitiesComponent_mat_card_2_table_10_mat_cell_12_Template,"UserAdminEntitiesComponent_mat_card_2_table_10_mat_cell_12_Template"),__name(UserAdminEntitiesComponent_mat_card_2_table_10_tr_13_Template,"UserAdminEntitiesComponent_mat_card_2_table_10_tr_13_Template");const user_admin_entities_component_c0=__name(function(a0){return{"marked-row":a0}},"user_admin_entities_component_c0");function UserAdminEntitiesComponent_mat_card_2_table_10_tr_14_Template(rf,ctx){if(1&rf&&core._UZ(0,"tr",41),2&rf){const row_r34=ctx.$implicit,ctx_r23=core.oxw(3);core.Q6J("ngClass",core.VKq(1,user_admin_entities_component_c0,row_r34.id===(null==ctx_r23.user.entityDefault?null:ctx_r23.user.entityDefault.id)))}}function UserAdminEntitiesComponent_mat_card_2_table_10_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"table",21),core.ynx(1,22),core.YNc(2,UserAdminEntitiesComponent_mat_card_2_table_10_th_2_Template,1,0,"th",23),core.YNc(3,UserAdminEntitiesComponent_mat_card_2_table_10_td_3_Template,2,1,"td",24),core.BQk(),core.ynx(4,25),core.YNc(5,UserAdminEntitiesComponent_mat_card_2_table_10_th_5_Template,2,0,"th",26),core.YNc(6,UserAdminEntitiesComponent_mat_card_2_table_10_td_6_Template,2,1,"td",24),core.BQk(),core.ynx(7,27),core.YNc(8,UserAdminEntitiesComponent_mat_card_2_table_10_th_8_Template,2,0,"th",26),core.YNc(9,UserAdminEntitiesComponent_mat_card_2_table_10_td_9_Template,2,1,"td",24),core.BQk(),core.ynx(10,28),core.YNc(11,UserAdminEntitiesComponent_mat_card_2_table_10_th_11_Template,2,0,"th",26),core.YNc(12,UserAdminEntitiesComponent_mat_card_2_table_10_mat_cell_12_Template,10,0,"mat-cell",29),core.BQk(),core.YNc(13,UserAdminEntitiesComponent_mat_card_2_table_10_tr_13_Template,1,0,"tr",30),core.YNc(14,UserAdminEntitiesComponent_mat_card_2_table_10_tr_14_Template,1,3,"tr",31),core.qZA()),2&rf){const ctx_r10=core.oxw(2);core.Q6J("dataSource",ctx_r10.user.entitiesAdmin),core.xp6(13),core.Q6J("matHeaderRowDef",ctx_r10.displayedColumns),core.xp6(1),core.Q6J("matRowDefColumns",ctx_r10.displayedColumns)}}__name(UserAdminEntitiesComponent_mat_card_2_table_10_tr_14_Template,"UserAdminEntitiesComponent_mat_card_2_table_10_tr_14_Template"),__name(UserAdminEntitiesComponent_mat_card_2_table_10_Template,"UserAdminEntitiesComponent_mat_card_2_table_10_Template");const user_admin_entities_component_c1=__name(function(){return["SUPER","ADMIN"]},"user_admin_entities_component_c1"),_c2=__name(function(){return["LECTOR"]},"_c2");function UserAdminEntitiesComponent_mat_card_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-card",6),core.YNc(1,UserAdminEntitiesComponent_mat_card_2_h2_1_Template,5,1,"h2",7),core.YNc(2,UserAdminEntitiesComponent_mat_card_2_h2_2_Template,5,1,"h2",8),core.TgZ(3,"div",9),core.TgZ(4,"div",10),core.YNc(5,UserAdminEntitiesComponent_mat_card_2_div_5_Template,10,2,"div",11),core.qZA(),core.TgZ(6,"div",12),core.TgZ(7,"span",13),core._uU(8,"De tener ROL AUTOR, podr\xeda administrar:"),core.qZA(),core.TgZ(9,"mat-card-content",14),core.YNc(10,UserAdminEntitiesComponent_mat_card_2_table_10_Template,15,3,"table",15),core.qZA(),core._UZ(11,"mat-card-actions"),core.qZA(),core.qZA(),core.qZA()),2&rf){const ctx_r0=core.oxw(),_r5=core.MAs(8),_r3=core.MAs(6);core.xp6(1),core.Q6J("appRole",core.DdM(6,user_admin_entities_component_c1)),core.xp6(1),core.Q6J("appRole",core.DdM(7,_c2)),core.xp6(3),core.Q6J("ngIf",ctx_r0.selectedEntity)("ngIfElse",_r5),core.xp6(5),core.Q6J("ngIf",(null==ctx_r0.user.entitiesAdmin?null:ctx_r0.user.entitiesAdmin.length)>0)("ngIfElse",_r3)}}function UserAdminEntitiesComponent_ng_template_3_Template(rf,ctx){1&rf&&core._uU(0," No existe tal usuario\n")}function UserAdminEntitiesComponent_ng_template_5_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",42),core._uU(1),core.qZA()),2&rf){const ctx_r4=core.oxw();core.xp6(1),core.hij(" ",ctx_r4.user.displayName," a\xfan no tiene entidades asociadas ")}}function UserAdminEntitiesComponent_ng_template_7_mat_option_9_Template(rf,ctx){if(1&rf){const _r40=core.EpF();core.TgZ(0,"mat-option",47),core.NdJ("onSelectionChange",__name(function(){const entity_r37=core.CHM(_r40).$implicit;return core.oxw(2).onSelectedOption(entity_r37)},"UserAdminEntitiesComponent_ng_template_7_mat_option_9_Template_mat_option_onSelectionChange_0_listener")),core._UZ(1,"img",48),core.TgZ(2,"span"),core._uU(3),core.qZA(),core._uU(4," | "),core.TgZ(5,"small"),core._uU(6),core.qZA(),core.qZA()}if(2&rf){const entity_r37=ctx.$implicit;core.Q6J("value",entity_r37.name),core.xp6(1),core.Q6J("src",entity_r37.image,core.LSH),core.xp6(2),core.Oqu(entity_r37.name),core.xp6(3),core.hij("Tipo: ",entity_r37.roleDefault,"")}}function UserAdminEntitiesComponent_ng_template_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"form"),core._UZ(1,"img",18),core._UZ(2,"img",18),core._UZ(3,"hr"),core.TgZ(4,"mat-card-content"),core.TgZ(5,"mat-form-field",43),core._UZ(6,"input",44),core.TgZ(7,"mat-autocomplete",null,45),core.YNc(9,UserAdminEntitiesComponent_ng_template_7_mat_option_9_Template,7,4,"mat-option",46),core.ALo(10,"async"),core.qZA(),core.qZA(),core.qZA(),core.qZA()),2&rf){const _r35=core.MAs(8),ctx_r6=core.oxw();core.xp6(1),core.Q6J("src",ctx_r6.user.photoURL,core.LSH),core.xp6(1),core.Q6J("src","assets/images/entities/no-selected.png",core.LSH),core.xp6(4),core.Q6J("matAutocomplete",_r35)("formControl",ctx_r6.entityCtrl),core.xp6(3),core.Q6J("ngForOf",core.lcZ(10,5,ctx_r6.filteredEntities))}}__name(UserAdminEntitiesComponent_mat_card_2_Template,"UserAdminEntitiesComponent_mat_card_2_Template"),__name(UserAdminEntitiesComponent_ng_template_3_Template,"UserAdminEntitiesComponent_ng_template_3_Template"),__name(UserAdminEntitiesComponent_ng_template_5_Template,"UserAdminEntitiesComponent_ng_template_5_Template"),__name(UserAdminEntitiesComponent_ng_template_7_mat_option_9_Template,"UserAdminEntitiesComponent_ng_template_7_mat_option_9_Template"),__name(UserAdminEntitiesComponent_ng_template_7_Template,"UserAdminEntitiesComponent_ng_template_7_Template");class UserAdminEntitiesComponent{constructor(router2,route,logSrv,userSrv,entitySrv){this.router=router2,this.route=route,this.logSrv=logSrv,this.userSrv=userSrv,this.entitySrv=entitySrv,this.listOfObservers=[],this.pageTitle="Administraci\xf3n de entides del nuevo usuario",this.entityCtrl=new fesm2015_forms.NI,this.displayedColumns=["image","name","actions3"];const subs1$=this.entitySrv.getAllEntities().subscribe(entities=>{this.entities=entities,this.filteredEntities=this.entityCtrl.valueChanges.pipe((0,startWith.O)(""),(0,map.U)(entity=>entity?this.filterEntities(entity):this.entities.slice()))});this.listOfObservers.push(subs1$)}ngOnInit(){const uidUser=this.route.snapshot.paramMap.get("uid");uidUser&&(this.logSrv.info(`uid asked ${uidUser}`),this.getDetails(uidUser))}getDetails(uidUser){const subs2$=this.userSrv.getOneUser(uidUser).subscribe(user=>{var _a;this.user=user,this.pageTitle=`Administraci\xf3n de entidades de ${this.user.displayName}`,this.logSrv.info(`title: ${this.pageTitle}`),this.user.entitiesAdmin=null!==(_a=this.user.entitiesAdmin)&&void 0!==_a?_a:[]});this.listOfObservers.push(subs2$)}onSelectedOption(entity){this.selectedEntity=entity,this.logSrv.info(`onSelectedOption: ${JSON.stringify(entity)}`)}gotoEntity(entity){this.router.navigate([`entidades/${entity.id}`])}deleteUserEntity(deletedEntity){this.user.entitiesAdmin=this.user.entitiesAdmin.filter(entity=>entity.id!==deletedEntity.id),this.userSrv.updateUser(this.user),sweetalert2_all_default().fire({icon:"success",title:"Datos guardados con \xe9xito",text:`${this.user.displayName} ya no gestiona la entidad ${deletedEntity.name}`})}setAsEntityDefault(entity){this.user.entityDefault=entity,this.userSrv.updateUser(this.user),sweetalert2_all_default().fire({icon:"success",title:"Datos guardados con \xe9xito",text:`${this.user.displayName} administra pr defecto ${entity.name}`})}addUserEntity(){var _a;0===(null===(_a=this.user.entitiesAdmin)||void 0===_a?void 0:_a.filter(entity=>entity.id===this.selectedEntity.id)).length?(this.user.entitiesAdmin.push(this.selectedEntity),this.userSrv.updateUser(this.user),sweetalert2_all_default().fire({icon:"success",title:"Datos guardados con \xe9xito",text:`${this.user.displayName} ya puede gestionar la entidad ${this.selectedEntity.name}`})):sweetalert2_all_default().fire({icon:"warning",title:"No ha sido posible",text:`${this.user.displayName} ya pod\xeda gestionar la entidad ${this.selectedEntity.name}`,footer:"<i>En caso de dudas, consulta con el administrador</>"}),this.selectedEntity=void 0}cancel(){this.selectedEntity=void 0}filterEntities(value){const filterValue=value.toLowerCase();return this.entities.filter(entity=>0===entity.name.toLowerCase().indexOf(filterValue))}ngOnDestroy(){this.listOfObservers.forEach(sub=>sub.unsubscribe())}}function UserAuditComponent_th_11_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",16),core._uU(1,"timestamp"),core.qZA())}function UserAuditComponent_td_12_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",17),core._uU(1),core.qZA()),2&rf){const element_r10=ctx.$implicit;core.xp6(1),core.Oqu(element_r10.timestamp)}}function UserAuditComponent_th_14_Template(rf,ctx){1&rf&&core._UZ(0,"th",16)}function UserAuditComponent_td_15_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",17),core._UZ(1,"img",18),core.qZA()),2&rf){const element_r11=ctx.$implicit;core.xp6(1),core.Q6J("src",element_r11.image,core.LSH)}}function UserAuditComponent_th_17_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",19),core._uU(1,"Nombre"),core.qZA())}function UserAuditComponent_td_18_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",17),core._uU(1),core.qZA()),2&rf){const user_r12=ctx.$implicit;core.xp6(1),core.Oqu(user_r12.name)}}function UserAuditComponent_th_20_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",19),core._uU(1,"Desc"),core.qZA())}function UserAuditComponent_td_21_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",17),core._uU(1),core.qZA()),2&rf){const user_r13=ctx.$implicit;core.xp6(1),core.Oqu(user_r13.description)}}function UserAuditComponent_tr_22_Template(rf,ctx){1&rf&&core._UZ(0,"tr",20)}function UserAuditComponent_tr_23_Template(rf,ctx){1&rf&&core._UZ(0,"tr",21)}__name(UserAdminEntitiesComponent,"UserAdminEntitiesComponent"),UserAdminEntitiesComponent.\u0275fac=__name(function(t){return new(t||UserAdminEntitiesComponent)(core.Y36(router.F0),core.Y36(router.gz),core.Y36(log_service.$V),core.Y36(users_service.K),core.Y36(entities_service.c))},"UserAdminEntitiesComponent_Factory"),UserAdminEntitiesComponent.\u0275cmp=core.Xpm({type:UserAdminEntitiesComponent,selectors:[["app-user-admin-entities"]],decls:9,vars:3,consts:[[3,"title"],[1,"section-wrapper"],["class","item-edit",4,"ngIf","ngIfElse"],["noUserTemplate",""],["noEntitiesTemplate",""],["noSelectedEntityTemplate",""],[1,"item-edit"],["class","alert alert-success","role","alert",4,"appRole"],["class","alert alert-danger","role","alert",4,"appRole"],[1,"row"],[1,"col-lg-4","col-md-5","col-12",2,"text-align","center"],[4,"ngIf","ngIfElse"],[1,"col-lg-8","col-md-7","col-12"],[1,"section-subtitle"],[1,"item-view"],["mat-table","","class","mat-elevation-z8","matSort","",3,"dataSource",4,"ngIf","ngIfElse"],["role","alert",1,"alert","alert-success"],["role","alert",1,"alert","alert-danger"],[1,"img-thumbnail","mx-1",3,"src"],[1,"buttons"],["mat-mini-fab","",1,"btn-1",3,"click"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","image"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","actions3",1,"buttons"],[4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["alt","element.name",1,"img-thumbnail",3,"src","click"],["mat-header-cell",""],["mat-icon-button","","matTooltip","Click to View",1,"btn-icon-1",3,"click"],["aria-label","View"],["mat-icon-button","","matTooltip","Click to Delete",1,"btn-icon-1",3,"click"],["mat-icon-button","","matTooltip","Click to select as admin",1,"btn-icon-1",3,"click"],["mat-header-row",""],["mat-row","",3,"ngClass"],["role","alert",1,"alert","alert-warning"],[1,"example-full-width"],["matInput","","placeholder","Entidad","aria-label","Entity",3,"matAutocomplete","formControl"],["auto","matAutocomplete"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],[3,"value","onSelectionChange"],["aria-hidden","","height","25",1,"option-img",3,"src"]],template:__name(function(rf,ctx){if(1&rf&&(core._UZ(0,"app-section-header",0),core.TgZ(1,"div",1),core.YNc(2,UserAdminEntitiesComponent_mat_card_2_Template,12,8,"mat-card",2),core.qZA(),core.YNc(3,UserAdminEntitiesComponent_ng_template_3_Template,1,0,"ng-template",null,3,core.W1O),core.YNc(5,UserAdminEntitiesComponent_ng_template_5_Template,2,1,"ng-template",null,4,core.W1O),core.YNc(7,UserAdminEntitiesComponent_ng_template_7_Template,11,7,"ng-template",null,5,core.W1O)),2&rf){const _r1=core.MAs(4);core.Q6J("title",ctx.pageTitle),core.xp6(2),core.Q6J("ngIf",ctx.user)("ngIfElse",_r1)}},"UserAdminEntitiesComponent_Template"),directives:[section_header_component.I,common.O5,card.a8,role_directive.g,card.dn,card.hq,fesm2015_button.lW,icon.Hw,table.BZ,sort.YE,table.w1,table.fO,table.Dz,table.as,table.nj,table.ge,sort.nU,table.ev,table.XQ,table.Gk,common.mk,fesm2015_forms._Y,fesm2015_forms.JL,fesm2015_forms.F,form_field.KE,input.Nt,autocomplete.ZL,fesm2015_forms.Fj,fesm2015_forms.JJ,fesm2015_forms.oH,autocomplete.XC,common.sg,fesm2015_core.ey],pipes:[common.Ov],styles:[".form[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.option-img[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px}[dir=rtl][_ngcontent-%COMP%]   .option-img[_ngcontent-%COMP%]{margin-right:0;margin-left:8px}img.img-thumbnail[_ngcontent-%COMP%]{width:120px}"]}),__name(UserAuditComponent_th_11_Template,"UserAuditComponent_th_11_Template"),__name(UserAuditComponent_td_12_Template,"UserAuditComponent_td_12_Template"),__name(UserAuditComponent_th_14_Template,"UserAuditComponent_th_14_Template"),__name(UserAuditComponent_td_15_Template,"UserAuditComponent_td_15_Template"),__name(UserAuditComponent_th_17_Template,"UserAuditComponent_th_17_Template"),__name(UserAuditComponent_td_18_Template,"UserAuditComponent_td_18_Template"),__name(UserAuditComponent_th_20_Template,"UserAuditComponent_th_20_Template"),__name(UserAuditComponent_td_21_Template,"UserAuditComponent_td_21_Template"),__name(UserAuditComponent_tr_22_Template,"UserAuditComponent_tr_22_Template"),__name(UserAuditComponent_tr_23_Template,"UserAuditComponent_tr_23_Template");const user_audit_component_c0=__name(function(){return[5,10,25,100]},"user_audit_component_c0");class UserAuditComponent{constructor(route,auditSrv,spinnerSvc){this.route=route,this.auditSrv=auditSrv,this.spinnerSvc=spinnerSvc,this.listOfObservers=[],this.loading=!0,this.dataSource=new table.by,this.displayedColumns=["timestamp","image","name","desc"],this.spinnerSvc.show()}ngOnInit(){const uidUser=this.route.snapshot.paramMap.get("uid");if(uidUser){const subs1$=this.auditSrv.getAllAuditItemsByUser(uidUser).subscribe(auditItems=>{this.auditItems=auditItems,this.dataSource=new table.by(this.auditItems),this.spinnerSvc.hide(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort});this.listOfObservers.push(subs1$)}}applyFilter(filterValue){this.dataSource.filter=filterValue.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}ngOnDestroy(){this.listOfObservers.forEach(sub=>sub.unsubscribe())}}__name(UserAuditComponent,"UserAuditComponent"),UserAuditComponent.\u0275fac=__name(function(t){return new(t||UserAuditComponent)(core.Y36(router.gz),core.Y36(audit_service.C),core.Y36(spinner_service.V))},"UserAuditComponent_Factory"),UserAuditComponent.\u0275cmp=core.Xpm({type:UserAuditComponent,selectors:[["app-user-audit"]],viewQuery:__name(function(rf,ctx){if(1&rf&&(core.Gf(paginator.NW,5),core.Gf(sort.YE,5)),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.paginator=_t.first),core.iGM(_t=core.CRH())&&(ctx.sort=_t.first)}},"UserAuditComponent_Query"),decls:25,vars:7,consts:[[3,"title"],[1,"section-wrapper"],["matInput","","placeholder","Filtrar",3,"keyup"],["matSuffix",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","timestamp"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","image"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","desc"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["mat-header-cell",""],["mat-cell",""],["alt","element.image",1,"img-thumbnail",3,"src"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""]],template:__name(function(rf,ctx){1&rf&&(core._UZ(0,"app-section-header",0),core.TgZ(1,"div",1),core.TgZ(2,"mat-form-field"),core.TgZ(3,"mat-label"),core._uU(4,"Filtro"),core.qZA(),core.TgZ(5,"input",2),core.NdJ("keyup",__name(function($event){return ctx.applyFilter($event.target.value)},"UserAuditComponent_Template_input_keyup_5_listener")),core.qZA(),core.TgZ(6,"mat-icon",3),core._uU(7,"buscar"),core.qZA(),core.qZA(),core.TgZ(8,"div",4),core.TgZ(9,"table",5),core.ynx(10,6),core.YNc(11,UserAuditComponent_th_11_Template,2,0,"th",7),core.YNc(12,UserAuditComponent_td_12_Template,2,1,"td",8),core.BQk(),core.ynx(13,9),core.YNc(14,UserAuditComponent_th_14_Template,1,0,"th",7),core.YNc(15,UserAuditComponent_td_15_Template,2,1,"td",8),core.BQk(),core.ynx(16,10),core.YNc(17,UserAuditComponent_th_17_Template,2,0,"th",11),core.YNc(18,UserAuditComponent_td_18_Template,2,1,"td",8),core.BQk(),core.ynx(19,12),core.YNc(20,UserAuditComponent_th_20_Template,2,0,"th",11),core.YNc(21,UserAuditComponent_td_21_Template,2,1,"td",8),core.BQk(),core.YNc(22,UserAuditComponent_tr_22_Template,1,0,"tr",13),core.YNc(23,UserAuditComponent_tr_23_Template,1,0,"tr",14),core.qZA(),core._UZ(24,"mat-paginator",15),core.qZA(),core.qZA()),2&rf&&(core.Q6J("title","Registro de accesos"),core.xp6(9),core.Q6J("dataSource",ctx.dataSource),core.xp6(13),core.Q6J("matHeaderRowDef",ctx.displayedColumns),core.xp6(1),core.Q6J("matRowDefColumns",ctx.displayedColumns),core.xp6(1),core.Q6J("pageSizeOptions",core.DdM(6,user_audit_component_c0))("pageSize",10))},"UserAuditComponent_Template"),directives:[section_header_component.I,form_field.KE,form_field.hX,input.Nt,icon.Hw,form_field.R9,table.BZ,sort.YE,table.w1,table.fO,table.Dz,table.as,table.nj,paginator.NW,table.ge,table.ev,sort.nU,table.XQ,table.Gk],styles:[""]});const routes=[{path:"",component:UsersComponent},{path:":uid",component:UserViewComponent},{path:":uid/editar",component:UserEditComponent},{path:":uid/entidades",component:UserAdminEntitiesComponent},{path:":uid/audit",component:UserAuditComponent}];class UsersRoutingModule{}__name(UsersRoutingModule,"UsersRoutingModule"),UsersRoutingModule.\u0275fac=__name(function(t){return new(t||UsersRoutingModule)},"UsersRoutingModule_Factory"),UsersRoutingModule.\u0275mod=core.oAB({type:UsersRoutingModule}),UsersRoutingModule.\u0275inj=core.cJS({imports:[[router.Bz.forChild(routes)],router.Bz]});class UsersModule{}__name(UsersModule,"UsersModule"),UsersModule.\u0275fac=__name(function(t){return new(t||UsersModule)},"UsersModule_Factory"),UsersModule.\u0275mod=core.oAB({type:UsersModule}),UsersModule.\u0275inj=core.cJS({imports:[[shared_module.m,UsersRoutingModule]]})}};