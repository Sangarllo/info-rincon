"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=82,exports.ids=[82],exports.modules={94082:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{EntitiesModule:()=>EntitiesModule});var common=__webpack_require__(38583),router=__webpack_require__(8307),paginator=__webpack_require__(53962),sort=__webpack_require__(11494),table=__webpack_require__(32789),map=__webpack_require__(88002),sweetalert2_all=__webpack_require__(88259),sweetalert2_all_default=__webpack_require__.n(sweetalert2_all),core=__webpack_require__(37716),log_service=__webpack_require__(22189),entities_service=__webpack_require__(8676),spinner_service=__webpack_require__(74649),section_header_component=__webpack_require__(62305),form_field=__webpack_require__(98295),input=__webpack_require__(49983),icon=__webpack_require__(76627),fesm2015_button=__webpack_require__(51095);function EntitiesComponent_th_16_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",30),core._uU(1,"Rol"),core.qZA())}function EntitiesComponent_td_17_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",31),core.TgZ(1,"div",32),core._uU(2),core.qZA(),core.qZA()),2&rf){const entity_r20=ctx.$implicit;core.xp6(2),core.Oqu(entity_r20.roleDefault)}}function EntitiesComponent_th_19_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",30),core._uU(1,"Id."),core.qZA())}function EntitiesComponent_td_20_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",31),core._uU(1),core.qZA()),2&rf){const entity_r21=ctx.$implicit;core.xp6(1),core.Oqu(entity_r21.id)}}function EntitiesComponent_th_22_Template(rf,ctx){1&rf&&core._UZ(0,"th",33)}function EntitiesComponent_td_23_Template(rf,ctx){if(1&rf){const _r24=core.EpF();core.TgZ(0,"td",34),core.TgZ(1,"img",35),core.NdJ("click",__name(function(){const element_r22=core.CHM(_r24).$implicit;return core.oxw().gotoEntity(element_r22)},"EntitiesComponent_td_23_Template_img_click_1_listener")),core.qZA(),core.qZA()}if(2&rf){const element_r22=ctx.$implicit;core.xp6(1),core.Q6J("src",element_r22.image,core.LSH)}}function EntitiesComponent_th_25_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",36),core._uU(1,"Info de la entidad"),core.qZA())}function EntitiesComponent_td_26_Template(rf,ctx){if(1&rf){const _r27=core.EpF();core.TgZ(0,"td",37),core.NdJ("click",__name(function(){const item_r25=core.CHM(_r27).$implicit;return core.oxw().gotoItem(item_r25)},"EntitiesComponent_td_26_Template_td_click_0_listener")),core.TgZ(1,"div",38),core._uU(2),core.qZA(),core._uU(3),core.TgZ(4,"div",39),core._uU(5),core.qZA(),core.qZA()}if(2&rf){const item_r25=ctx.$implicit;core.xp6(2),core.hij(" ",item_r25.description," "),core.xp6(1),core.hij(" ",item_r25.name," "),core.xp6(2),core.hij(" ",null==item_r25||null==item_r25.place?null:item_r25.place.name," ")}}function EntitiesComponent_th_28_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",40),core._uU(1,"Nombre de la entidad"),core.qZA())}function EntitiesComponent_td_29_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",31),core._uU(1),core.qZA()),2&rf){const entity_r28=ctx.$implicit;core.xp6(1),core.Oqu(entity_r28.name)}}function EntitiesComponent_th_31_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",40),core._uU(1,"Categor\xedas"),core.qZA())}function EntitiesComponent_td_32_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",31),core._uU(1),core.qZA()),2&rf){const entity_r29=ctx.$implicit;core.xp6(1),core.Oqu(entity_r29.description)}}function EntitiesComponent_th_34_Template(rf,ctx){1&rf&&core._UZ(0,"th",30)}function EntitiesComponent_td_35_img_1_Template(rf,ctx){if(1&rf&&core._UZ(0,"img",42),2&rf){const element_r30=core.oxw().$implicit;core.Q6J("src",null==element_r30||null==element_r30.place?null:element_r30.place.image,core.LSH)}}function EntitiesComponent_td_35_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",31),core.YNc(1,EntitiesComponent_td_35_img_1_Template,1,1,"img",41),core.qZA()),2&rf){const element_r30=ctx.$implicit;core.xp6(1),core.Q6J("ngIf",null==element_r30||null==element_r30.place?null:element_r30.place.image)}}function EntitiesComponent_th_37_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",30),core._uU(1,"Lugar por defecto"),core.qZA())}function EntitiesComponent_td_38_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",31),core._uU(1),core.qZA()),2&rf){const entity_r33=ctx.$implicit;core.xp6(1),core.Oqu(null==entity_r33||null==entity_r33.place?null:entity_r33.place.name)}}function EntitiesComponent_th_40_Template(rf,ctx){1&rf&&(core.TgZ(0,"th",43),core._uU(1,"Acciones "),core.qZA())}function EntitiesComponent_td_41_Template(rf,ctx){if(1&rf){const _r36=core.EpF();core.TgZ(0,"td",44),core.TgZ(1,"button",45),core.NdJ("click",__name(function(){const entity_r34=core.CHM(_r36).$implicit;return core.oxw().gotoEntity(entity_r34)},"EntitiesComponent_td_41_Template_button_click_1_listener")),core.TgZ(2,"mat-icon",46),core._uU(3," remove_red_eye "),core.qZA(),core.qZA(),core.TgZ(4,"button",47),core.NdJ("click",__name(function(){const entity_r34=core.CHM(_r36).$implicit;return core.oxw().editEntity(entity_r34)},"EntitiesComponent_td_41_Template_button_click_4_listener")),core.TgZ(5,"mat-icon",48),core._uU(6," build_circle "),core.qZA(),core.qZA(),core.TgZ(7,"button",49),core.NdJ("click",__name(function(){const entity_r34=core.CHM(_r36).$implicit;return core.oxw().deleteEntity(entity_r34)},"EntitiesComponent_td_41_Template_button_click_7_listener")),core.TgZ(8,"mat-icon",50),core._uU(9," delete "),core.qZA(),core.qZA(),core.qZA()}}function EntitiesComponent_tr_42_Template(rf,ctx){1&rf&&core._UZ(0,"tr",51)}function EntitiesComponent_tr_43_Template(rf,ctx){1&rf&&core._UZ(0,"tr",52)}__name(EntitiesComponent_th_16_Template,"EntitiesComponent_th_16_Template"),__name(EntitiesComponent_td_17_Template,"EntitiesComponent_td_17_Template"),__name(EntitiesComponent_th_19_Template,"EntitiesComponent_th_19_Template"),__name(EntitiesComponent_td_20_Template,"EntitiesComponent_td_20_Template"),__name(EntitiesComponent_th_22_Template,"EntitiesComponent_th_22_Template"),__name(EntitiesComponent_td_23_Template,"EntitiesComponent_td_23_Template"),__name(EntitiesComponent_th_25_Template,"EntitiesComponent_th_25_Template"),__name(EntitiesComponent_td_26_Template,"EntitiesComponent_td_26_Template"),__name(EntitiesComponent_th_28_Template,"EntitiesComponent_th_28_Template"),__name(EntitiesComponent_td_29_Template,"EntitiesComponent_td_29_Template"),__name(EntitiesComponent_th_31_Template,"EntitiesComponent_th_31_Template"),__name(EntitiesComponent_td_32_Template,"EntitiesComponent_td_32_Template"),__name(EntitiesComponent_th_34_Template,"EntitiesComponent_th_34_Template"),__name(EntitiesComponent_td_35_img_1_Template,"EntitiesComponent_td_35_img_1_Template"),__name(EntitiesComponent_td_35_Template,"EntitiesComponent_td_35_Template"),__name(EntitiesComponent_th_37_Template,"EntitiesComponent_th_37_Template"),__name(EntitiesComponent_td_38_Template,"EntitiesComponent_td_38_Template"),__name(EntitiesComponent_th_40_Template,"EntitiesComponent_th_40_Template"),__name(EntitiesComponent_td_41_Template,"EntitiesComponent_td_41_Template"),__name(EntitiesComponent_tr_42_Template,"EntitiesComponent_tr_42_Template"),__name(EntitiesComponent_tr_43_Template,"EntitiesComponent_tr_43_Template");const _c0=__name(function(){return[5,10,25,100]},"_c0");class EntitiesComponent{constructor(router2,logSrv,entitySrv,spinnerSvc){this.router=router2,this.logSrv=logSrv,this.entitySrv=entitySrv,this.spinnerSvc=spinnerSvc,this.listOfObservers=[],this.loading=!0,this.dataSource=new table.by,this.displayedColumns=["roleDefault","id","image","collapsed-info","name","categories","placeImage","placeName","actions3"],this.spinnerSvc.show()}ngOnInit(){const subs1$=this.entitySrv.getAllEntities().pipe((0,map.U)(entities=>entities.map(entity2=>{const reducer=__name((acc,value)=>`${acc} ${value.substr(0,value.indexOf(" "))}`,"reducer");return entity2.description=entity2.categories.reduce(reducer,""),Object.assign({},entity2)}))).subscribe(entities=>{this.entities=entities,this.dataSource=new table.by(this.entities),this.spinnerSvc.hide(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort});this.listOfObservers.push(subs1$)}applyFilter(filterValue){this.dataSource.filter=filterValue.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}gotoItem(entity2){this.router.navigate([`entidades/${entity2.id}`])}editEntity(entity2){this.router.navigate([`entidades/${entity2.id}/editar`])}deleteEntity(entity2){this.logSrv.info(`Borrando ${entity2.id}`),sweetalert2_all_default().fire({title:"\xbfEst\xe1s seguro?",text:"No podr\xe1s deshacer esta acci\xf3n de borrado!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1S\xed, b\xf3rralo!"}).then(result=>{result.isConfirmed&&(this.entitySrv.deleteEntity(entity2),sweetalert2_all_default().fire("\xa1Borrado!",`${entity2.name} ha sido borrado`,"success"))})}addItem(){this.router.navigate(["entidades/0/editar"])}ngOnDestroy(){this.listOfObservers.forEach(sub=>sub.unsubscribe())}}__name(EntitiesComponent,"EntitiesComponent"),EntitiesComponent.\u0275fac=__name(function(t){return new(t||EntitiesComponent)(core.Y36(router.F0),core.Y36(log_service.$V),core.Y36(entities_service.c),core.Y36(spinner_service.V))},"EntitiesComponent_Factory"),EntitiesComponent.\u0275cmp=core.Xpm({type:EntitiesComponent,selectors:[["app-entities"]],viewQuery:__name(function(rf,ctx){if(1&rf&&(core.Gf(paginator.NW,5),core.Gf(sort.YE,5)),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.paginator=_t.first),core.iGM(_t=core.CRH())&&(ctx.sort=_t.first)}},"EntitiesComponent_Query"),decls:45,vars:7,consts:[[3,"title"],[1,"section-wrapper"],[1,"section-list-options"],["matInput","","placeholder","Filtrar",3,"keyup"],["matSuffix",""],[1,"buttons"],["mat-mini-fab","",1,"btn-1",3,"click"],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","roleDefault"],["mat-header-cell","","class","td-extra-lg",4,"matHeaderCellDef"],["mat-cell","","class","td-extra-lg",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","collapsed-info"],["mat-header-cell","","class","td-collapsed-info","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","td-collapsed-info",3,"click",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","class","td-extra-lg","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","categories"],["matColumnDef","placeImage"],["matColumnDef","placeName"],["matColumnDef","actions3"],["mat-header-cell","","class","td-extra-md",4,"matHeaderCellDef"],["mat-cell","","class","td-extra-md",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["mat-header-cell","",1,"td-extra-lg"],["mat-cell","",1,"td-extra-lg"],[1,"inside"],["mat-header-cell",""],["mat-cell",""],["alt","element.name",1,"img-thumbnail",3,"src","click"],["mat-header-cell","","mat-sort-header","",1,"td-collapsed-info"],["mat-cell","",1,"td-collapsed-info",3,"click"],[1,"full-inside"],[2,"font-size","smaller","color","gray"],["mat-header-cell","","mat-sort-header","",1,"td-extra-lg"],["class","img-thumbnail","alt","element?.place?.image",3,"src",4,"ngIf"],["alt","element?.place?.image",1,"img-thumbnail",3,"src"],["mat-header-cell","",1,"td-extra-md"],["mat-cell","",1,"td-extra-md"],["mat-icon-button","","matTooltip","Click to View",1,"iconbutton",3,"click"],["aria-label","View",1,"btn-1"],["mat-icon-button","","matTooltip","Click to Edit",1,"iconbutton",3,"click"],["aria-label","Edit",1,"btn-1"],["mat-icon-button","","matTooltip","Click to Delete",1,"iconbutton",3,"click"],["aria-label","Delete",1,"btn-1"],["mat-header-row",""],["mat-row",""]],template:__name(function(rf,ctx){1&rf&&(core._UZ(0,"app-section-header",0),core.TgZ(1,"div",1),core.TgZ(2,"div",2),core.TgZ(3,"mat-form-field"),core.TgZ(4,"mat-label"),core._uU(5,"Filtro"),core.qZA(),core.TgZ(6,"input",3),core.NdJ("keyup",__name(function($event){return ctx.applyFilter($event.target.value)},"EntitiesComponent_Template_input_keyup_6_listener")),core.qZA(),core.TgZ(7,"mat-icon",4),core._uU(8,"search"),core.qZA(),core.qZA(),core.TgZ(9,"div",5),core.TgZ(10,"button",6),core.NdJ("click",__name(function(){return ctx.addItem()},"EntitiesComponent_Template_button_click_10_listener")),core.TgZ(11,"mat-icon"),core._uU(12,"add"),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.TgZ(13,"div",7),core.TgZ(14,"table",8),core.ynx(15,9),core.YNc(16,EntitiesComponent_th_16_Template,2,0,"th",10),core.YNc(17,EntitiesComponent_td_17_Template,3,1,"td",11),core.BQk(),core.ynx(18,12),core.YNc(19,EntitiesComponent_th_19_Template,2,0,"th",10),core.YNc(20,EntitiesComponent_td_20_Template,2,1,"td",11),core.BQk(),core.ynx(21,13),core.YNc(22,EntitiesComponent_th_22_Template,1,0,"th",14),core.YNc(23,EntitiesComponent_td_23_Template,2,1,"td",15),core.BQk(),core.ynx(24,16),core.YNc(25,EntitiesComponent_th_25_Template,2,0,"th",17),core.YNc(26,EntitiesComponent_td_26_Template,6,3,"td",18),core.BQk(),core.ynx(27,19),core.YNc(28,EntitiesComponent_th_28_Template,2,0,"th",20),core.YNc(29,EntitiesComponent_td_29_Template,2,1,"td",11),core.BQk(),core.ynx(30,21),core.YNc(31,EntitiesComponent_th_31_Template,2,0,"th",20),core.YNc(32,EntitiesComponent_td_32_Template,2,1,"td",11),core.BQk(),core.ynx(33,22),core.YNc(34,EntitiesComponent_th_34_Template,1,0,"th",10),core.YNc(35,EntitiesComponent_td_35_Template,2,1,"td",11),core.BQk(),core.ynx(36,23),core.YNc(37,EntitiesComponent_th_37_Template,2,0,"th",10),core.YNc(38,EntitiesComponent_td_38_Template,2,1,"td",11),core.BQk(),core.ynx(39,24),core.YNc(40,EntitiesComponent_th_40_Template,2,0,"th",25),core.YNc(41,EntitiesComponent_td_41_Template,10,0,"td",26),core.BQk(),core.YNc(42,EntitiesComponent_tr_42_Template,1,0,"tr",27),core.YNc(43,EntitiesComponent_tr_43_Template,1,0,"tr",28),core.qZA(),core._UZ(44,"mat-paginator",29),core.qZA(),core.qZA()),2&rf&&(core.Q6J("title","Panel de Configuraci\xf3n de Entidades"),core.xp6(14),core.Q6J("dataSource",ctx.dataSource),core.xp6(28),core.Q6J("matHeaderRowDef",ctx.displayedColumns),core.xp6(1),core.Q6J("matRowDefColumns",ctx.displayedColumns),core.xp6(1),core.Q6J("pageSizeOptions",core.DdM(6,_c0))("pageSize",10))},"EntitiesComponent_Template"),directives:[section_header_component.I,form_field.KE,form_field.hX,input.Nt,icon.Hw,form_field.R9,fesm2015_button.lW,table.BZ,sort.YE,table.w1,table.fO,table.Dz,table.as,table.nj,paginator.NW,table.ge,table.ev,sort.nU,common.O5,table.XQ,table.Gk],styles:[""]});var tap=__webpack_require__(68307),entity=__webpack_require__(77488),seo_service=__webpack_require__(46228),card=__webpack_require__(93738),tabs=__webpack_require__(65939),chips=__webpack_require__(58341);function EntityViewComponent_app_section_header_0_Template(rf,ctx){if(1&rf&&core._UZ(0,"app-section-header",4),2&rf){const entity_r4=ctx.ngIf;core.Q6J("title",entity_r4.name+" | Entidad de Rinc\xf3n de Soto")}}function EntityViewComponent_mat_card_3_mat_chip_24_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-chip"),core._uU(1),core.qZA()),2&rf){const category_r8=ctx.$implicit;core.xp6(1),core.Oqu(category_r8)}}function EntityViewComponent_mat_card_3_div_34_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",27),core._UZ(1,"img",28),core.TgZ(2,"div"),core.TgZ(3,"span",29),core._uU(4,"Lugar por defecto"),core.qZA(),core._UZ(5,"br"),core.TgZ(6,"span",30),core._uU(7),core.qZA(),core.qZA(),core.qZA()),2&rf){const entity_r5=core.oxw().ngIf;core.xp6(1),core.Q6J("src",entity_r5.place.image,core.LSH)("alt",entity_r5.place.name),core.xp6(6),core.Oqu(null==entity_r5.place?null:entity_r5.place.name)}}function EntityViewComponent_mat_card_3_Template(rf,ctx){if(1&rf){const _r11=core.EpF();core.TgZ(0,"mat-card",5),core.TgZ(1,"div",6),core.TgZ(2,"div",7),core._UZ(3,"img",8),core.qZA(),core.TgZ(4,"div",9),core.TgZ(5,"mat-card-content"),core.TgZ(6,"mat-tab-group"),core.TgZ(7,"mat-tab",10),core.TgZ(8,"mat-form-field",11),core._UZ(9,"input",12),core.TgZ(10,"mat-icon",13),core._uU(11,"check_circle_outline"),core.qZA(),core.qZA(),core.TgZ(12,"mat-form-field",11),core._UZ(13,"input",14),core.TgZ(14,"mat-icon",13),core._uU(15,"assignment_ind"),core.qZA(),core.qZA(),core.TgZ(16,"mat-form-field",11),core._UZ(17,"input",15),core.TgZ(18,"mat-icon",13),core._uU(19,"info"),core.qZA(),core.qZA(),core.TgZ(20,"div",16),core.TgZ(21,"span"),core._uU(22,"Categor\xedas:"),core.qZA(),core.TgZ(23,"mat-chip-list",17),core.YNc(24,EntityViewComponent_mat_card_3_mat_chip_24_Template,2,1,"mat-chip",18),core.qZA(),core.qZA(),core.qZA(),core.TgZ(25,"mat-tab",19),core.TgZ(26,"mat-form-field",11),core._UZ(27,"input",20),core.TgZ(28,"mat-icon",13),core._uU(29,"manage_accounts"),core.qZA(),core.qZA(),core.TgZ(30,"mat-form-field",11),core._UZ(31,"input",21),core.TgZ(32,"mat-icon",13),core._uU(33,"label"),core.qZA(),core.qZA(),core.YNc(34,EntityViewComponent_mat_card_3_div_34_Template,8,3,"div",22),core.qZA(),core.qZA(),core.qZA(),core.TgZ(35,"mat-card-actions",23),core.TgZ(36,"button",24),core.NdJ("click",__name(function(){return core.CHM(_r11),core.oxw().gotoList()},"EntityViewComponent_mat_card_3_Template_button_click_36_listener")),core.TgZ(37,"mat-icon"),core._uU(38,"list"),core.qZA(),core.qZA(),core.TgZ(39,"button",25),core.NdJ("click",__name(function(){return core.CHM(_r11),core.oxw().editItem()},"EntityViewComponent_mat_card_3_Template_button_click_39_listener")),core.TgZ(40,"mat-icon"),core._uU(41,"edit"),core.qZA(),core.qZA(),core.TgZ(42,"a",26),core.TgZ(43,"mat-icon"),core._uU(44,"verified"),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA()}if(2&rf){const entity_r5=ctx.ngIf;core.xp6(3),core.Q6J("src",entity_r5.image,core.LSH),core.xp6(6),core.Q6J("value",entity_r5.active),core.xp6(4),core.Q6J("value",entity_r5.name),core.xp6(4),core.Q6J("value",entity_r5.description),core.xp6(7),core.Q6J("ngForOf",entity_r5.categories),core.xp6(3),core.Q6J("value",entity_r5.roleDefault),core.xp6(4),core.Q6J("value",entity_r5.scheduleTypeDefault),core.xp6(3),core.Q6J("ngIf",entity_r5.place)}}function EntityViewComponent_ng_template_5_Template(rf,ctx){1&rf&&core._uU(0," No existe tal entidad\n")}__name(EntityViewComponent_app_section_header_0_Template,"EntityViewComponent_app_section_header_0_Template"),__name(EntityViewComponent_mat_card_3_mat_chip_24_Template,"EntityViewComponent_mat_card_3_mat_chip_24_Template"),__name(EntityViewComponent_mat_card_3_div_34_Template,"EntityViewComponent_mat_card_3_div_34_Template"),__name(EntityViewComponent_mat_card_3_Template,"EntityViewComponent_mat_card_3_Template"),__name(EntityViewComponent_ng_template_5_Template,"EntityViewComponent_ng_template_5_Template");class EntityViewComponent{constructor(route,router2,seo,entitiesSrv){this.route=route,this.router=router2,this.seo=seo,this.entitiesSrv=entitiesSrv,this.entity$=null}ngOnInit(){this.idEntity=this.route.snapshot.paramMap.get("id"),this.idEntity&&this.getDetails(this.idEntity)}getDetails(idEntity){this.entity$=this.entitiesSrv.getOneEntity(idEntity).pipe((0,tap.b)(entity2=>this.seo.generateTags({title:`${entity2.name} | Entidad de Rinc\xf3n de Soto`,description:entity2.description,image:entity2.image})))}gotoList(){this.router.navigate([`/${entity.J.PATH_URL}`])}editItem(){this.router.navigate([`/${entity.J.PATH_URL}/${this.idEntity}/editar`])}}__name(EntityViewComponent,"EntityViewComponent"),EntityViewComponent.\u0275fac=__name(function(t){return new(t||EntityViewComponent)(core.Y36(router.gz),core.Y36(router.F0),core.Y36(seo_service.v),core.Y36(entities_service.c))},"EntityViewComponent_Factory"),EntityViewComponent.\u0275cmp=core.Xpm({type:EntityViewComponent,selectors:[["app-entity-view"]],decls:7,vars:7,consts:[[3,"title",4,"ngIf"],[1,"section-wrapper"],["class","item-view",4,"ngIf","ngIfElse"],["noEntityTemplate",""],[3,"title"],[1,"item-view"],[1,"row"],[1,"col-lg-3","col-md-4","col-12",2,"text-align","center"],[1,"img-thumbnail",3,"src"],[1,"col-lg-9","col-md-8","col-12"],["label","Datos de entidad",1,"tab-card-detail"],[1,"card-detail"],["matInput","","type","text","disabled","true","placeholder","Activo",3,"value"],["matSuffix",""],["matInput","","type","text","disabled","true","placeholder","Nombre",3,"value"],["matInput","","type","text","disabled","true","placeholder","Descripci\xf3n",3,"value"],[1,"card-chip-list"],["aria-label","Categories"],[4,"ngFor","ngForOf"],["label","M\xe1s info",1,"tab-card-detail"],["matInput","","type","text","disabled","true","placeholder","Rol por defecto",3,"value"],["matInput","","type","text","disabled","true","placeholder","Tipo de acto",3,"value"],["class","card-detail-block",4,"ngIf"],[1,"buttons","buttons-center"],["mat-fab","",1,"btn-1",3,"click"],["mat-fab","",1,"btn-extra",3,"click"],["mat-fab","","href","https://cards-dev.twitter.com/validator","target","blank",1,"btn-extra"],[1,"card-detail-block"],[1,"img-thumbnail",3,"src","alt"],[1,"desc"],[1,"name"]],template:__name(function(rf,ctx){if(1&rf&&(core.YNc(0,EntityViewComponent_app_section_header_0_Template,1,1,"app-section-header",0),core.ALo(1,"async"),core.TgZ(2,"div",1),core.YNc(3,EntityViewComponent_mat_card_3_Template,45,8,"mat-card",2),core.ALo(4,"async"),core.qZA(),core.YNc(5,EntityViewComponent_ng_template_5_Template,1,0,"ng-template",null,3,core.W1O)),2&rf){const _r2=core.MAs(6);core.Q6J("ngIf",core.lcZ(1,3,ctx.entity$)),core.xp6(3),core.Q6J("ngIf",core.lcZ(4,5,ctx.entity$))("ngIfElse",_r2)}},"EntityViewComponent_Template"),directives:[common.O5,section_header_component.I,card.a8,card.dn,tabs.SP,tabs.uX,form_field.KE,input.Nt,icon.Hw,form_field.R9,chips.qn,common.sg,card.hq,fesm2015_button.lW,fesm2015_button.zs,chips.HS],pipes:[common.Ov],styles:[""]});var fesm2015_forms=__webpack_require__(3679),finalize=__webpack_require__(68939),category_enum=__webpack_require__(71773),base=__webpack_require__(61160),entity_role_enum=__webpack_require__(41365),shedule_type_enum=__webpack_require__(35677),angular_fire_compat_storage=__webpack_require__(27525),places_service=__webpack_require__(60099),slide_toggle=__webpack_require__(45396),fesm2015_select=__webpack_require__(67441),fesm2015_core=__webpack_require__(72458);function EntityEditComponent_mat_card_2_mat_option_22_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-option",20),core._uU(1),core.qZA()),2&rf){const category_r9=ctx.$implicit;core.Q6J("value",category_r9),core.xp6(1),core.Oqu(category_r9)}}function EntityEditComponent_mat_card_2_mat_option_29_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-option",20),core._uU(1),core.qZA()),2&rf){const place_r10=ctx.$implicit;core.Q6J("value",place_r10),core.xp6(1),core.hij(" ",place_r10.name," ")}}function EntityEditComponent_mat_card_2_mat_option_35_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-option",20),core._uU(1),core.qZA()),2&rf){const rol_r12=ctx.$implicit;core.Q6J("value",rol_r12),core.xp6(1),core.hij(" ",rol_r12," ")}}function EntityEditComponent_mat_card_2_mat_option_42_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-option",20),core._uU(1),core.qZA()),2&rf){const scheduleType_r13=ctx.$implicit;core.Q6J("value",scheduleType_r13),core.xp6(1),core.hij(" ",scheduleType_r13," ")}}function EntityEditComponent_mat_card_2_Template(rf,ctx){if(1&rf){const _r15=core.EpF();core.TgZ(0,"mat-card",5),core.TgZ(1,"div",6),core.TgZ(2,"div",7),core.TgZ(3,"img",8),core.NdJ("click",__name(function(){return core.CHM(_r15),core.MAs(5).click()},"EntityEditComponent_mat_card_2_Template_img_click_3_listener")),core.qZA(),core.TgZ(4,"input",9,10),core.NdJ("change",__name(function($event){return core.CHM(_r15),core.oxw().uploadImage($event)},"EntityEditComponent_mat_card_2_Template_input_change_4_listener")),core.qZA(),core._UZ(6,"hr"),core.TgZ(7,"span",11),core.NdJ("click",__name(function(){return core.CHM(_r15),core.MAs(5).click()},"EntityEditComponent_mat_card_2_Template_span_click_7_listener")),core._uU(8,"Clica en la imagen para cambiar la foto"),core.qZA(),core.qZA(),core.TgZ(9,"div",12),core.TgZ(10,"form",13),core.NdJ("ngSubmit",__name(function(){return core.CHM(_r15),core.oxw().onSaveForm()},"EntityEditComponent_mat_card_2_Template_form_ngSubmit_10_listener")),core.TgZ(11,"mat-card-content"),core.TgZ(12,"mat-slide-toggle",14),core._uU(13,"Entidad activa"),core.qZA(),core.TgZ(14,"mat-form-field",15),core.TgZ(15,"mat-label"),core._uU(16,"Nombre de la entidad"),core.qZA(),core._UZ(17,"input",16),core.qZA(),core.TgZ(18,"mat-form-field",15),core.TgZ(19,"mat-label"),core._uU(20,"Categor\xedas"),core.qZA(),core.TgZ(21,"mat-select",17),core.YNc(22,EntityEditComponent_mat_card_2_mat_option_22_Template,2,2,"mat-option",18),core.qZA(),core.qZA(),core.TgZ(23,"mat-form-field",15),core.TgZ(24,"mat-label"),core._uU(25,"Lugar por defecto"),core.qZA(),core.TgZ(26,"mat-select",19),core.NdJ("selectionChange",__name(function($event){return core.CHM(_r15),core.oxw().onSelectionChanged($event)},"EntityEditComponent_mat_card_2_Template_mat_select_selectionChange_26_listener")),core.TgZ(27,"mat-option",20),core._uU(28," SIN ESPECIFICAR "),core.qZA(),core.YNc(29,EntityEditComponent_mat_card_2_mat_option_29_Template,2,2,"mat-option",18),core.ALo(30,"async"),core.qZA(),core.qZA(),core.TgZ(31,"mat-form-field",21),core.TgZ(32,"mat-label"),core._uU(33,"Rol por defecto"),core.qZA(),core.TgZ(34,"mat-select",22),core.YNc(35,EntityEditComponent_mat_card_2_mat_option_35_Template,2,2,"mat-option",18),core.qZA(),core.TgZ(36,"mat-hint"),core._uU(37,"Roles posibles ORGANIZA, JUEGA..."),core.qZA(),core.qZA(),core.TgZ(38,"mat-form-field",21),core.TgZ(39,"mat-label"),core._uU(40,"Tipo de acto por defecto"),core.qZA(),core.TgZ(41,"mat-select",23),core.YNc(42,EntityEditComponent_mat_card_2_mat_option_42_Template,2,2,"mat-option",18),core.qZA(),core.TgZ(43,"mat-hint"),core._uU(44,"Tipos posibles ACTO, PARTIDO, CONCIERTO..."),core.qZA(),core.qZA(),core.qZA(),core.TgZ(45,"mat-card-actions",24),core.TgZ(46,"button",25),core.TgZ(47,"mat-icon"),core._uU(48,"check"),core.qZA(),core.qZA(),core.TgZ(49,"button",26),core.NdJ("click",__name(function(){return core.CHM(_r15),core.oxw().gotoList()},"EntityEditComponent_mat_card_2_Template_button_click_49_listener")),core.TgZ(50,"mat-icon"),core._uU(51,"list"),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA(),core.qZA()}if(2&rf){const ctx_r0=core.oxw();core.xp6(3),core.Q6J("src",ctx_r0.entityForm.get("image").value,core.LSH),core.xp6(7),core.Q6J("formGroup",ctx_r0.entityForm),core.xp6(12),core.Q6J("ngForOf",ctx_r0.CATEGORIES),core.xp6(4),core.Q6J("compareWith",ctx_r0.compareFunction),core.xp6(1),core.Q6J("value",ctx_r0.SECTION_BLANK),core.xp6(2),core.Q6J("ngForOf",core.lcZ(30,12,ctx_r0.places$)),core.xp6(5),core.Q6J("value",ctx_r0.entityForm.get("roleDefault").value),core.xp6(1),core.Q6J("ngForOf",ctx_r0.ROLES),core.xp6(6),core.Q6J("value",ctx_r0.entityForm.get("scheduleTypeDefault").value),core.xp6(1),core.Q6J("ngForOf",ctx_r0.SCHEDULE_TYPES),core.xp6(4),core.Q6J("title",ctx_r0.entityForm.valid?"Guardar con los datos introducidos":"Deshabilitado hasta que los datos sean v\xe1lidos")("disabled",!ctx_r0.entityForm.valid)}}function EntityEditComponent_div_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",27),core._uU(1),core.qZA()),2&rf){const ctx_r1=core.oxw();core.xp6(1),core.hij(" ",ctx_r1.errorMessage," ")}}function EntityEditComponent_ng_template_4_Template(rf,ctx){1&rf&&core._uU(0," No existe tal entidad\n")}__name(EntityEditComponent_mat_card_2_mat_option_22_Template,"EntityEditComponent_mat_card_2_mat_option_22_Template"),__name(EntityEditComponent_mat_card_2_mat_option_29_Template,"EntityEditComponent_mat_card_2_mat_option_29_Template"),__name(EntityEditComponent_mat_card_2_mat_option_35_Template,"EntityEditComponent_mat_card_2_mat_option_35_Template"),__name(EntityEditComponent_mat_card_2_mat_option_42_Template,"EntityEditComponent_mat_card_2_mat_option_42_Template"),__name(EntityEditComponent_mat_card_2_Template,"EntityEditComponent_mat_card_2_Template"),__name(EntityEditComponent_div_3_Template,"EntityEditComponent_div_3_Template"),__name(EntityEditComponent_ng_template_4_Template,"EntityEditComponent_ng_template_4_Template");class EntityEditComponent{constructor(afStorage,fb,route,router2,logSrv,entitiesSrv,placeSrv){this.afStorage=afStorage,this.fb=fb,this.route=route,this.router=router2,this.logSrv=logSrv,this.entitiesSrv=entitiesSrv,this.placeSrv=placeSrv,this.pageTitle="Creaci\xf3n de una nueva entidad",this.errorMessage="",this.listOfObservers=[],this.CATEGORIES=category_enum.iv,this.ROLES=entity.J.ROLES,this.SCHEDULE_TYPES=shedule_type_enum.Fp,this.SECTION_BLANK=base.X.InitDefault()}ngOnInit(){const idEntity=this.route.snapshot.paramMap.get("id");idEntity&&(this.getDetails(idEntity),this.entityForm=this.fb.group({id:[{value:"0",disabled:!0}],active:!0,name:["",[fesm2015_forms.kI.required,fesm2015_forms.kI.minLength(3),fesm2015_forms.kI.maxLength(50)]],image:entity.J.IMAGE_DEFAULT,categories:[],place:[this.SECTION_BLANK,[fesm2015_forms.kI.required]],roleDefault:[entity_role_enum.Y.Default],scheduleTypeDefault:[""]}),this.places$=this.placeSrv.getAllPlacesBase())}getDetails(idEntity){if("0"===idEntity)this.pageTitle="Creaci\xf3n de una nueva entidad",this.entity=entity.J.InitDefault();else{const subs1$=this.entitiesSrv.getOneEntity(idEntity).subscribe({next:entity2=>{this.entity=entity2,this.displayEntity(),this.logSrv.info(JSON.stringify(this.entity))},error:err=>{this.errorMessage=`Error: ${err}`}});this.listOfObservers.push(subs1$)}}displayEntity(){var _a,_b;this.entityForm&&this.entityForm.reset(),"0"===this.entity.id?this.pageTitle="Creando una nueva entidad":this.pageTitle=`Editando la entidad ${this.entity.name}`,this.entityForm.patchValue({id:this.entity.id,active:this.entity.active,name:this.entity.name,image:null!==(_a=this.entity.image)&&void 0!==_a?_a:entity.J.IMAGE_DEFAULT,categories:null!==(_b=this.entity.categories)&&void 0!==_b?_b:[],place:this.entity.place?{id:this.entity.place.id,name:this.entity.place.name,image:this.entity.place.image}:this.SECTION_BLANK,roleDefault:this.entity.roleDefault,scheduleTypeDefault:this.entity.scheduleTypeDefault}),this.entityForm.controls.id.setValue(this.entity.id)}onSelectionChanged(event){this.placeBaseSelected=event.value}compareFunction(o1,o2){return o1.name===o2.name&&o1.id===o2.id}onResetForm(){this.entityForm.reset()}onSaveForm(){if(this.entityForm.valid){const entityItem=Object.assign(Object.assign({},this.entity),this.entityForm.value);this.compareFunction(entityItem.place,this.SECTION_BLANK)&&(this.logSrv.info("No hay lugar"),entityItem.place=null),"0"===entityItem.id?this.entitiesSrv.addEntity(entityItem):this.entitiesSrv.updateEntity(entityItem),this.router.navigate([entity.J.PATH_URL])}else this.errorMessage="Por favor, corrige los mensajes de validaci\xf3n."}onSaveComplete(){this.entityForm.reset(),sweetalert2_all_default().fire({icon:"success",title:"Datos guardados con \xe9xito",text:`Los datos de ${this.entity.name} se han guardado correctamente`}),this.router.navigate([`/${entity.J.PATH_URL}`])}gotoList(){this.entityForm.reset(),this.router.navigate([`/${entity.J.PATH_URL}`])}uploadImage(event){const file=event.target.files[0],filePath=file.name,fileRef=this.afStorage.ref(filePath),task=this.afStorage.upload(filePath,file);this.uploadPercent=task.percentageChanges(),task.snapshotChanges().pipe((0,finalize.x)(()=>{fileRef.getDownloadURL().subscribe(imageUrl=>{this.entity.image=imageUrl,this.entityForm.patchValue({image:this.entity.image})})})).subscribe()}ngOnDestroy(){this.listOfObservers.forEach(sub=>sub.unsubscribe())}}__name(EntityEditComponent,"EntityEditComponent"),EntityEditComponent.\u0275fac=__name(function(t){return new(t||EntityEditComponent)(core.Y36(angular_fire_compat_storage.Q1),core.Y36(fesm2015_forms.qu),core.Y36(router.gz),core.Y36(router.F0),core.Y36(log_service.$V),core.Y36(entities_service.c),core.Y36(places_service.k))},"EntityEditComponent_Factory"),EntityEditComponent.\u0275cmp=core.Xpm({type:EntityEditComponent,selectors:[["app-entity-edit"]],decls:6,vars:4,consts:[[3,"title"],[1,"section-wrapper"],["class","item-edit",4,"ngIf","ngIfElse"],["class","alert-danger",4,"ngIf"],["noEntityTemplate",""],[1,"item-edit"],[1,"row"],[1,"col-lg-3","col-md-4","col-12",2,"text-align","center"],[1,"img-thumbnail",3,"src","click"],["hidden","","type","file",3,"change"],["inputImageProfile",""],[1,"small",3,"click"],[1,"col-lg-9","col-md-8","col-12"],[3,"formGroup","ngSubmit"],["formControlName","active",1,"mb-3","ml-2"],["appearance","outline"],["matInput","","type","text","formControlName","name","placeholder","Nombre"],["formControlName","categories","multiple",""],[3,"value",4,"ngFor","ngForOf"],["placeholder","Lugar","formControlName","place",3,"compareWith","selectionChange"],[3,"value"],["appearance","outline",1,"col-6"],["formControlName","roleDefault",3,"value"],["formControlName","scheduleTypeDefault",3,"value"],[1,"buttons"],["mat-fab","","type","submit",1,"btn-1",3,"title","disabled"],["mat-fab","",1,"btn-1",3,"click"],[1,"alert-danger"]],template:__name(function(rf,ctx){if(1&rf&&(core._UZ(0,"app-section-header",0),core.TgZ(1,"div",1),core.YNc(2,EntityEditComponent_mat_card_2_Template,52,14,"mat-card",2),core.YNc(3,EntityEditComponent_div_3_Template,2,1,"div",3),core.qZA(),core.YNc(4,EntityEditComponent_ng_template_4_Template,1,0,"ng-template",null,4,core.W1O)),2&rf){const _r2=core.MAs(5);core.Q6J("title",ctx.pageTitle),core.xp6(2),core.Q6J("ngIf",ctx.entity)("ngIfElse",_r2),core.xp6(1),core.Q6J("ngIf",ctx.errorMessage)}},"EntityEditComponent_Template"),directives:[section_header_component.I,common.O5,card.a8,fesm2015_forms._Y,fesm2015_forms.JL,fesm2015_forms.sg,card.dn,slide_toggle.Rr,fesm2015_forms.JJ,fesm2015_forms.u,form_field.KE,form_field.hX,input.Nt,fesm2015_forms.Fj,fesm2015_select.gD,common.sg,fesm2015_core.ey,form_field.bx,card.hq,fesm2015_button.lW,icon.Hw],pipes:[common.Ov],styles:["form[_ngcontent-%COMP%]{background-color:#fff;color:#000}"]});const routes=[{path:"",component:EntitiesComponent},{path:":id",component:EntityViewComponent},{path:":id/editar",component:EntityEditComponent}];class EntitiesRoutingModule{}__name(EntitiesRoutingModule,"EntitiesRoutingModule"),EntitiesRoutingModule.\u0275fac=__name(function(t){return new(t||EntitiesRoutingModule)},"EntitiesRoutingModule_Factory"),EntitiesRoutingModule.\u0275mod=core.oAB({type:EntitiesRoutingModule}),EntitiesRoutingModule.\u0275inj=core.cJS({imports:[[router.Bz.forChild(routes)],router.Bz]});var shared_module=__webpack_require__(55083);class EntitiesModule{}__name(EntitiesModule,"EntitiesModule"),EntitiesModule.\u0275fac=__name(function(t){return new(t||EntitiesModule)},"EntitiesModule_Factory"),EntitiesModule.\u0275mod=core.oAB({type:EntitiesModule}),EntitiesModule.\u0275inj=core.cJS({imports:[[common.ez,shared_module.m,EntitiesRoutingModule]]})}};