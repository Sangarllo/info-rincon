exports.ids=[2],exports.modules={PZDq:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NewsModule",function(){return NewsModule});var shared_module=__webpack_require__("PCNd"),fesm2015_router=__webpack_require__("tyNb"),paginator=__webpack_require__("M9IT"),sort=__webpack_require__("Dh3D"),table=__webpack_require__("+0xr"),map=__webpack_require__("lJxs"),sweetalert2_all=__webpack_require__("PSD3"),sweetalert2_all_default=__webpack_require__.n(sweetalert2_all),base=__webpack_require__("u2ly"),source=__webpack_require__("dA4G"),status_enum=__webpack_require__("Gckd");class news_NewsItem{constructor(id,active,name,image,baseType,status,focused,categories,description,timestamp,source,sourceUrl){this.id=id,this.active=active,this.name=name,this.image=image,this.baseType=baseType,this.status=status,this.focused=focused,this.categories=categories,this.description=description,this.timestamp=timestamp,this.source=source,this.sourceUrl=sourceUrl}getUrl(){return`${news_NewsItem.PATH_URL}/${this.id}`}static InitDefault(){return new news_NewsItem("0",!0,"",news_NewsItem.IMAGE_DEFAULT,base.b.NEWS_ITEM,status_enum.b.Visible,!0,[],"",null,source.a,null)}}news_NewsItem.IMAGE_DEFAULT="assets/images/news/default.png",news_NewsItem.PATH_URL="noticias",news_NewsItem.STATUS=status_enum.a;var core=__webpack_require__("fXoL"),utils_service=__webpack_require__("OiFK"),log_service=__webpack_require__("oQ8E"),spinner_service=__webpack_require__("+YuW"),angular_fire_firestore=__webpack_require__("wD+u"),appointments_service=__webpack_require__("R5Yx");class news_services_NewsService{constructor(afs,appointmentSvc){this.afs=afs,this.appointmentSvc=appointmentSvc,this.newsCollection=afs.collection("noticias")}getAllNews(showOnlyActive,modeDashboard,sizeDashboard){return this.newsCollection=modeDashboard?this.afs.collection("noticias",ref=>ref.where("focused","==",!0).where("active","==",!0).where("status","==","VISIBLE").orderBy("timestamp","desc").limit(sizeDashboard)):showOnlyActive?this.afs.collection("noticias",ref=>ref.where("active","==",!0).where("status","==","VISIBLE").orderBy("timestamp","desc")):this.afs.collection("noticias",ref=>ref.orderBy("timestamp","desc")),this.newsCollection.valueChanges()}getAllNewsBase(){return this.newsCollection=this.afs.collection("noticias",ref=>ref.where("active","==",!0).orderBy("name")),this.newsCollection.valueChanges().pipe(Object(map.a)(news=>news.map(newsItem=>{if(newsItem.active)return{id:newsItem.id,active:newsItem.active,name:newsItem.name,image:newsItem.image,baseType:base.b.NEWS_ITEM,description:newsItem.description}})))}getOneNewsItem(idNewsItem){return this.newsCollection.doc(idNewsItem).valueChanges({idField:"id"})}addNewsItem(newsItem){newsItem.id=this.afs.createId(),newsItem.timestamp=this.appointmentSvc.getTimestamp(),this.newsCollection.doc(newsItem.id).set(newsItem)}updateNewsItem(newsItem){const idNewsItem=newsItem.id;this.newsItemDoc=this.afs.doc(`noticias/${idNewsItem}`),newsItem.timestamp=this.appointmentSvc.getTimestamp(),this.newsItemDoc.update(newsItem)}deleteNewsItem(newsItem){const idNewsItem=newsItem.id;newsItem.active=!1,newsItem.timestamp=this.appointmentSvc.getTimestamp(),this.newsItemDoc=this.afs.doc(`noticias/${idNewsItem}`),this.newsItemDoc.update(newsItem)}}news_services_NewsService.\u0275fac=function NewsService_Factory(t){return new(t||news_services_NewsService)(core.ad(angular_fire_firestore.a),core.ad(appointments_service.a))},news_services_NewsService.\u0275prov=core.Mc({token:news_services_NewsService,factory:news_services_NewsService.\u0275fac,providedIn:"root"});var section_header_component=__webpack_require__("PdlT"),form_field=__webpack_require__("kmnG"),input=__webpack_require__("qFsG"),icon=__webpack_require__("NFeN"),fesm2015_button=__webpack_require__("bTqV"),common=__webpack_require__("ofXK");function NewsComponent_th_11_Template(rf,ctx){1&rf&&(core.Wc(0,"th",30),core.Kd(1,"Id."),core.Vc())}function NewsComponent_td_12_Template(rf,ctx){if(1&rf&&(core.Wc(0,"td",31),core.Kd(1),core.Vc()),2&rf){const element_r20=ctx.$implicit;core.Ec(1),core.Ld(element_r20.id)}}function NewsComponent_th_14_Template(rf,ctx){1&rf&&(core.Wc(0,"th",30),core.Kd(1,"Estado"),core.Vc())}function NewsComponent_td_15_Template(rf,ctx){if(1&rf&&(core.Wc(0,"td",31),core.Wc(1,"div",32),core.Kd(2),core.Vc(),core.Vc()),2&rf){const element_r21=ctx.$implicit;core.Gc(element_r21.status),core.Ec(2),core.Ld(element_r21.status)}}function NewsComponent_th_17_Template(rf,ctx){1&rf&&(core.Wc(0,"th",33),core.Kd(1,"Fecha Actualizaci\xf3n"),core.Vc())}function NewsComponent_td_18_Template(rf,ctx){if(1&rf&&(core.Wc(0,"td",31),core.Kd(1),core.Vc()),2&rf){const element_r22=ctx.$implicit;core.Ec(1),core.Md("hace ",element_r22.timestamp,"")}}function NewsComponent_th_20_Template(rf,ctx){1&rf&&core.Rc(0,"th",34)}function NewsComponent_td_21_img_1_Template(rf,ctx){if(1&rf){const _r27=core.Xc();core.Wc(0,"img",37),core.dd("click",function NewsComponent_td_21_img_1_Template_img_click_0_listener(){core.Bd(_r27);const element_r23=core.hd().$implicit;return core.hd().gotoItem(element_r23)}),core.Vc()}if(2&rf){const element_r23=core.hd().$implicit;core.od("src",null==element_r23||null==element_r23.source?null:element_r23.source.image,core.Dd)}}function NewsComponent_td_21_Template(rf,ctx){if(1&rf&&(core.Wc(0,"td",35),core.Id(1,NewsComponent_td_21_img_1_Template,1,1,"img",36),core.Vc()),2&rf){const element_r23=ctx.$implicit;core.Ec(1),core.od("ngIf",element_r23.source)}}function NewsComponent_th_23_Template(rf,ctx){1&rf&&(core.Wc(0,"th",30),core.Kd(1,"Fuente"),core.Vc())}function NewsComponent_td_24_Template(rf,ctx){if(1&rf&&(core.Wc(0,"td",31),core.Kd(1),core.Vc()),2&rf){const newsItem_r29=ctx.$implicit;core.Ec(1),core.Md(" ",null==newsItem_r29||null==newsItem_r29.source?null:newsItem_r29.source.name," ")}}function NewsComponent_th_26_Template(rf,ctx){1&rf&&(core.Wc(0,"th",38),core.Kd(1,"Info de la noticia"),core.Vc())}function NewsComponent_td_27_Template(rf,ctx){if(1&rf){const _r32=core.Xc();core.Wc(0,"td",39),core.Wc(1,"button",40),core.dd("click",function NewsComponent_td_27_Template_button_click_1_listener(){core.Bd(_r32);const item_r30=ctx.$implicit;return core.hd().gotoUrl(item_r30)}),core.Wc(2,"mat-icon"),core.Kd(3,"open_in_new"),core.Vc(),core.Vc(),core.Wc(4,"div",41),core.dd("click",function NewsComponent_td_27_Template_div_click_4_listener(){core.Bd(_r32);const item_r30=ctx.$implicit;return core.hd().gotoItem(item_r30)}),core.Vc(),core.Wc(5,"div",42),core.dd("click",function NewsComponent_td_27_Template_div_click_5_listener(){core.Bd(_r32);const item_r30=ctx.$implicit;return core.hd().gotoItem(item_r30)}),core.Kd(6),core.Vc(),core.Wc(7,"div",43),core.dd("click",function NewsComponent_td_27_Template_div_click_7_listener(){core.Bd(_r32);const item_r30=ctx.$implicit;return core.hd().gotoItem(item_r30)}),core.Kd(8),core.Vc(),core.Vc()}if(2&rf){const item_r30=ctx.$implicit;core.Gc(item_r30.status),core.Ec(6),core.Md(" actualizado hace ",item_r30.timestamp," "),core.Ec(2),core.Md(" ",item_r30.name," ")}}function NewsComponent_th_29_Template(rf,ctx){1&rf&&(core.Wc(0,"th",44),core.Kd(1,"Categor\xedas"),core.Vc())}function NewsComponent_td_30_Template(rf,ctx){if(1&rf&&(core.Wc(0,"td",45),core.Kd(1),core.Vc()),2&rf){const newsItem_r36=ctx.$implicit;core.Ec(1),core.Ld(newsItem_r36.description)}}function NewsComponent_th_32_Template(rf,ctx){1&rf&&(core.Wc(0,"th",33),core.Kd(1,"Nombre"),core.Vc())}function NewsComponent_td_33_Template(rf,ctx){if(1&rf&&(core.Wc(0,"td",31),core.Kd(1),core.Vc()),2&rf){const newsItem_r37=ctx.$implicit;core.Ec(1),core.Ld(newsItem_r37.name)}}function NewsComponent_th_35_Template(rf,ctx){1&rf&&(core.Wc(0,"th",30),core.Kd(1,"Acciones "),core.Vc())}function NewsComponent_td_36_Template(rf,ctx){if(1&rf){const _r40=core.Xc();core.Wc(0,"td",31),core.Wc(1,"button",46),core.dd("click",function NewsComponent_td_36_Template_button_click_1_listener(){core.Bd(_r40);const newsItem_r38=ctx.$implicit;return core.hd().gotoUrl(newsItem_r38)}),core.Wc(2,"mat-icon",47),core.Kd(3," open_in_new "),core.Vc(),core.Vc(),core.Wc(4,"button",48),core.dd("click",function NewsComponent_td_36_Template_button_click_4_listener(){core.Bd(_r40);const newsItem_r38=ctx.$implicit;return core.hd().gotoItem(newsItem_r38)}),core.Wc(5,"mat-icon",49),core.Kd(6," remove_red_eye "),core.Vc(),core.Vc(),core.Wc(7,"button",50),core.dd("click",function NewsComponent_td_36_Template_button_click_7_listener(){core.Bd(_r40);const newsItem_r38=ctx.$implicit;return core.hd().editItem(newsItem_r38)}),core.Wc(8,"mat-icon",51),core.Kd(9," build_circle "),core.Vc(),core.Vc(),core.Wc(10,"button",52),core.dd("click",function NewsComponent_td_36_Template_button_click_10_listener(){core.Bd(_r40);const newsItem_r38=ctx.$implicit;return core.hd().deleteItem(newsItem_r38)}),core.Wc(11,"mat-icon",53),core.Kd(12," delete "),core.Vc(),core.Vc(),core.Vc()}if(2&rf){const newsItem_r38=ctx.$implicit;core.Ec(4),core.od("disabled","VISIBLE"!==newsItem_r38.status)}}function NewsComponent_tr_37_Template(rf,ctx){1&rf&&core.Rc(0,"tr",54)}function NewsComponent_tr_38_Template(rf,ctx){1&rf&&core.Rc(0,"tr",55)}const _c0=function(){return[5,10,25,100]};class news_component_NewsComponent{constructor(router,utilSrv,logSrv,spinnerSvc,newsSrv){this.router=router,this.utilSrv=utilSrv,this.logSrv=logSrv,this.spinnerSvc=spinnerSvc,this.newsSrv=newsSrv,this.listOfObservers=[],this.dataSource=new table.k,this.displayedColumns=["status","id","timestamp","sourceImage","sourceName","collapsed-info","name","categories","actions4"],this.spinnerSvc.show()}ngOnInit(){const subs1$=this.newsSrv.getAllNews(!1,!1).pipe(Object(map.a)(newsItems=>newsItems.map(newsItem=>(newsItem.description=newsItem.categories?newsItem.categories.reduce((acc,value)=>`${acc} ${value.substr(0,value.indexOf(" "))}`,""):"",newsItem.timestamp=this.utilSrv.getDistanceTimestamp(newsItem.timestamp),Object.assign({},newsItem))))).subscribe(newsItems=>{this.newsItems=newsItems,this.dataSource=new table.k(this.newsItems),this.spinnerSvc.hide(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort});this.listOfObservers.push(subs1$)}applyFilter(filterValue){this.dataSource.filter=filterValue.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}gotoItem(newsItem){this.router.navigate([`${news_NewsItem.PATH_URL}/${newsItem.id}`])}gotoUrl(newsItem){const externalUrl=newsItem.sourceUrl;sweetalert2_all_default.a.fire({title:"\xbfEst\xe1s seguro?",html:`Si pulsas OK saldr\xe1s de la aplicaci\xf3n para ir a una direcci\xf3n externa:<br/><br/><a href='${externalUrl}' style='color:red'>${externalUrl}</a>`,imageUrl:newsItem.source.image,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xed, acceder a la noticia"}).then(result=>{result.isConfirmed&&window.open(newsItem.sourceUrl,"_blank")})}editItem(newsItem){this.router.navigate([`${news_NewsItem.PATH_URL}/${newsItem.id}/editar`])}deleteItem(newsItem){this.logSrv.info(`Borrando ${newsItem.id}`),sweetalert2_all_default.a.fire({title:"\xbfEst\xe1s seguro?",text:"No podr\xe1s deshacer esta acci\xf3n de borrado!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\xa1S\xed, b\xf3rralo!"}).then(result=>{result.isConfirmed&&(this.newsSrv.deleteNewsItem(newsItem),sweetalert2_all_default.a.fire("\xa1Borrada!",`${newsItem.name} ha sido borrada`,"success"))})}addItem(){this.router.navigate([`${news_NewsItem.PATH_URL}/0/editar`])}ngOnDestroy(){this.listOfObservers.forEach(sub=>sub.unsubscribe())}}news_component_NewsComponent.\u0275fac=function NewsComponent_Factory(t){return new(t||news_component_NewsComponent)(core.Qc(fesm2015_router.b),core.Qc(utils_service.b),core.Qc(log_service.a),core.Qc(spinner_service.a),core.Qc(news_services_NewsService))},news_component_NewsComponent.\u0275cmp=core.Kc({type:news_component_NewsComponent,selectors:[["app-news"]],viewQuery:function NewsComponent_Query(rf,ctx){if(1&rf&&(core.Od(paginator.a,1),core.Od(sort.a,1)),2&rf){let _t;core.yd(_t=core.ed())&&(ctx.paginator=_t.first),core.yd(_t=core.ed())&&(ctx.sort=_t.first)}},decls:44,vars:7,consts:[[3,"title"],[1,"section-wrapper"],["matInput","","placeholder","Filtrar",3,"keyup"],["matSuffix",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","class","td-extra-lg",4,"matHeaderCellDef"],["mat-cell","","class","td-extra-lg",4,"matCellDef"],["matColumnDef","status"],["mat-cell","","class","td-extra-lg",3,"class",4,"matCellDef"],["matColumnDef","timestamp"],["mat-header-cell","","class","td-extra-lg","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","sourceImage"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","sourceName"],["matColumnDef","collapsed-info"],["mat-header-cell","","class","td-collapsed-info","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","td-collapsed-info",3,"class",4,"matCellDef"],["matColumnDef","categories"],["mat-header-cell","","class","td-extra-md","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","class","td-extra-md",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","actions4"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],[1,"text-center","m-3"],["mat-fab","","type","button","color","primary",3,"click"],["mat-header-cell","",1,"td-extra-lg"],["mat-cell","",1,"td-extra-lg"],[1,"inside"],["mat-header-cell","","mat-sort-header","",1,"td-extra-lg"],["mat-header-cell",""],["mat-cell",""],["class","img-thumbnail","alt","element.name",3,"src","click",4,"ngIf"],["alt","element.name",1,"img-thumbnail",3,"src","click"],["mat-header-cell","","mat-sort-header","",1,"td-collapsed-info"],["mat-cell","",1,"td-collapsed-info"],["mat-mini-fab","","color","primary","aria-label","Establecer como alerta",1,"button-collapsed",3,"click"],[1,"inside",3,"click"],[2,"font-size","smaller","color","gray",3,"click"],[3,"click"],["mat-header-cell","","mat-sort-header","",1,"td-extra-md"],["mat-cell","",1,"td-extra-md"],["mat-icon-button","","matTooltip","Click to visit news",1,"iconbutton",3,"click"],["aria-label","Go to URL",1,"btn-1"],["mat-icon-button","","matTooltip","Click to View",1,"iconbutton",3,"disabled","click"],["aria-label","View",1,"btn-1"],["mat-icon-button","","matTooltip","Click to Edit",1,"iconbutton",3,"click"],["aria-label","Edit",1,"btn-1"],["mat-icon-button","","matTooltip","Click to Delete",1,"iconbutton",3,"click"],["aria-label","Delete",1,"btn-1"],["mat-header-row",""],["mat-row",""]],template:function NewsComponent_Template(rf,ctx){1&rf&&(core.Rc(0,"app-section-header",0),core.Wc(1,"div",1),core.Wc(2,"mat-form-field"),core.Wc(3,"mat-label"),core.Kd(4,"Filtro"),core.Vc(),core.Wc(5,"input",2),core.dd("keyup",function NewsComponent_Template_input_keyup_5_listener($event){return ctx.applyFilter($event.target.value)}),core.Vc(),core.Wc(6,"mat-icon",3),core.Kd(7,"search"),core.Vc(),core.Vc(),core.Wc(8,"div",4),core.Wc(9,"table",5),core.Uc(10,6),core.Id(11,NewsComponent_th_11_Template,2,0,"th",7),core.Id(12,NewsComponent_td_12_Template,2,1,"td",8),core.Tc(),core.Uc(13,9),core.Id(14,NewsComponent_th_14_Template,2,0,"th",7),core.Id(15,NewsComponent_td_15_Template,3,3,"td",10),core.Tc(),core.Uc(16,11),core.Id(17,NewsComponent_th_17_Template,2,0,"th",12),core.Id(18,NewsComponent_td_18_Template,2,1,"td",8),core.Tc(),core.Uc(19,13),core.Id(20,NewsComponent_th_20_Template,1,0,"th",14),core.Id(21,NewsComponent_td_21_Template,2,1,"td",15),core.Tc(),core.Uc(22,16),core.Id(23,NewsComponent_th_23_Template,2,0,"th",7),core.Id(24,NewsComponent_td_24_Template,2,1,"td",8),core.Tc(),core.Uc(25,17),core.Id(26,NewsComponent_th_26_Template,2,0,"th",18),core.Id(27,NewsComponent_td_27_Template,9,4,"td",19),core.Tc(),core.Uc(28,20),core.Id(29,NewsComponent_th_29_Template,2,0,"th",21),core.Id(30,NewsComponent_td_30_Template,2,1,"td",22),core.Tc(),core.Uc(31,23),core.Id(32,NewsComponent_th_32_Template,2,0,"th",12),core.Id(33,NewsComponent_td_33_Template,2,1,"td",8),core.Tc(),core.Uc(34,24),core.Id(35,NewsComponent_th_35_Template,2,0,"th",7),core.Id(36,NewsComponent_td_36_Template,13,1,"td",8),core.Tc(),core.Id(37,NewsComponent_tr_37_Template,1,0,"tr",25),core.Id(38,NewsComponent_tr_38_Template,1,0,"tr",26),core.Vc(),core.Rc(39,"mat-paginator",27),core.Vc(),core.Wc(40,"div",28),core.Wc(41,"button",29),core.dd("click",function NewsComponent_Template_button_click_41_listener(){return ctx.addItem()}),core.Wc(42,"mat-icon"),core.Kd(43,"add"),core.Vc(),core.Vc(),core.Vc(),core.Vc()),2&rf&&(core.od("title","Panel de Configuraci\xf3n de Noticias"),core.Ec(9),core.od("dataSource",ctx.dataSource),core.Ec(28),core.od("matHeaderRowDef",ctx.displayedColumns),core.Ec(1),core.od("matRowDefColumns",ctx.displayedColumns),core.Ec(1),core.od("pageSizeOptions",core.pd(6,_c0))("pageSize",10))},directives:[section_header_component.a,form_field.c,form_field.g,input.b,icon.a,form_field.h,table.j,sort.a,table.c,table.e,table.b,table.g,table.i,paginator.a,fesm2015_button.b,table.d,table.a,sort.b,common.n,table.f,table.h],styles:[""]});var seo_service=__webpack_require__("KBIk"),card=__webpack_require__("Wp6s"),chips=__webpack_require__("A5z7");function NewsViewComponent_mat_card_1_div_8_mat_chip_2_Template(rf,ctx){if(1&rf&&(core.Wc(0,"mat-chip"),core.Kd(1),core.Vc()),2&rf){const category_r7=ctx.$implicit;core.Ec(1),core.Ld(category_r7)}}function NewsViewComponent_mat_card_1_div_8_Template(rf,ctx){if(1&rf&&(core.Wc(0,"div"),core.Wc(1,"mat-chip-list",14),core.Id(2,NewsViewComponent_mat_card_1_div_8_mat_chip_2_Template,2,1,"mat-chip",15),core.Vc(),core.Vc()),2&rf){const ctx_r3=core.hd(2);core.Ec(2),core.od("ngForOf",ctx_r3.newsItem.categories)}}function NewsViewComponent_mat_card_1_div_9_Template(rf,ctx){if(1&rf&&core.Rc(0,"div",16),2&rf){const ctx_r4=core.hd(2);core.od("innerHTML",ctx_r4.newsItem.description,core.Cd)}}function NewsViewComponent_mat_card_1_div_10_Template(rf,ctx){if(1&rf){const _r9=core.Xc();core.Wc(0,"div"),core.Wc(1,"span"),core.Kd(2,"Fuente:"),core.Vc(),core.Wc(3,"h2"),core.Wc(4,"button",17),core.dd("click",function NewsViewComponent_mat_card_1_div_10_Template_button_click_4_listener(){core.Bd(_r9);return core.hd(2).gotoUrl()}),core.Wc(5,"mat-icon"),core.Kd(6,"open_in_new"),core.Vc(),core.Vc(),core.Kd(7),core.Vc(),core.Vc()}if(2&rf){const ctx_r5=core.hd(2);core.Ec(7),core.Md(" \xa0 ",ctx_r5.newsItem.source.name," ")}}function NewsViewComponent_mat_card_1_Template(rf,ctx){if(1&rf){const _r11=core.Xc();core.Wc(0,"mat-card",3),core.Wc(1,"div",4),core.Wc(2,"div",5),core.Rc(3,"img",6),core.Vc(),core.Wc(4,"div",7),core.Wc(5,"mat-card-content",3),core.Wc(6,"div",8),core.Kd(7),core.Vc(),core.Id(8,NewsViewComponent_mat_card_1_div_8_Template,3,1,"div",9),core.Id(9,NewsViewComponent_mat_card_1_div_9_Template,1,1,"div",10),core.Id(10,NewsViewComponent_mat_card_1_div_10_Template,8,1,"div",9),core.Vc(),core.Wc(11,"mat-card-actions",11),core.Wc(12,"button",12),core.dd("click",function NewsViewComponent_mat_card_1_Template_button_click_12_listener(){core.Bd(_r11);return core.hd().gotoList()}),core.Wc(13,"mat-icon"),core.Kd(14,"list"),core.Vc(),core.Vc(),core.Wc(15,"button",13),core.dd("click",function NewsViewComponent_mat_card_1_Template_button_click_15_listener(){core.Bd(_r11);return core.hd().editItem()}),core.Wc(16,"mat-icon"),core.Kd(17,"edit"),core.Vc(),core.Vc(),core.Vc(),core.Vc(),core.Vc(),core.Vc()}if(2&rf){const ctx_r0=core.hd();core.Ec(3),core.od("src",ctx_r0.newsItem.source.image,core.Dd),core.Ec(4),core.Ld(ctx_r0.newsItem.name),core.Ec(1),core.od("ngIf",(null==ctx_r0.newsItem.categories?null:ctx_r0.newsItem.categories.length)>0),core.Ec(1),core.od("ngIf",ctx_r0.notice.description),core.Ec(1),core.od("ngIf",ctx_r0.newsItem.source)}}function NewsViewComponent_ng_template_2_Template(rf,ctx){1&rf&&core.Kd(0," No existe tal noticia\n")}class news_view_component_NewsViewComponent{constructor(route,router,seo,logSrv,newsSrv){this.route=route,this.router=router,this.seo=seo,this.logSrv=logSrv,this.newsSrv=newsSrv,this.listOfObservers=[]}ngOnInit(){this.idNewsItem=this.route.snapshot.paramMap.get("id"),this.idNewsItem&&this.getDetails(this.idNewsItem)}getDetails(idNewsItem){const subs1$=this.newsSrv.getOneNewsItem(idNewsItem).subscribe(newsItem=>{this.urlNewsItem=newsItem.sourceUrl,this.newsItem=newsItem,this.seo.generateTags({title:`${newsItem.name} | ${newsItem.source}`,description:newsItem.description,image:newsItem.image})});this.listOfObservers.push(subs1$)}gotoUrl(){window.open(this.urlNewsItem,"_blank")}gotoList(){this.router.navigate([`/${news_NewsItem.PATH_URL}`])}editItem(){this.router.navigate([`/${news_NewsItem.PATH_URL}/${this.idNewsItem}/editar`])}ngOnDestroy(){this.listOfObservers.forEach(sub=>sub.unsubscribe())}}news_view_component_NewsViewComponent.\u0275fac=function NewsViewComponent_Factory(t){return new(t||news_view_component_NewsViewComponent)(core.Qc(fesm2015_router.a),core.Qc(fesm2015_router.b),core.Qc(seo_service.a),core.Qc(log_service.a),core.Qc(news_services_NewsService))},news_view_component_NewsViewComponent.\u0275cmp=core.Kc({type:news_view_component_NewsViewComponent,selectors:[["app-news-view"]],decls:4,vars:2,consts:[[1,"section-wrapper"],["class","item-view",4,"ngIf","ngIfElse"],["noNewsTemplate",""],[1,"item-view"],[1,"row"],[1,"col-lg-3","col-md-4","col-12",2,"text-align","center"],[1,"img-thumbnail",3,"src"],[1,"col-lg-9","col-md-8","col-12"],[1,"title"],[4,"ngIf"],["class","description",3,"innerHTML",4,"ngIf"],[1,"buttons","buttons-center"],["mat-fab","",1,"btn-1",3,"click"],["mat-fab","",1,"btn-extra",3,"click"],["aria-label","Categories"],[4,"ngFor","ngForOf"],[1,"description",3,"innerHTML"],["mat-raised-button","","type","button","color","primary",3,"click"]],template:function NewsViewComponent_Template(rf,ctx){if(1&rf&&(core.Wc(0,"div",0),core.Id(1,NewsViewComponent_mat_card_1_Template,18,5,"mat-card",1),core.Vc(),core.Id(2,NewsViewComponent_ng_template_2_Template,1,0,"ng-template",null,2,core.Jd)),2&rf){const _r1=core.zd(3);core.Ec(1),core.od("ngIf",ctx.newsItem)("ngIfElse",_r1)}},directives:[common.n,card.a,card.c,card.b,fesm2015_button.b,icon.a,chips.b,common.m,chips.a],styles:[".title[_ngcontent-%COMP%]{font-size:xx-large;font-weight:bolder;line-height:1.8rem}"]});var fesm2015_forms=__webpack_require__("3Pt+"),finalize=__webpack_require__("nYR2"),category_enum=__webpack_require__("7cQS"),angular_fire_storage=__webpack_require__("fMxG"),fesm2015_select=__webpack_require__("d3UM"),slide_toggle=__webpack_require__("1jcm"),fesm2015_core=__webpack_require__("FKr1");function NewsEditComponent_mat_card_2_img_3_Template(rf,ctx){if(1&rf&&core.Rc(0,"img",29),2&rf){const ctx_r4=core.hd(2);core.od("src",ctx_r4.sourceSelected.image,core.Dd)}}function NewsEditComponent_mat_card_2_mat_option_15_Template(rf,ctx){if(1&rf&&(core.Wc(0,"mat-option",30),core.Kd(1),core.Vc()),2&rf){const status_r9=ctx.$implicit;core.od("value",status_r9),core.Ec(1),core.Md(" ",status_r9," ")}}function NewsEditComponent_mat_card_2_div_35_Template(rf,ctx){if(1&rf&&(core.Wc(0,"div"),core.Wc(1,"span",31),core.Kd(2,"As\xed se visualizar\xeda la Descripci\xf3n:"),core.Vc(),core.Rc(3,"div",32),core.Vc()),2&rf){const ctx_r6=core.hd(2);core.Ec(3),core.od("innerHTML",ctx_r6.newsItemForm.controls.description.value,core.Cd)}}function NewsEditComponent_mat_card_2_mat_option_40_Template(rf,ctx){if(1&rf&&(core.Wc(0,"mat-option",30),core.Kd(1),core.Vc()),2&rf){const sourceItem_r10=ctx.$implicit;core.od("value",sourceItem_r10),core.Ec(1),core.Md(" ",sourceItem_r10.name," ")}}function NewsEditComponent_mat_card_2_mat_option_45_Template(rf,ctx){if(1&rf&&(core.Wc(0,"mat-option",30),core.Kd(1),core.Vc()),2&rf){const category_r11=ctx.$implicit;core.od("value",category_r11),core.Ec(1),core.Ld(category_r11)}}function NewsEditComponent_mat_card_2_Template(rf,ctx){if(1&rf){const _r13=core.Xc();core.Wc(0,"mat-card",5),core.Wc(1,"div",6),core.Wc(2,"div",7),core.Id(3,NewsEditComponent_mat_card_2_img_3_Template,1,1,"img",8),core.Vc(),core.Wc(4,"div",9),core.Wc(5,"form",10),core.dd("ngSubmit",function NewsEditComponent_mat_card_2_Template_form_ngSubmit_5_listener(){core.Bd(_r13);return core.hd().onSaveForm()}),core.Wc(6,"mat-card-content"),core.Wc(7,"fieldset",11),core.Wc(8,"legend"),core.Kd(9,"Estado de la noticia"),core.Vc(),core.Wc(10,"div",6),core.Wc(11,"mat-form-field",12),core.Wc(12,"mat-label"),core.Kd(13,"Estado"),core.Vc(),core.Wc(14,"mat-select",13),core.Id(15,NewsEditComponent_mat_card_2_mat_option_15_Template,2,2,"mat-option",14),core.Vc(),core.Vc(),core.Wc(16,"mat-slide-toggle",15),core.Kd(17,"Aviso activo"),core.Vc(),core.Wc(18,"mat-slide-toggle",16),core.Kd(19,"Mostrar en portada"),core.Vc(),core.Vc(),core.Vc(),core.Wc(20,"fieldset",17),core.Wc(21,"legend"),core.Kd(22,"Informaci\xf3n de la noticia"),core.Vc(),core.Wc(23,"mat-form-field",18),core.Wc(24,"mat-label"),core.Kd(25,"URL original"),core.Vc(),core.Rc(26,"input",19),core.Vc(),core.Wc(27,"mat-form-field",18),core.Wc(28,"mat-label"),core.Kd(29,"T\xedtular de la noticia"),core.Vc(),core.Rc(30,"input",20),core.Vc(),core.Wc(31,"mat-form-field",18),core.Wc(32,"mat-label"),core.Kd(33,"Descripci\xf3n"),core.Vc(),core.Rc(34,"textarea",21),core.Vc(),core.Id(35,NewsEditComponent_mat_card_2_div_35_Template,4,1,"div",22),core.Wc(36,"mat-form-field",23),core.Wc(37,"mat-label"),core.Kd(38,"Fuente"),core.Vc(),core.Wc(39,"mat-select",24),core.dd("selectionChange",function NewsEditComponent_mat_card_2_Template_mat_select_selectionChange_39_listener($event){core.Bd(_r13);return core.hd().onSelectionChanged($event)}),core.Id(40,NewsEditComponent_mat_card_2_mat_option_40_Template,2,2,"mat-option",14),core.Vc(),core.Vc(),core.Wc(41,"mat-form-field",23),core.Wc(42,"mat-label"),core.Kd(43,"Categor\xedas"),core.Vc(),core.Wc(44,"mat-select",25),core.Id(45,NewsEditComponent_mat_card_2_mat_option_45_Template,2,2,"mat-option",14),core.Vc(),core.Vc(),core.Vc(),core.Vc(),core.Wc(46,"mat-card-actions",26),core.Wc(47,"button",27),core.Wc(48,"mat-icon"),core.Kd(49,"check"),core.Vc(),core.Vc(),core.Wc(50,"button",28),core.dd("click",function NewsEditComponent_mat_card_2_Template_button_click_50_listener(){core.Bd(_r13);return core.hd().gotoList()}),core.Wc(51,"mat-icon"),core.Kd(52,"list"),core.Vc(),core.Vc(),core.Vc(),core.Vc(),core.Vc(),core.Vc(),core.Vc()}if(2&rf){const ctx_r0=core.hd();core.Ec(3),core.od("ngIf",ctx_r0.sourceSelected),core.Ec(2),core.od("formGroup",ctx_r0.newsItemForm),core.Ec(2),core.od("ngClass",ctx_r0.newsItemForm.controls.status.value),core.Ec(7),core.od("value",ctx_r0.newsItemForm.get("status")),core.Ec(1),core.od("ngForOf",ctx_r0.STATUS),core.Ec(20),core.od("ngIf",ctx_r0.newsItemForm.controls.description.value),core.Ec(4),core.od("compareWith",ctx_r0.compareFunction),core.Ec(1),core.od("ngForOf",ctx_r0.SOURCES),core.Ec(5),core.od("ngForOf",ctx_r0.CATEGORIES),core.Ec(2),core.od("title",ctx_r0.newsItemForm.valid?"Guardar con los datos introducidos":"Deshabilitado hasta que los datos sean v\xe1lidos")("disabled",!ctx_r0.newsItemForm.valid)}}function NewsEditComponent_div_3_Template(rf,ctx){if(1&rf&&(core.Wc(0,"div",33),core.Kd(1),core.Vc()),2&rf){const ctx_r1=core.hd();core.Ec(1),core.Md(" ",ctx_r1.errorMessage," ")}}function NewsEditComponent_ng_template_4_Template(rf,ctx){1&rf&&core.Kd(0," No existe tal noticia\n")}class news_edit_component_NewsEditComponent{constructor(afStorage,fb,route,router,logSrv,appointmentSrv,newsSrv){this.afStorage=afStorage,this.fb=fb,this.route=route,this.router=router,this.logSrv=logSrv,this.appointmentSrv=appointmentSrv,this.newsSrv=newsSrv,this.pageTitle="Creaci\xf3n de una nueva noticia",this.errorMessage="",this.listOfObservers=[],this.STATUS=news_NewsItem.STATUS,this.CATEGORIES=category_enum.d,this.SOURCES=source.b,this.urlRegex="(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/?"}ngOnInit(){const idNewsItem=this.route.snapshot.paramMap.get("id");idNewsItem&&(this.logSrv.info(`id asked ${idNewsItem}`),this.getDetails(idNewsItem)),this.sourceSelected=source.a,this.newsItemForm=this.fb.group({id:[{value:"0",disabled:!0}],active:!0,status:[status_enum.b.Editing,fesm2015_forms.q.required],focused:!0,name:["",[fesm2015_forms.q.required,fesm2015_forms.q.minLength(3),fesm2015_forms.q.maxLength(100)]],image:news_NewsItem.IMAGE_DEFAULT,categories:null,description:"",timestamp:null,source:this.sourceSelected,sourceUrl:["",[fesm2015_forms.q.required,fesm2015_forms.q.pattern(this.urlRegex)]]})}getDetails(idNewsItem){if(this.logSrv.info(`id asked ${idNewsItem}`),"0"===idNewsItem)this.pageTitle="Creaci\xf3n de una nueva noticia",this.newsItem=news_NewsItem.InitDefault();else{const subs1$=this.newsSrv.getOneNewsItem(idNewsItem).subscribe({next:newsItem=>{this.newsItem=newsItem,this.displayNewsItem(),this.logSrv.info(JSON.stringify(this.newsItem))},error:err=>{this.errorMessage=`Error: ${err}`}});this.listOfObservers.push(subs1$)}}displayNewsItem(){var _a,_b,_c,_d,_e,_f;this.newsItemForm&&this.newsItemForm.reset(),"0"===this.newsItem.id?this.pageTitle="Creando una nueva noticia":this.pageTitle=`Editando la noticia ${this.newsItem.name}`,this.sourceSelected=this.newsItem.source,this.newsItemForm.patchValue({id:this.newsItem.id,active:this.newsItem.active,status:this.newsItem.status,focused:this.newsItem.focused,name:this.newsItem.name,image:null!==(_a=this.newsItem.image)&&void 0!==_a?_a:news_NewsItem.IMAGE_DEFAULT,categories:null!==(_b=this.newsItem.categories)&&void 0!==_b?_b:[],description:null!==(_c=this.newsItem.description)&&void 0!==_c?_c:"",timestamp:null!==(_d=this.newsItem.timestamp)&&void 0!==_d?_d:"",source:null!==(_e=this.sourceSelected)&&void 0!==_e?_e:source.a,sourceUrl:null!==(_f=this.newsItem.sourceUrl)&&void 0!==_f?_f:""}),this.newsItemForm.controls.id.setValue(this.newsItem.id),this.newsItemForm.controls.source.setValue(this.sourceSelected)}onSelectionChanged(event){this.sourceSelected=event.value}compareFunction(o1,o2){return o1.name===o2.name&&o1.id===o2.id}onResetForm(){this.newsItemForm.reset()}onSaveForm(){if(this.newsItemForm.valid){this.newsItem.timestamp=this.appointmentSrv.getTimestamp(),this.newsItem.source=this.sourceSelected,this.newsItem.image=this.sourceSelected.image;const newsItem=Object.assign(Object.assign({},this.newsItem),this.newsItemForm.value);this.logSrv.info(`newsItem: ${JSON.stringify(this.newsItem)}`),"0"===newsItem.id?this.newsSrv.addNewsItem(newsItem):this.newsSrv.updateNewsItem(newsItem),this.router.navigate([news_NewsItem.PATH_URL])}else this.errorMessage="Por favor, corrige los mensajes de validaci\xf3n."}onSaveComplete(){this.newsItemForm.reset(),sweetalert2_all_default.a.fire({icon:"success",title:"Datos guardados con \xe9xito",text:`Los datos de ${this.newsItem.name} se han guardado correctamente`}),this.router.navigate([`/${news_NewsItem.PATH_URL}`])}gotoList(){this.newsItemForm.reset(),this.router.navigate([`/${news_NewsItem.PATH_URL}`])}uploadImage(event){const file=event.target.files[0],filePath=file.name,fileRef=this.afStorage.ref(filePath),task=this.afStorage.upload(filePath,file);this.uploadPercent=task.percentageChanges(),task.snapshotChanges().pipe(Object(finalize.a)(()=>{fileRef.getDownloadURL().subscribe(imageUrl=>{this.newsItem.image=imageUrl,this.newsItemForm.patchValue({image:this.newsItem.image})})})).subscribe()}ngOnDestroy(){this.listOfObservers.forEach(sub=>sub.unsubscribe())}}function NewsDashboardComponent_app_section_header_0_Template(rf,ctx){1&rf&&core.Rc(0,"app-section-header",3),2&rf&&core.od("title","EbroNews")}function NewsDashboardComponent_mat_card_2_Template(rf,ctx){if(1&rf){const _r5=core.Xc();core.Wc(0,"mat-card",4),core.dd("click",function NewsDashboardComponent_mat_card_2_Template_mat_card_click_0_listener(){core.Bd(_r5);const newsItem_r2=ctx.$implicit;return core.hd().gotoNewsItem(newsItem_r2)}),core.Wc(1,"div",5),core.Wc(2,"span",6),core.Kd(3,"\xdaltima actualizaci\xf3n: "),core.Vc(),core.Wc(4,"span",7),core.Kd(5),core.Vc(),core.Vc(),core.Wc(6,"div",8),core.Rc(7,"img",9),core.Vc(),core.Wc(8,"mat-card-title"),core.Wc(9,"p"),core.Kd(10),core.Vc(),core.Vc(),core.Wc(11,"mat-card-content"),core.Rc(12,"p",10),core.Vc(),core.Wc(13,"mat-card-actions"),core.Wc(14,"button",11),core.Kd(15,"VER"),core.Vc(),core.Vc(),core.Vc()}if(2&rf){const newsItem_r2=ctx.$implicit;core.Ec(5),core.Ld(newsItem_r2.timestamp),core.Ec(2),core.od("src",newsItem_r2.source.image,core.Dd),core.Ec(3),core.Ld(newsItem_r2.name),core.Ec(2),core.od("innerHTML",newsItem_r2.description,core.Cd)}}news_edit_component_NewsEditComponent.\u0275fac=function NewsEditComponent_Factory(t){return new(t||news_edit_component_NewsEditComponent)(core.Qc(angular_fire_storage.a),core.Qc(fesm2015_forms.d),core.Qc(fesm2015_router.a),core.Qc(fesm2015_router.b),core.Qc(log_service.a),core.Qc(appointments_service.a),core.Qc(news_services_NewsService))},news_edit_component_NewsEditComponent.\u0275cmp=core.Kc({type:news_edit_component_NewsEditComponent,selectors:[["app-news-edit"]],decls:6,vars:4,consts:[[3,"title"],[1,"section-wrapper"],["class","item-edit",4,"ngIf","ngIfElse"],["class","alert-danger",4,"ngIf"],["noNewsTemplate",""],[1,"item-edit"],[1,"row"],[1,"col-lg-3","col-md-4","col-12",2,"text-align","center"],["class","img-thumbnail",3,"src",4,"ngIf"],[1,"col-lg-9","col-md-8","col-12"],[3,"formGroup","ngSubmit"],[1,"form-status-fields",3,"ngClass"],["appearance","outline",1,"col-12","col-md-12","col-lg-4"],["formControlName","status",3,"value"],[3,"value",4,"ngFor","ngForOf"],["formControlName","active",1,"col-12","col-md-6","col-lg-3","mb-3","ml-2"],["formControlName","focused",1,"col-12","col-md-6","col-lg-3","mb-3","ml-2"],[1,"form-info-fields"],["appearance","outline"],["matInput","","type","text","formControlName","sourceUrl","placeholder","URL de la Noticia"],["matInput","","type","text","formControlName","name","placeholder","T\xedtulo"],["matInput","","formControlName","description","placeholder","Descripci\xf3n"],[4,"ngIf"],["appearance","outline",1,"col-12","col-lg-6"],["placeholder","Fuente","formControlName","source",3,"compareWith","selectionChange"],["formControlName","categories","multiple",""],[1,"buttons"],["mat-fab","","type","submit",1,"btn-1",3,"title","disabled"],["mat-fab","",1,"btn-1",3,"click"],[1,"img-thumbnail",3,"src"],[3,"value"],[1,"title"],[1,"preview",3,"innerHTML"],[1,"alert-danger"]],template:function NewsEditComponent_Template(rf,ctx){if(1&rf&&(core.Rc(0,"app-section-header",0),core.Wc(1,"div",1),core.Id(2,NewsEditComponent_mat_card_2_Template,53,11,"mat-card",2),core.Id(3,NewsEditComponent_div_3_Template,2,1,"div",3),core.Vc(),core.Id(4,NewsEditComponent_ng_template_4_Template,1,0,"ng-template",null,4,core.Jd)),2&rf){const _r2=core.zd(5);core.od("title",ctx.pageTitle),core.Ec(2),core.od("ngIf",ctx.newsItem)("ngIfElse",_r2),core.Ec(1),core.od("ngIf",ctx.errorMessage)}},directives:[section_header_component.a,common.n,card.a,fesm2015_forms.r,fesm2015_forms.n,fesm2015_forms.h,card.c,common.l,form_field.c,form_field.g,fesm2015_select.a,fesm2015_forms.m,fesm2015_forms.g,common.m,slide_toggle.a,input.b,fesm2015_forms.c,card.b,fesm2015_button.b,icon.a,fesm2015_core.m],styles:[""]});class news_dashboard_component_NewsDashboardComponent{constructor(router,utilSrv,newsSrv){this.router=router,this.utilSrv=utilSrv,this.newsSrv=newsSrv,this.showHeader=!0}ngOnInit(){this.news$=this.newsSrv.getAllNews(!0,!0,5).pipe(Object(map.a)(newsItems=>newsItems.map(newsItem=>(newsItem.timestamp=this.utilSrv.getDistanceTimestamp(newsItem.timestamp),Object.assign({},newsItem)))))}gotoNewsItem(newsItem){this.router.navigate([`/${news_NewsItem.PATH_URL}/${newsItem.id}`])}}news_dashboard_component_NewsDashboardComponent.\u0275fac=function NewsDashboardComponent_Factory(t){return new(t||news_dashboard_component_NewsDashboardComponent)(core.Qc(fesm2015_router.b),core.Qc(utils_service.b),core.Qc(news_services_NewsService))},news_dashboard_component_NewsDashboardComponent.\u0275cmp=core.Kc({type:news_dashboard_component_NewsDashboardComponent,selectors:[["app-news-dashboard"]],inputs:{showHeader:"showHeader"},decls:4,vars:4,consts:[[3,"title",4,"ngIf"],[1,"news-wrapper"],["class","news-item","routerLink","profile",3,"click",4,"ngFor","ngForOf"],[3,"title"],["routerLink","profile",1,"news-item",3,"click"],[1,"timestamp"],[1,"title"],[1,"data"],[1,"news-image"],["alt","newsItem.name",1,"img-thumbnail",3,"src"],[3,"innerHTML"],["mat-raised-button","","color","primary"]],template:function NewsDashboardComponent_Template(rf,ctx){1&rf&&(core.Id(0,NewsDashboardComponent_app_section_header_0_Template,1,1,"app-section-header",0),core.Wc(1,"div",1),core.Id(2,NewsDashboardComponent_mat_card_2_Template,16,4,"mat-card",2),core.id(3,"async"),core.Vc()),2&rf&&(core.od("ngIf",ctx.showHeader),core.Ec(2),core.od("ngForOf",core.jd(3,2,ctx.news$)))},directives:[common.n,common.m,section_header_component.a,card.a,fesm2015_router.c,card.e,card.c,card.b,fesm2015_button.b],pipes:[common.b],encapsulation:2});const routes=[{path:"",component:news_component_NewsComponent},{path:"dashboard",component:news_dashboard_component_NewsDashboardComponent},{path:":id",component:news_view_component_NewsViewComponent},{path:":id/editar",component:news_edit_component_NewsEditComponent}];class NewsRoutingModule{}NewsRoutingModule.\u0275mod=core.Oc({type:NewsRoutingModule}),NewsRoutingModule.\u0275inj=core.Nc({factory:function NewsRoutingModule_Factory(t){return new(t||NewsRoutingModule)},imports:[[fesm2015_router.e.forChild(routes)],fesm2015_router.e]});class NewsModule{}NewsModule.\u0275mod=core.Oc({type:NewsModule}),NewsModule.\u0275inj=core.Nc({factory:function NewsModule_Factory(t){return new(t||NewsModule)},imports:[[shared_module.a,NewsRoutingModule]]})}};