"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=631,exports.ids=[631],exports.modules={66631:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{LoginModule:()=>LoginModule});var shared_module=__webpack_require__(55083),router=__webpack_require__(8307),core=__webpack_require__(37716),angular_fire_compat_auth=__webpack_require__(1325),section_header_component=__webpack_require__(62305),common=__webpack_require__(38583),fesm2015_button=__webpack_require__(51095),tslib_es6=__webpack_require__(64762),dist=__webpack_require__(59607),audit=__webpack_require__(40227),audit_service=__webpack_require__(18342),users_service=__webpack_require__(89576);class GoogleSigninDirective{constructor(afAuth,router2,auditSrv,usersSrv){this.afAuth=afAuth,this.router=router2,this.auditSrv=auditSrv,this.usersSrv=usersSrv}onclick(){return(0,tslib_es6.__awaiter)(this,void 0,void 0,function*(){if(yield this.afAuth.signInWithPopup(new dist.Z.auth.GoogleAuthProvider),this.afAuth.user){const currentUser=yield this.afAuth.currentUser,description=`${currentUser.displayName} (${currentUser.email})`;this.auditSrv.addAuditItem(audit.x.LOGIN_PROVIDER,currentUser,description),this.usersSrv.updateUserData(currentUser),this.router.navigate(["admin"])}})}}__name(GoogleSigninDirective,"GoogleSigninDirective"),GoogleSigninDirective.\u0275fac=__name(function(t){return new(t||GoogleSigninDirective)(core.Y36(angular_fire_compat_auth.zQ),core.Y36(router.F0),core.Y36(audit_service.C),core.Y36(users_service.K))},"GoogleSigninDirective_Factory"),GoogleSigninDirective.\u0275dir=core.lG2({type:GoogleSigninDirective,selectors:[["","appGoogleSignin",""]],hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("click",__name(function(){return ctx.onclick()},"GoogleSigninDirective_click_HostBindingHandler"))},"GoogleSigninDirective_HostBindings")});var fesm2015_forms=__webpack_require__(3679),card=__webpack_require__(93738),form_field=__webpack_require__(98295),input=__webpack_require__(49983);function EmailLoginComponent_div_1_Template(rf,ctx){if(1&rf){const _r10=core.EpF();core.TgZ(0,"div"),core.TgZ(1,"h3"),core._uU(2,"Crea nueva cuenta de usuario con tu email"),core.qZA(),core.TgZ(3,"button",9),core.NdJ("click",__name(function(){return core.CHM(_r10),core.oxw().changeType("login")},"EmailLoginComponent_div_1_Template_button_click_3_listener")),core._uU(4," \xbfEres un usuario ya registrado? "),core.qZA(),core.qZA()}}function EmailLoginComponent_div_2_Template(rf,ctx){if(1&rf){const _r12=core.EpF();core.TgZ(0,"div"),core.TgZ(1,"h3"),core._uU(2,"Acceso con correo electr\xf3nico"),core.qZA(),core.TgZ(3,"button",10),core.NdJ("click",__name(function(){return core.CHM(_r12),core.oxw().changeType("signup")},"EmailLoginComponent_div_2_Template_button_click_3_listener")),core._uU(4," \xbfQuieres darte de alta como usuario con tu email? "),core.qZA(),core.qZA()}}function EmailLoginComponent_div_3_Template(rf,ctx){if(1&rf){const _r14=core.EpF();core.TgZ(0,"div"),core.TgZ(1,"h3"),core._uU(2,"Reiniciar contrase\xf1a"),core.qZA(),core.TgZ(3,"button",11),core.NdJ("click",__name(function(){return core.CHM(_r14),core.oxw().changeType("login")},"EmailLoginComponent_div_3_Template_button_click_3_listener")),core._uU(4," Volver "),core.qZA(),core.qZA()}}function EmailLoginComponent_mat_error_7_Template(rf,ctx){1&rf&&(core.TgZ(0,"mat-error"),core._uU(1," Debes introducir un correo electr\xf3nico v\xe1lido "),core.qZA())}function EmailLoginComponent_mat_form_field_8_mat_error_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"mat-error"),core._uU(1," La contrase\xf1a debe tener al menos 6 caracteres "),core.qZA())}function EmailLoginComponent_mat_form_field_8_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-form-field",2),core._UZ(1,"input",12),core.YNc(2,EmailLoginComponent_mat_form_field_8_mat_error_2_Template,2,0,"mat-error",0),core.qZA()),2&rf){const ctx_r4=core.oxw();core.Q6J("color",ctx_r4.email.valid&&"accent"),core.xp6(2),core.Q6J("ngIf",ctx_r4.password.invalid&&ctx_r4.password.dirty)}}function EmailLoginComponent_mat_form_field_9_mat_error_2_Template(rf,ctx){1&rf&&(core.TgZ(0,"mat-error"),core._uU(1," Las contrase\xf1as no coinciden "),core.qZA())}function EmailLoginComponent_mat_form_field_9_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"mat-form-field",2),core._UZ(1,"input",13),core.YNc(2,EmailLoginComponent_mat_form_field_9_mat_error_2_Template,2,0,"mat-error",0),core.qZA()),2&rf){const ctx_r5=core.oxw();core.Q6J("color",ctx_r5.passwordDoesMatch?"accent":"warn"),core.xp6(2),core.Q6J("ngIf",ctx_r5.passwordConfirm.dirty&&!ctx_r5.passwordDoesMatch)}}function EmailLoginComponent_button_12_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"button",14),core._uU(1," Reestablecer correo electr\xf3nico "),core.qZA()),2&rf){const ctx_r6=core.oxw();core.Q6J("disabled",ctx_r6.loading)}}function EmailLoginComponent_button_13_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"button",15),core._uU(1," Enviar "),core.qZA()),2&rf){const ctx_r7=core.oxw();core.Q6J("disabled",ctx_r7.form.invalid||!ctx_r7.passwordDoesMatch||ctx_r7.loading)}}function EmailLoginComponent_button_14_Template(rf,ctx){if(1&rf){const _r18=core.EpF();core.TgZ(0,"button",16),core.NdJ("click",__name(function(){return core.CHM(_r18),core.oxw().changeType("reset")},"EmailLoginComponent_button_14_Template_button_click_0_listener")),core._uU(1," \xbfOlvidaste tu contrase\xf1a? "),core.qZA()}}__name(EmailLoginComponent_div_1_Template,"EmailLoginComponent_div_1_Template"),__name(EmailLoginComponent_div_2_Template,"EmailLoginComponent_div_2_Template"),__name(EmailLoginComponent_div_3_Template,"EmailLoginComponent_div_3_Template"),__name(EmailLoginComponent_mat_error_7_Template,"EmailLoginComponent_mat_error_7_Template"),__name(EmailLoginComponent_mat_form_field_8_mat_error_2_Template,"EmailLoginComponent_mat_form_field_8_mat_error_2_Template"),__name(EmailLoginComponent_mat_form_field_8_Template,"EmailLoginComponent_mat_form_field_8_Template"),__name(EmailLoginComponent_mat_form_field_9_mat_error_2_Template,"EmailLoginComponent_mat_form_field_9_mat_error_2_Template"),__name(EmailLoginComponent_mat_form_field_9_Template,"EmailLoginComponent_mat_form_field_9_Template"),__name(EmailLoginComponent_button_12_Template,"EmailLoginComponent_button_12_Template"),__name(EmailLoginComponent_button_13_Template,"EmailLoginComponent_button_13_Template"),__name(EmailLoginComponent_button_14_Template,"EmailLoginComponent_button_14_Template");class EmailLoginComponent{constructor(afAuth,fb,router2,auditSrv){this.afAuth=afAuth,this.fb=fb,this.router=router2,this.auditSrv=auditSrv,this.type="login",this.loading=!1}ngOnInit(){this.form=this.fb.group({email:["",[fesm2015_forms.kI.required,fesm2015_forms.kI.email]],password:["",[fesm2015_forms.kI.minLength(6),fesm2015_forms.kI.required]],passwordConfirm:["",[]]})}changeType(val){this.type=val}get isLogin(){return"login"===this.type}get isSignup(){return"signup"===this.type}get isPasswordReset(){return"reset"===this.type}get email(){return this.form.get("email")}get password(){return this.form.get("password")}get passwordConfirm(){return this.form.get("passwordConfirm")}get passwordDoesMatch(){return"signup"!==this.type||this.password.value===this.passwordConfirm.value}onSubmit(){return(0,tslib_es6.__awaiter)(this,void 0,void 0,function*(){this.loading=!0;const email=this.email.value,password=this.password.value;try{if(this.isLogin&&(yield this.afAuth.signInWithEmailAndPassword(email,password),this.afAuth.user)){const currentUser=yield this.afAuth.currentUser,description=`${currentUser.displayName} (${currentUser.email})`;this.auditSrv.addAuditItem(audit.x.LOGIN_EMAIL,currentUser,description),this.router.navigate(["admin"])}this.isSignup&&(yield this.afAuth.createUserWithEmailAndPassword(email,password)),this.isPasswordReset&&(yield this.afAuth.sendPasswordResetEmail(email),this.serverMessage="Revisa tu correo electr\xf3nico")}catch(err){this.serverMessage=err}this.loading=!1})}}function LoginComponent_div_1_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.TgZ(0,"div",3),core.TgZ(1,"p"),core._uU(2," Has accedido como "),core.TgZ(3,"strong"),core._uU(4),core.qZA(),core.qZA(),core.TgZ(5,"button",4),core.NdJ("click",__name(function(){return core.CHM(_r5),core.oxw().afAuth.signOut()},"LoginComponent_div_1_Template_button_click_5_listener")),core._uU(6,"Salir"),core.qZA(),core.qZA()}if(2&rf){const user_r3=ctx.ngIf;core.xp6(4),core.Oqu(user_r3.email)}}function LoginComponent_ng_template_3_div_0_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",6),core.TgZ(1,"button",7),core._UZ(2,"img",8),core._uU(3," Acceso con Google "),core.qZA(),core.TgZ(4,"h5"),core._uU(5,"o"),core.qZA(),core._UZ(6,"app-email-login"),core.qZA())}function LoginComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.YNc(0,LoginComponent_ng_template_3_div_0_Template,7,0,"div",5),core.ALo(1,"async")),2&rf){const ctx_r2=core.oxw();core.Q6J("ngIf",!core.lcZ(1,1,ctx_r2.afAuth.authState))}}__name(EmailLoginComponent,"EmailLoginComponent"),EmailLoginComponent.\u0275fac=__name(function(t){return new(t||EmailLoginComponent)(core.Y36(angular_fire_compat_auth.zQ),core.Y36(fesm2015_forms.qu),core.Y36(router.F0),core.Y36(audit_service.C))},"EmailLoginComponent_Factory"),EmailLoginComponent.\u0275cmp=core.Xpm({type:EmailLoginComponent,selectors:[["app-email-login"]],decls:15,vars:12,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[3,"color"],["matInput","","formControlName","email","type","email","placeholder","Email","autocomplete","off"],[3,"color",4,"ngIf"],[1,"server-error"],["mat-stroked-button","","type","submit",3,"disabled",4,"ngIf"],["mat-raised-button","","color","accent","type","submit",3,"disabled",4,"ngIf"],["mat-button","",3,"click",4,"ngIf"],["mat-stroked-button","",3,"click"],["size","small","mat-stroked-button","",3,"click"],["size","small","mat-button","",3,"click"],["matInput","","formControlName","password","type","password","placeholder","Password","autocomplete","off"],["matInput","","formControlName","passwordConfirm","type","password","placeholder","Confirm password","autocomplete","off"],["mat-stroked-button","","type","submit",3,"disabled"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["mat-button","",3,"click"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"mat-card"),core.YNc(1,EmailLoginComponent_div_1_Template,5,0,"div",0),core.YNc(2,EmailLoginComponent_div_2_Template,5,0,"div",0),core.YNc(3,EmailLoginComponent_div_3_Template,5,0,"div",0),core.TgZ(4,"form",1),core.NdJ("ngSubmit",__name(function(){return ctx.onSubmit()},"EmailLoginComponent_Template_form_ngSubmit_4_listener")),core.TgZ(5,"mat-form-field",2),core._UZ(6,"input",3),core.YNc(7,EmailLoginComponent_mat_error_7_Template,2,0,"mat-error",0),core.qZA(),core.YNc(8,EmailLoginComponent_mat_form_field_8_Template,3,2,"mat-form-field",4),core.YNc(9,EmailLoginComponent_mat_form_field_9_Template,3,2,"mat-form-field",4),core.TgZ(10,"mat-error",5),core._uU(11),core.qZA(),core.YNc(12,EmailLoginComponent_button_12_Template,2,1,"button",6),core.YNc(13,EmailLoginComponent_button_13_Template,2,1,"button",7),core.qZA(),core.YNc(14,EmailLoginComponent_button_14_Template,2,0,"button",8),core.qZA()),2&rf&&(core.xp6(1),core.Q6J("ngIf",ctx.isSignup),core.xp6(1),core.Q6J("ngIf",ctx.isLogin),core.xp6(1),core.Q6J("ngIf",ctx.isPasswordReset),core.xp6(1),core.Q6J("formGroup",ctx.form),core.xp6(1),core.Q6J("color",ctx.email.valid&&"accent"),core.xp6(2),core.Q6J("ngIf",ctx.email.invalid&&ctx.email.dirty),core.xp6(1),core.Q6J("ngIf",!ctx.isPasswordReset),core.xp6(1),core.Q6J("ngIf",ctx.isSignup),core.xp6(2),core.Oqu(ctx.serverMessage),core.xp6(1),core.Q6J("ngIf",ctx.isPasswordReset),core.xp6(1),core.Q6J("ngIf",!ctx.isPasswordReset),core.xp6(1),core.Q6J("ngIf",ctx.isLogin&&!ctx.isPasswordReset))},"EmailLoginComponent_Template"),directives:[card.a8,common.O5,fesm2015_forms._Y,fesm2015_forms.JL,fesm2015_forms.sg,form_field.KE,input.Nt,fesm2015_forms.Fj,fesm2015_forms.JJ,fesm2015_forms.u,form_field.TO,fesm2015_button.lW],styles:["mat-card[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%;margin:0 auto}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.server-error[_ngcontent-%COMP%]{margin:8px 0}input[_ngcontent-%COMP%]{height:2em}input[_ngcontent-%COMP%]   div.mat-form-field-infix[_ngcontent-%COMP%]{padding:.3em 0}input[_ngcontent-%COMP%]   div.mat-form-field-infix[_ngcontent-%COMP%]   input.mat-input-element[_ngcontent-%COMP%]{vertical-align:top}div.mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:1.15em}"]}),__name(LoginComponent_div_1_Template,"LoginComponent_div_1_Template"),__name(LoginComponent_ng_template_3_div_0_Template,"LoginComponent_ng_template_3_div_0_Template"),__name(LoginComponent_ng_template_3_Template,"LoginComponent_ng_template_3_Template");class LoginComponent{constructor(afAuth){this.afAuth=afAuth}}__name(LoginComponent,"LoginComponent"),LoginComponent.\u0275fac=__name(function(t){return new(t||LoginComponent)(core.Y36(angular_fire_compat_auth.zQ))},"LoginComponent_Factory"),LoginComponent.\u0275cmp=core.Xpm({type:LoginComponent,selectors:[["app-login"]],decls:5,vars:5,consts:[[3,"title"],["class","logout",4,"ngIf","ngIfElse"],["noAuthTemplate",""],[1,"logout"],["mat-stroked-button","",3,"click"],["class","section-wrapper",4,"ngIf"],[1,"section-wrapper"],["mat-raised-button","","appGoogleSignin",""],["src","/assets/google-logo.svg"]],template:__name(function(rf,ctx){if(1&rf&&(core._UZ(0,"app-section-header",0),core.YNc(1,LoginComponent_div_1_Template,7,1,"div",1),core.ALo(2,"async"),core.YNc(3,LoginComponent_ng_template_3_Template,2,3,"ng-template",null,2,core.W1O)),2&rf){const _r1=core.MAs(4);core.Q6J("title","Acceder"),core.xp6(1),core.Q6J("ngIf",core.lcZ(2,3,ctx.afAuth.authState))("ngIfElse",_r1)}},"LoginComponent_Template"),directives:[section_header_component.I,common.O5,fesm2015_button.lW,GoogleSigninDirective,EmailLoginComponent],pipes:[common.Ov],styles:["button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.25em}[_nghost-%COMP%]{text-align:center}.logout[_ngcontent-%COMP%]{padding-top:5em}"]});const routes=[{path:"",component:LoginComponent}];class LoginRoutingModule{}__name(LoginRoutingModule,"LoginRoutingModule"),LoginRoutingModule.\u0275fac=__name(function(t){return new(t||LoginRoutingModule)},"LoginRoutingModule_Factory"),LoginRoutingModule.\u0275mod=core.oAB({type:LoginRoutingModule}),LoginRoutingModule.\u0275inj=core.cJS({imports:[[router.Bz.forChild(routes)],router.Bz]});class LoginModule{}__name(LoginModule,"LoginModule"),LoginModule.\u0275fac=__name(function(t){return new(t||LoginModule)},"LoginModule_Factory"),LoginModule.\u0275mod=core.oAB({type:LoginModule}),LoginModule.\u0275inj=core.cJS({imports:[[shared_module.m,LoginRoutingModule]]})}};