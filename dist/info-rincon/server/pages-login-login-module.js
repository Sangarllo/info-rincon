exports.ids=[13],exports.modules={F4UR:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"LoginModule",function(){return LoginModule});var shared_module=__webpack_require__("PCNd"),router=__webpack_require__("tyNb"),core=__webpack_require__("fXoL"),angular_fire_auth=__webpack_require__("UbJi"),section_header_component=__webpack_require__("PdlT"),common=__webpack_require__("ofXK"),fesm2015_button=__webpack_require__("bTqV"),tslib=__webpack_require__("zOht"),index_cjs=__webpack_require__("Wcq6"),index_cjs_default=__webpack_require__.n(index_cjs),audit=__webpack_require__("Borm"),audit_service=__webpack_require__("yHy8"),users_service=__webpack_require__("tVj7");class google_signin_directive_GoogleSigninDirective{constructor(afAuth,router,auditSrv,usersSrv){this.afAuth=afAuth,this.router=router,this.auditSrv=auditSrv,this.usersSrv=usersSrv}onclick(){return Object(tslib.__awaiter)(this,void 0,void 0,function*(){if(yield this.afAuth.signInWithPopup(new index_cjs_default.a.auth.GoogleAuthProvider),this.afAuth.user){const currentUser=yield this.afAuth.currentUser,description=`${currentUser.displayName} (${currentUser.email})`;this.auditSrv.addAuditItem(audit.b.LOGIN_PROVIDER,currentUser,description),this.usersSrv.updateUserData(currentUser),this.router.navigate(["admin"])}})}}google_signin_directive_GoogleSigninDirective.\u0275fac=function GoogleSigninDirective_Factory(t){return new(t||google_signin_directive_GoogleSigninDirective)(core.Qc(angular_fire_auth.a),core.Qc(router.b),core.Qc(audit_service.a),core.Qc(users_service.a))},google_signin_directive_GoogleSigninDirective.\u0275dir=core.Lc({type:google_signin_directive_GoogleSigninDirective,selectors:[["","appGoogleSignin",""]],hostBindings:function GoogleSigninDirective_HostBindings(rf,ctx){1&rf&&core.dd("click",function GoogleSigninDirective_click_HostBindingHandler(){return ctx.onclick()})}});var fesm2015_forms=__webpack_require__("3Pt+"),card=__webpack_require__("Wp6s"),form_field=__webpack_require__("kmnG"),input=__webpack_require__("qFsG");function EmailLoginComponent_div_1_Template(rf,ctx){if(1&rf){const _r10=core.Xc();core.Wc(0,"div"),core.Wc(1,"h3"),core.Kd(2,"Crea nueva cuenta de usuario con tu email"),core.Vc(),core.Wc(3,"button",9),core.dd("click",function EmailLoginComponent_div_1_Template_button_click_3_listener(){core.Bd(_r10);return core.hd().changeType("login")}),core.Kd(4," \xbfEres un usuario ya registrado? "),core.Vc(),core.Vc()}}function EmailLoginComponent_div_2_Template(rf,ctx){if(1&rf){const _r12=core.Xc();core.Wc(0,"div"),core.Wc(1,"h3"),core.Kd(2,"Acceso con correo electr\xf3nico"),core.Vc(),core.Wc(3,"button",10),core.dd("click",function EmailLoginComponent_div_2_Template_button_click_3_listener(){core.Bd(_r12);return core.hd().changeType("signup")}),core.Kd(4," \xbfQuieres darte de alta como usuario con tu email? "),core.Vc(),core.Vc()}}function EmailLoginComponent_div_3_Template(rf,ctx){if(1&rf){const _r14=core.Xc();core.Wc(0,"div"),core.Wc(1,"h3"),core.Kd(2,"Reiniciar contrase\xf1a"),core.Vc(),core.Wc(3,"button",11),core.dd("click",function EmailLoginComponent_div_3_Template_button_click_3_listener(){core.Bd(_r14);return core.hd().changeType("login")}),core.Kd(4," Volver "),core.Vc(),core.Vc()}}function EmailLoginComponent_mat_error_7_Template(rf,ctx){1&rf&&(core.Wc(0,"mat-error"),core.Kd(1," Debes introducir un correo electr\xf3nico v\xe1lido "),core.Vc())}function EmailLoginComponent_mat_form_field_8_mat_error_2_Template(rf,ctx){1&rf&&(core.Wc(0,"mat-error"),core.Kd(1," La contrase\xf1a debe tener al menos 6 caracteres "),core.Vc())}function EmailLoginComponent_mat_form_field_8_Template(rf,ctx){if(1&rf&&(core.Wc(0,"mat-form-field",2),core.Rc(1,"input",12),core.Id(2,EmailLoginComponent_mat_form_field_8_mat_error_2_Template,2,0,"mat-error",0),core.Vc()),2&rf){const ctx_r4=core.hd();core.od("color",ctx_r4.email.valid&&"accent"),core.Ec(2),core.od("ngIf",ctx_r4.password.invalid&&ctx_r4.password.dirty)}}function EmailLoginComponent_mat_form_field_9_mat_error_2_Template(rf,ctx){1&rf&&(core.Wc(0,"mat-error"),core.Kd(1," Las contrase\xf1as no coinciden "),core.Vc())}function EmailLoginComponent_mat_form_field_9_Template(rf,ctx){if(1&rf&&(core.Wc(0,"mat-form-field",2),core.Rc(1,"input",13),core.Id(2,EmailLoginComponent_mat_form_field_9_mat_error_2_Template,2,0,"mat-error",0),core.Vc()),2&rf){const ctx_r5=core.hd();core.od("color",ctx_r5.passwordDoesMatch?"accent":"warn"),core.Ec(2),core.od("ngIf",ctx_r5.passwordConfirm.dirty&&!ctx_r5.passwordDoesMatch)}}function EmailLoginComponent_button_12_Template(rf,ctx){if(1&rf&&(core.Wc(0,"button",14),core.Kd(1," Reestablecer correo electr\xf3nico "),core.Vc()),2&rf){const ctx_r6=core.hd();core.od("disabled",ctx_r6.loading)}}function EmailLoginComponent_button_13_Template(rf,ctx){if(1&rf&&(core.Wc(0,"button",15),core.Kd(1," Enviar "),core.Vc()),2&rf){const ctx_r7=core.hd();core.od("disabled",ctx_r7.form.invalid||!ctx_r7.passwordDoesMatch||ctx_r7.loading)}}function EmailLoginComponent_button_14_Template(rf,ctx){if(1&rf){const _r18=core.Xc();core.Wc(0,"button",16),core.dd("click",function EmailLoginComponent_button_14_Template_button_click_0_listener(){core.Bd(_r18);return core.hd().changeType("reset")}),core.Kd(1," \xbfOlvidaste tu contrase\xf1a? "),core.Vc()}}class email_login_component_EmailLoginComponent{constructor(afAuth,fb,router,auditSrv){this.afAuth=afAuth,this.fb=fb,this.router=router,this.auditSrv=auditSrv,this.type="login",this.loading=!1}ngOnInit(){this.form=this.fb.group({email:["",[fesm2015_forms.q.required,fesm2015_forms.q.email]],password:["",[fesm2015_forms.q.minLength(6),fesm2015_forms.q.required]],passwordConfirm:["",[]]})}changeType(val){this.type=val}get isLogin(){return"login"===this.type}get isSignup(){return"signup"===this.type}get isPasswordReset(){return"reset"===this.type}get email(){return this.form.get("email")}get password(){return this.form.get("password")}get passwordConfirm(){return this.form.get("passwordConfirm")}get passwordDoesMatch(){return"signup"!==this.type||this.password.value===this.passwordConfirm.value}onSubmit(){return Object(tslib.__awaiter)(this,void 0,void 0,function*(){this.loading=!0;const email=this.email.value,password=this.password.value;try{if(this.isLogin&&(yield this.afAuth.signInWithEmailAndPassword(email,password),this.afAuth.user)){const currentUser=yield this.afAuth.currentUser,description=`${currentUser.displayName} (${currentUser.email})`;this.auditSrv.addAuditItem(audit.b.LOGIN_EMAIL,currentUser,description),this.router.navigate(["admin"])}this.isSignup&&(yield this.afAuth.createUserWithEmailAndPassword(email,password)),this.isPasswordReset&&(yield this.afAuth.sendPasswordResetEmail(email),this.serverMessage="Revisa tu correo electr\xf3nico")}catch(err){this.serverMessage=err}this.loading=!1})}}function LoginComponent_div_1_Template(rf,ctx){if(1&rf){const _r5=core.Xc();core.Wc(0,"div",3),core.Wc(1,"p"),core.Kd(2," Has accedido como "),core.Wc(3,"strong"),core.Kd(4),core.Vc(),core.Vc(),core.Wc(5,"button",4),core.dd("click",function LoginComponent_div_1_Template_button_click_5_listener(){core.Bd(_r5);return core.hd().afAuth.signOut()}),core.Kd(6,"Salir"),core.Vc(),core.Vc()}if(2&rf){const user_r3=ctx.ngIf;core.Ec(4),core.Ld(user_r3.email)}}function LoginComponent_ng_template_3_div_0_Template(rf,ctx){1&rf&&(core.Wc(0,"div",6),core.Wc(1,"button",7),core.Rc(2,"img",8),core.Kd(3," Acceso con Google "),core.Vc(),core.Wc(4,"h5"),core.Kd(5,"o"),core.Vc(),core.Rc(6,"app-email-login"),core.Vc())}function LoginComponent_ng_template_3_Template(rf,ctx){if(1&rf&&(core.Id(0,LoginComponent_ng_template_3_div_0_Template,7,0,"div",5),core.id(1,"async")),2&rf){const ctx_r2=core.hd();core.od("ngIf",!core.jd(1,1,ctx_r2.afAuth.authState))}}email_login_component_EmailLoginComponent.\u0275fac=function EmailLoginComponent_Factory(t){return new(t||email_login_component_EmailLoginComponent)(core.Qc(angular_fire_auth.a),core.Qc(fesm2015_forms.d),core.Qc(router.b),core.Qc(audit_service.a))},email_login_component_EmailLoginComponent.\u0275cmp=core.Kc({type:email_login_component_EmailLoginComponent,selectors:[["app-email-login"]],decls:15,vars:12,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[3,"color"],["matInput","","formControlName","email","type","email","placeholder","Email","autocomplete","off"],[3,"color",4,"ngIf"],[1,"server-error"],["mat-stroked-button","","type","submit",3,"disabled",4,"ngIf"],["mat-raised-button","","color","accent","type","submit",3,"disabled",4,"ngIf"],["mat-button","",3,"click",4,"ngIf"],["mat-stroked-button","",3,"click"],["size","small","mat-stroked-button","",3,"click"],["size","small","mat-button","",3,"click"],["matInput","","formControlName","password","type","password","placeholder","Password","autocomplete","off"],["matInput","","formControlName","passwordConfirm","type","password","placeholder","Confirm password","autocomplete","off"],["mat-stroked-button","","type","submit",3,"disabled"],["mat-raised-button","","color","accent","type","submit",3,"disabled"],["mat-button","",3,"click"]],template:function EmailLoginComponent_Template(rf,ctx){1&rf&&(core.Wc(0,"mat-card"),core.Id(1,EmailLoginComponent_div_1_Template,5,0,"div",0),core.Id(2,EmailLoginComponent_div_2_Template,5,0,"div",0),core.Id(3,EmailLoginComponent_div_3_Template,5,0,"div",0),core.Wc(4,"form",1),core.dd("ngSubmit",function EmailLoginComponent_Template_form_ngSubmit_4_listener(){return ctx.onSubmit()}),core.Wc(5,"mat-form-field",2),core.Rc(6,"input",3),core.Id(7,EmailLoginComponent_mat_error_7_Template,2,0,"mat-error",0),core.Vc(),core.Id(8,EmailLoginComponent_mat_form_field_8_Template,3,2,"mat-form-field",4),core.Id(9,EmailLoginComponent_mat_form_field_9_Template,3,2,"mat-form-field",4),core.Wc(10,"mat-error",5),core.Kd(11),core.Vc(),core.Id(12,EmailLoginComponent_button_12_Template,2,1,"button",6),core.Id(13,EmailLoginComponent_button_13_Template,2,1,"button",7),core.Vc(),core.Id(14,EmailLoginComponent_button_14_Template,2,0,"button",8),core.Vc()),2&rf&&(core.Ec(1),core.od("ngIf",ctx.isSignup),core.Ec(1),core.od("ngIf",ctx.isLogin),core.Ec(1),core.od("ngIf",ctx.isPasswordReset),core.Ec(1),core.od("formGroup",ctx.form),core.Ec(1),core.od("color",ctx.email.valid&&"accent"),core.Ec(2),core.od("ngIf",ctx.email.invalid&&ctx.email.dirty),core.Ec(1),core.od("ngIf",!ctx.isPasswordReset),core.Ec(1),core.od("ngIf",ctx.isSignup),core.Ec(2),core.Ld(ctx.serverMessage),core.Ec(1),core.od("ngIf",ctx.isPasswordReset),core.Ec(1),core.od("ngIf",!ctx.isPasswordReset),core.Ec(1),core.od("ngIf",ctx.isLogin&&!ctx.isPasswordReset))},directives:[card.a,common.n,fesm2015_forms.r,fesm2015_forms.n,fesm2015_forms.h,form_field.c,input.b,fesm2015_forms.c,fesm2015_forms.m,fesm2015_forms.g,form_field.b,fesm2015_button.b],styles:["mat-card[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%;margin:0 auto}mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.server-error[_ngcontent-%COMP%]{margin:8px 0}input[_ngcontent-%COMP%]{height:2em}input[_ngcontent-%COMP%]   div.mat-form-field-infix[_ngcontent-%COMP%]{padding:.3em 0}input[_ngcontent-%COMP%]   div.mat-form-field-infix[_ngcontent-%COMP%]   input.mat-input-element[_ngcontent-%COMP%]{vertical-align:top}div.mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:1.15em}"]});class LoginComponent{constructor(afAuth){this.afAuth=afAuth}}LoginComponent.\u0275fac=function LoginComponent_Factory(t){return new(t||LoginComponent)(core.Qc(angular_fire_auth.a))},LoginComponent.\u0275cmp=core.Kc({type:LoginComponent,selectors:[["app-login"]],decls:5,vars:5,consts:[[3,"title"],["class","logout",4,"ngIf","ngIfElse"],["noAuthTemplate",""],[1,"logout"],["mat-stroked-button","",3,"click"],["class","section-wrapper",4,"ngIf"],[1,"section-wrapper"],["mat-raised-button","","appGoogleSignin",""],["src","/assets/google-logo.svg"]],template:function LoginComponent_Template(rf,ctx){if(1&rf&&(core.Rc(0,"app-section-header",0),core.Id(1,LoginComponent_div_1_Template,7,1,"div",1),core.id(2,"async"),core.Id(3,LoginComponent_ng_template_3_Template,2,3,"ng-template",null,2,core.Jd)),2&rf){const _r1=core.zd(4);core.od("title","Acceder"),core.Ec(1),core.od("ngIf",core.jd(2,3,ctx.afAuth.authState))("ngIfElse",_r1)}},directives:[section_header_component.a,common.n,fesm2015_button.b,google_signin_directive_GoogleSigninDirective,email_login_component_EmailLoginComponent],pipes:[common.b],styles:["button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.25em}[_nghost-%COMP%]{text-align:center}.logout[_ngcontent-%COMP%]{padding-top:5em}"]});const routes=[{path:"",component:LoginComponent}];class LoginRoutingModule{}LoginRoutingModule.\u0275mod=core.Oc({type:LoginRoutingModule}),LoginRoutingModule.\u0275inj=core.Nc({factory:function LoginRoutingModule_Factory(t){return new(t||LoginRoutingModule)},imports:[[router.e.forChild(routes)],router.e]});class LoginModule{}LoginModule.\u0275mod=core.Oc({type:LoginModule}),LoginModule.\u0275inj=core.Nc({factory:function LoginModule_Factory(t){return new(t||LoginModule)},imports:[[shared_module.a,LoginRoutingModule]]})}};